pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app  | /app/dist/index.cjs:63
pollmetry-app  | `}function j5(){return function(){this.error(404)}}function N5(){return function(e){if(this.hasTrailingSlash()){this.error(404);return}var n=el.original(this.req);n.path=null,n.pathname=q5(n.pathname+"/");var r=k5(A5.format(n)),i=I5("Redirecting","Redirecting to "+T5(r));e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(i)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",r),e.end(i)}}});var xb=g((Je,yb)=>{"use strict";var Gs=cg(),O5=require("events").EventEmitter,mb=lg(),hb=Sx(),R5=wu(),D5=_u(),vb=Kx(),gb=pb();Je=yb.exports=M5;function M5(){var t=function(e,n,r){t.handle(e,n,r)};return mb(t,O5.prototype,!1),mb(t,hb,!1),t.request=Object.create(vb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(gb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}Je.application=hb;Je.request=vb;Je.response=gb;Je.Route=R5;Je.Router=D5;Je.json=Gs.json;Je.query=Eu();Je.raw=Gs.raw;Je.static=fb();Je.text=Gs.text;Je.urlencoded=Gs.urlencoded;var B5=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];B5.forEach(function(t){Object.defineProperty(Je,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var nl=g((Yj,bb)=>{"use strict";bb.exports=xb()});var Yp=g(a1=>{"use strict";a1.parse=function(t,e){return new Xp(t,e).parse()};var Xp=class t{constructor(e,n){this.source=e,this.transform=n||T3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,r,i;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!i)this.dimension++,this.dimension>1&&(r=new t(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);else if(n.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(i&&this.newEntry(!0),i=!i):n.value===","&&!i?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function T3(t){return t}});var ed=g((HB,s1)=>{var C3=Yp();s1.exports={create:function(t,e){return{parse:function(){return C3.parse(t,e)}}}}});var u1=g((GB,c1)=>{"use strict";var A3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,P3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,q3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,I3=/^-?infinity$/;c1.exports=function(e){if(I3.test(e))return Number(e.replace("i","I"));var n=A3.exec(e);if(!n)return j3(e)||null;var r=!!n[8],i=parseInt(n[1],10);r&&(i=o1(i));var a=parseInt(n[2],10)-1,s=n[3],o=parseInt(n[4],10),c=parseInt(n[5],10),u=parseInt(n[6],10),l=n[7];l=l?1e3*parseFloat(l):0;var p,d=N3(e);return d!=null?(p=new Date(Date.UTC(i,a,s,o,c,u,l)),td(i)&&p.setUTCFullYear(i),d!==0&&p.setTime(p.getTime()-d)):(p=new Date(i,a,s,o,c,u,l),td(i)&&p.setFullYear(i)),p};function j3(t){var e=P3.exec(t);if(e){var n=parseInt(e[1],10),r=!!e[4];r&&(n=o1(n));var i=parseInt(e[2],10)-1,a=e[3],s=new Date(n,i,a);return td(n)&&s.setFullYear(n),s}}function N3(t){if(t.endsWith("+00"))return 0;var e=q3.exec(t.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var r=n==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*r*1e3}}function o1(t){return-(t-1)}function td(t){return t>=0&&t<100}});var p1=g((KB,l1)=>{l1.exports=R3;var O3=Object.prototype.hasOwnProperty;function R3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)O3.call(n,r)&&(t[r]=n[r])}return t}});var m1=g((WB,f1)=>{"use strict";var D3=p1();f1.exports=Gr;function Gr(t){if(!(this instanceof Gr))return new Gr(t);D3(this,K3(t))}var M3=["seconds","minutes","hours","days","months","years"];Gr.prototype.toPostgres=function(){var t=M3.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var B3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},F3=["years","months","days"],L3=["hours","minutes","seconds"];Gr.prototype.toISOString=Gr.prototype.toISO=function(){var t=F3.map(n,this).join(""),e=L3.map(n,this).join("");return"P"+t+"T"+e;function n(r){var i=this[r]||0;return r==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+B3[r]}};var nd="([+-]?\\d+)",z3=nd+"\\s+years?",$3=nd+"\\s+mons?",U3=nd+"\\s+days?",Q3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",V3=new RegExp([z3,$3,U3,Q3].map(function(t){return"("+t+")?"}).join("\\s*")),d1={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H3=["hours","minutes","seconds","milliseconds"];function G3(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function K3(t){if(!t)return{};var e=V3.exec(t),n=e[8]==="-";return Object.keys(d1).reduce(function(r,i){var a=d1[i],s=e[a];return!s||(s=i==="milliseconds"?G3(s):parseInt(s,10),!s)||(n&&~H3.indexOf(i)&&(s*=-1),r[i]=s),r},{})}});var v1=g((ZB,h1)=>{"use strict";h1.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var n="",r=0;r<e.length;)if(e[r]!=="\\")n+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))n+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&e[r+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";r+=Math.floor(i/2)*2}return new Buffer(n,"binary")}});var _1=g((JB,S1)=>{var Ca=Yp(),Aa=ed(),Co=u1(),y1=m1(),x1=v1();function Ao(t){return function(n){return n===null?n:t(n)}}function b1(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function W3(t){return t?Ca.parse(t,b1):null}function Z3(t){return parseInt(t,10)}function rd(t){return t?Ca.parse(t,Ao(Z3)):null}function J3(t){return t?Ca.parse(t,Ao(function(e){return w1(e).trim()})):null}var X3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=od(n)),n});return e.parse()},id=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},vt=function(t){if(!t)return null;var e=Aa.create(t);return e.parse()},ad=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=Co(n)),n});return e.parse()},Y3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=y1(n)),n});return e.parse()},eP=function(t){return t?Ca.parse(t,Ao(x1)):null},sd=function(t){return parseInt(t,10)},w1=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},g1=function(t){return t?Ca.parse(t,Ao(JSON.parse)):null},od=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},tP=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",n="",r=!1,i=2;i<t.length-1;i++){if(r||(e+=t[i]),t[i]===")"){r=!0;continue}else if(!r)continue;t[i]!==","&&(n+=t[i])}var a=od(e);return a.radius=parseFloat(n),a},nP=function(t){t(20,w1),t(21,sd),t(23,sd),t(26,sd),t(700,parseFloat),t(701,parseFloat),t(16,b1),t(1082,Co),t(1114,Co),t(1184,Co),t(600,od),t(651,vt),t(718,tP),t(1e3,W3),t(1001,eP),t(1005,rd),t(1007,rd),t(1028,rd),t(1016,J3),t(1017,X3),t(1021,id),t(1022,id),t(1231,id),t(1014,vt),t(1015,vt),t(1008,vt),t(1009,vt),t(1040,vt),t(1041,vt),t(1115,ad),t(1182,ad),t(1185,ad),t(1186,y1),t(1187,Y3),t(17,x1),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,g1),t(3807,g1),t(3907,vt),t(2951,vt),t(791,vt),t(1183,vt),t(1270,vt)};S1.exports={init:nP}});var k1=g((XB,E1)=>{"use strict";var nt=1e6;function rP(t){var e=t.readInt32BE(0),n=t.readUInt32BE(4),r="";e<0&&(e=~e+(n===0),n=~n+1>>>0,r="-");var i="",a,s,o,c,u,l;{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}return a=e%nt,s=4294967296*a+n,o=""+s%nt,r+o+i}E1.exports=rP});var q1=g((YB,P1)=>{var iP=k1(),fe=function(t,e,n,r,i){n=n||0,r=r||!1,i=i||function(f,v,y){return f*Math.pow(2,y)+v};var a=n>>3,s=function(f){return r?~f&255:f},o=255,c=8-n%8;e<c&&(o=255<<8-e&255,c=e),n&&(o=o>>n%8);var u=0;n%8+e>=8&&(u=i(0,s(t[a])&o,c));for(var l=e+n>>3,p=a+1;p<l;p++)u=i(u,s(t[p]),8);var d=(e+n)%8;return d>0&&(u=i(u,s(t[l])>>8-d,d)),u},A1=function(t,e,n){var r=Math.pow(2,n-1)-1,i=fe(t,1),a=fe(t,n,1);if(a===0)return 0;var s=1,o=function(u,l,p){u===0&&(u=1);for(var d=1;d<=p;d++)s/=2,(l&1<<p-d)>0&&(u+=s);return u},c=fe(t,e,n+1,!1,o);return a==Math.pow(2,n+1)-1?c===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,a-r)*c},aP=function(t){return fe(t,1)==1?-1*(fe(t,15,1,!0)+1):fe(t,15,1)},T1=function(t){return fe(t,1)==1?-1*(fe(t,31,1,!0)+1):fe(t,31,1)},sP=function(t){return A1(t,23,8)},oP=function(t){return A1(t,52,11)},cP=function(t){var e=fe(t,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,fe(t,16,16)),r=0,i=[],a=fe(t,16),s=0;s<a;s++)r+=fe(t,16,64+16*s)*n,n/=1e4;var o=Math.pow(10,fe(t,16,48));return(e===0?1:-1)*Math.round(r*o)/o},C1=function(t,e){var n=fe(e,1),r=fe(e,63,1),i=new Date((n===0?1:-1)*r/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(a){this.usec=a},i.getUTCMicroSeconds=function(){return this.usec},i},Pa=function(t){for(var e=fe(t,32),n=fe(t,32,32),r=fe(t,32,64),i=96,a=[],s=0;s<e;s++)a[s]=fe(t,32,i),i+=32,i+=32;var o=function(u){var l=fe(t,32,i);if(i+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=fe(t,l*8,i),i+=l*8,p;if(u==25)return p=t.toString(this.encoding,i>>3,(i+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],d;if(u.length>1){var f=u.shift();for(d=0;d<f;d++)p[d]=c(u,l);u.unshift(f)}else for(d=0;d<u[0];d++)p[d]=o(l);return p};return c(a,r)},uP=function(t){return t.toString("utf8")},lP=function(t){return t===null?null:fe(t,8)>0},pP=function(t){t(20,iP),t(21,aP),t(23,T1),t(26,T1),t(1700,cP),t(700,sP),t(701,oP),t(16,lP),t(1114,C1.bind(null,!1)),t(1184,C1.bind(null,!0)),t(1e3,Pa),t(1007,Pa),t(1016,Pa),t(1008,Pa),t(1009,Pa),t(25,uP)};P1.exports={init:pP}});var j1=g((eF,I1)=>{I1.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var ja=g(Ia=>{var dP=_1(),fP=q1(),mP=ed(),hP=j1();Ia.getTypeParser=vP;Ia.setTypeParser=gP;Ia.arrayParser=mP;Ia.builtins=hP;var qa={text:{},binary:{}};function N1(t){return String(t)}function vP(t,e){return e=e||"text",qa[e]&&qa[e][t]||N1}function gP(t,e,n){typeof e=="function"&&(n=e,e="text"),qa[e][t]=n}dP.init(function(t,e){qa.text[t]=e});fP.init(function(t,e){qa.binary[t]=e})});var Na=g((nF,cd)=>{"use strict";cd.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Kr=ja(),yP=Kr.getTypeParser(20,"text"),xP=Kr.getTypeParser(1016,"text");cd.exports.__defineSetter__("parseInt8",function(t){Kr.setTypeParser(20,"text",t?Kr.getTypeParser(23,"text"):yP),Kr.setTypeParser(1016,"text",t?Kr.getTypeParser(1007,"text"):xP)})});var Wr=g((rF,D1)=>{"use strict";var bP=Na(),O1=require("util"),{isDate:wP}=O1.types||O1;function SP(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function R1(t){let e="{";for(let n=0;n<t.length;n++)if(n>0&&(e=e+","),t[n]===null||typeof t[n]>"u")e=e+"NULL";else if(Array.isArray(t[n]))e=e+R1(t[n]);else if(ArrayBuffer.isView(t[n])){let r=t[n];if(!(r instanceof Buffer)){let i=Buffer.from(r.buffer,r.byteOffset,r.byteLength);i.length===r.byteLength?r=i:r=i.slice(r.byteOffset,r.byteOffset+r.byteLength)}e+="\\\\x"+r.toString("hex")}else e+=SP(Po(t[n]));return e=e+"}",e}var Po=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let n=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return n.length===t.byteLength?n:n.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wP(t)?bP.parseInputDatesAsUTC?kP(t):EP(t):Array.isArray(t)?R1(t):_P(t,e)}return t.toString()};function _P(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Po(t.toPostgres(Po),e)}return JSON.stringify(t)}function EP(t){let e=-t.getTimezoneOffset(),n=t.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);let i=String(n).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(i+="-",e*=-1):i+="+",i+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),r&&(i+=" BC"),i}function kP(t){let e=t.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let r=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return r+="+00:00",n&&(r+=" BC"),r}function TP(t,e,n){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),n&&(t.callback=n),t}var CP=function(t){return'"'+t.replace(/"/g,'""')+'"'},AP=function(t){let e=!1,n="'";if(t==null||typeof t!="string")return"''";for(let r=0;r<t.length;r++){let i=t[r];i==="'"?n+=i+i:i==="\\"?(n+=i+i,e=!0):n+=i}return n+="'",e===!0&&(n=" E"+n),n};D1.exports={prepareValue:function(e){return Po(e)},normalizeQueryConfig:TP,escapeIdentifier:CP,escapeLiteral:AP}});var B1=g((iF,M1)=>{"use strict";var Zr=require("crypto");function ud(t){return Zr.createHash("md5").update(t,"utf-8").digest("hex")}function PP(t,e,n){let r=ud(e+t);return"md5"+ud(Buffer.concat([Buffer.from(r),n]))}function qP(t){return Zr.createHash("sha256").update(t).digest()}function IP(t,e){return t=t.replace(/(\D)-/,"$1"),Zr.createHash(t).update(e).digest()}function jP(t,e){return Zr.createHmac("sha256",t).update(e).digest()}async function NP(t,e,n){return Zr.pbkdf2Sync(t,e,n,32,"sha256")}M1.exports={postgresMd5PasswordHash:PP,randomBytes:Zr.randomBytes,deriveKey:NP,sha256:qP,hashByName:IP,hmacSha256:jP,md5:ud}});var $1=g((aF,z1)=>{var F1=require("crypto");z1.exports={postgresMd5PasswordHash:RP,randomBytes:OP,deriveKey:FP,sha256:DP,hashByName:MP,hmacSha256:BP,md5:ld};var L1=F1.webcrypto||globalThis.crypto,Kn=L1.subtle,pd=new TextEncoder;function OP(t){return L1.getRandomValues(Buffer.alloc(t))}async function ld(t){try{return F1.createHash("md5").update(t,"utf-8").digest("hex")}catch{let n=typeof t=="string"?pd.encode(t):t,r=await Kn.digest("MD5",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function RP(t,e,n){let r=await ld(e+t);return"md5"+await ld(Buffer.concat([Buffer.from(r),n]))}async function DP(t){return await Kn.digest("SHA-256",t)}async function MP(t,e){return await Kn.digest(t,e)}async function BP(t,e){let n=await Kn.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Kn.sign("HMAC",n,pd.encode(e))}async function FP(t,e,n){let r=await Kn.importKey("raw",pd.encode(t),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Kn.deriveBits(i,r,256,["deriveBits"])}});var fd=g((sF,dd)=>{"use strict";var LP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;LP?dd.exports=B1():dd.exports=$1()});var V1=g((oF,Q1)=>{function Wn(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function md(t,e){let n=t[e++];if(n<128)return{length:n,index:e};let r=n&127;if(r>4)throw Wn("bad length",t);n=0;for(let i=0;i<r;i++)n=n<<8|t[e++];return{length:n,index:e}}function U1(t,e){if(t[e++]!==6)throw Wn("non-OID data",t);let{length:n,index:r}=md(t,e);e=r;let i=e+n,a=t[e++],s=(a/40>>0)+"."+a%40;for(;e<i;){let o=0;for(;e<i;){let c=t[e++];if(o=o<<7|c&127,c<128)break}s+="."+o}return{oid:s,index:e}}function Oa(t,e){if(t[e++]!==48)throw Wn("non-sequence data",t);return md(t,e)}function zP(t,e){e===void 0&&(e=0),e=Oa(t,e).index;let{length:n,index:r}=Oa(t,e);e=r+n,e=Oa(t,e).index;let{oid:i,index:a}=U1(t,e);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=Oa(t,e).index,t[e++]!==160)throw Wn("non-tag data",t);e=md(t,e).index,e=Oa(t,e).index;let{oid:s}=U1(t,e);switch(s){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Wn("unknown hash OID "+s,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Wn("Ed448 certificate channel binding is not currently supported by Postgres")}throw Wn("unknown OID "+i,t)}Q1.exports={signatureAlgorithmHashFromCertificate:zP}});var W1=g((cF,K1)=>{"use strict";var un=fd(),{signatureAlgorithmHashFromCertificate:$P}=V1();function UP(t,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let r=n.find(s=>t.includes(s));if(!r)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(r==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=un.randomBytes(18).toString("base64");return{mechanism:r,clientNonce:i,response:(r==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function QP(t,e,n,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=GP(n);if(i.nonce.startsWith(t.clientNonce)){if(i.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+t.clientNonce,s="r="+i.nonce+",s="+i.salt+",i="+i.iteration,o=r?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let I=r.getPeerCertificate().raw,_=$P(I);(_==="MD5"||_==="SHA-1")&&(_="SHA-256");let O=await un.hashByName(_,I);o=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(O)]).toString("base64")}let c="c="+o+",r="+i.nonce,u=a+","+s+","+c,l=Buffer.from(i.salt,"base64"),p=await un.deriveKey(e,l,i.iteration),d=await un.hmacSha256(p,"Client Key"),f=await un.sha256(d),v=await un.hmacSha256(f,u),y=WP(Buffer.from(d),Buffer.from(v)).toString("base64"),b=await un.hmacSha256(p,"Server Key"),E=await un.hmacSha256(b,u);t.message="SASLResponse",t.serverSignature=Buffer.from(E).toString("base64"),t.response=c+",p="+y}function VP(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=KP(e);if(n!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HP(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,n)=>t.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H1(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function G1(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],r=e.substring(2);return[n,r]}))}function GP(t){let e=G1(t),n=e.get("r");if(n){if(!HP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let r=e.get("s");if(r){if(!H1(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(i,10);return{nonce:n,salt:r,iteration:a}}function KP(t){let n=G1(t).get("v");if(n){if(!H1(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function WP(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((n,r)=>t[r]^e[r]))}K1.exports={startSession:UP,continueSession:QP,finalizeSession:VP}});var Io=g((uF,Z1)=>{"use strict";var ZP=ja();function qo(t){this._types=t||ZP,this.text={},this.binary={}}qo.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};qo.prototype.setTypeParser=function(t,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[t]=n};qo.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Z1.exports=qo});var Y1=g((lF,X1)=>{"use strict";function Jr(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let n={},r,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of r.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(r.username),n.password=n.password||decodeURIComponent(r.password),r.protocol=="socket:")return n.host=decodeURI(r.pathname),n.database=r.searchParams.get("db"),n.client_encoding=r.searchParams.get("encoding"),n;let a=i?"":r.hostname;n.host?a&&/^%2f/i.test(a)&&(r.pathname=a+r.pathname):n.host=decodeURIComponent(a),n.port||(n.port=r.port);let s=r.pathname.slice(1)||null;n.database=s?decodeURI(s):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let o=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function JP(t){return Object.entries(t).reduce((n,[r,i])=>(i!=null&&(n[r]=i),n),{})}function J1(t){return Object.entries(t).reduce((n,[r,i])=>{if(r==="ssl"){let a=i;typeof a=="boolean"&&(n[r]=a),typeof a=="object"&&(n[r]=JP(a))}else if(i!=null)if(r==="port"){if(i!==""){let a=parseInt(i,10);if(isNaN(a))throw new Error(`Invalid ${r}: ${i}`);n[r]=a}}else n[r]=i;return n},{})}function XP(t){return J1(Jr(t))}X1.exports=Jr;Jr.parse=Jr;Jr.toClientConfig=J1;Jr.parseIntoClientConfig=XP});var vd=g((pF,nw)=>{"use strict";var YP=require("dns"),tw=Na(),ew=Y1().parse,Ge=function(t,e,n){return n===void 0?n=process.env["PG"+t.toUpperCase()]:n===!1||(n=process.env[n]),e[t]||n||tw[t]},eq=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return tw.ssl},Xr=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},gt=function(t,e,n){let r=e[n];r!=null&&t.push(n+"="+Xr(r))},hd=class{constructor(e){e=typeof e=="string"?ew(e):e||{},e.connectionString&&(e=Object.assign({},e,ew(e.connectionString))),this.user=Ge("user",e),this.database=Ge("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ge("port",e),10),this.host=Ge("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ge("password",e)}),this.binary=Ge("binary",e),this.options=Ge("options",e),this.ssl=typeof e.ssl>"u"?eq():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ge("client_encoding",e),this.replication=Ge("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ge("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ge("fallback_application_name",e,!1),this.statement_timeout=Ge("statement_timeout",e,!1),this.lock_timeout=Ge("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Ge("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ge("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];gt(n,this,"user"),gt(n,this,"password"),gt(n,this,"port"),gt(n,this,"application_name"),gt(n,this,"fallback_application_name"),gt(n,this,"connect_timeout"),gt(n,this,"options");let r=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(gt(n,r,"sslmode"),gt(n,r,"sslca"),gt(n,r,"sslkey"),gt(n,r,"sslcert"),gt(n,r,"sslrootcert"),this.database&&n.push("dbname="+Xr(this.database)),this.replication&&n.push("replication="+Xr(this.replication)),this.host&&n.push("host="+Xr(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Xr(this.client_encoding)),YP.lookup(this.host,function(i,a){return i?e(i,null):(n.push("hostaddr="+Xr(a)),e(null,n.join(" ")))})}};nw.exports=hd});var yd=g((dF,iw)=>{"use strict";var tq=ja(),rw=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gd=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=rw.exec(e.text):n=rw.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let r=0,i=e.length;r<i;r++){let a=e[r];a!==null?n[r]=this._parsers[r](a):n[r]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let r=0,i=e.length;r<i;r++){let a=e[r],s=this.fields[r].name;if(a!==null){let o=this.fields[r].format==="binary"?Buffer.from(a):a;n[s]=this._parsers[r](o)}else n[s]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let r=0;r<e.length;r++){let i=e[r];n[i.name]=null,this._types?this._parsers[r]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[r]=tq.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...n}}};iw.exports=gd});var cw=g((fF,ow)=>{"use strict";var{EventEmitter:nq}=require("events"),aw=yd(),sw=Wr(),xd=class extends nq{constructor(e,n,r){super(),e=sw.normalizeQueryConfig(e,n,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new aw(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new aw(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(r){this._canceledDueToError=r;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:sw.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};ow.exports=xd});var Od=g(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.NoticeMessage=M.DataRowMessage=M.CommandCompleteMessage=M.ReadyForQueryMessage=M.NotificationResponseMessage=M.BackendKeyDataMessage=M.AuthenticationMD5Password=M.ParameterStatusMessage=M.ParameterDescriptionMessage=M.RowDescriptionMessage=M.Field=M.CopyResponse=M.CopyDataMessage=M.DatabaseError=M.copyDone=M.emptyQuery=M.replicationStart=M.portalSuspended=M.noData=M.closeComplete=M.bindComplete=M.parseComplete=void 0;M.parseComplete={name:"parseComplete",length:5};M.bindComplete={name:"bindComplete",length:5};M.closeComplete={name:"closeComplete",length:5};M.noData={name:"noData",length:5};M.portalSuspended={name:"portalSuspended",length:5};M.replicationStart={name:"replicationStart",length:4};M.emptyQuery={name:"emptyQuery",length:4};M.copyDone={name:"copyDone",length:4};var bd=class extends Error{constructor(e,n,r){super(e),this.length=n,this.name=r}};M.DatabaseError=bd;var wd=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};M.CopyDataMessage=wd;var Sd=class{constructor(e,n,r,i){this.length=e,this.name=n,this.binary=r,this.columnTypes=new Array(i)}};M.CopyResponse=Sd;var _d=class{constructor(e,n,r,i,a,s,o){this.name=e,this.tableID=n,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=a,this.dataTypeModifier=s,this.format=o}};M.Field=_d;var Ed=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};M.RowDescriptionMessage=Ed;var kd=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};M.ParameterDescriptionMessage=kd;var Td=class{constructor(e,n,r){this.length=e,this.parameterName=n,this.parameterValue=r,this.name="parameterStatus"}};M.ParameterStatusMessage=Td;var Cd=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};M.AuthenticationMD5Password=Cd;var Ad=class{constructor(e,n,r){this.length=e,this.processID=n,this.secretKey=r,this.name="backendKeyData"}};M.BackendKeyDataMessage=Ad;var Pd=class{constructor(e,n,r,i){this.length=e,this.processId=n,this.channel=r,this.payload=i,this.name="notification"}};M.NotificationResponseMessage=Pd;var qd=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};M.ReadyForQueryMessage=qd;var Id=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};M.CommandCompleteMessage=Id;var jd=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};M.DataRowMessage=jd;var Nd=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};M.NoticeMessage=Nd});var uw=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Writer=void 0;var Rd=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let r=this.buffer,i=r.length+(r.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};jo.Writer=Rd});var pw=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.serialize=void 0;var Dd=uw(),ue=new Dd.Writer,rq=t=>{ue.addInt16(3).addInt16(0);for(let r of Object.keys(t))ue.addCString(r).addCString(t[r]);ue.addCString("client_encoding").addCString("UTF8");let e=ue.addCString("").flush(),n=e.length+4;return new Dd.Writer().addInt32(n).add(e).flush()},iq=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},aq=t=>ue.addCString(t).flush(112),sq=function(t,e){return ue.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ue.flush(112)},oq=function(t){return ue.addString(t).flush(112)},cq=t=>ue.addCString(t).flush(81),lw=[],uq=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=t.types||lw,r=n.length,i=ue.addCString(e).addCString(t.text).addInt16(r);for(let a=0;a<r;a++)i.addInt32(n[a]);return ue.flush(80)},Yr=new Dd.Writer,lq=function(t,e){for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];r==null?(ue.addInt16(0),Yr.addInt32(-1)):r instanceof Buffer?(ue.addInt16(1),Yr.addInt32(r.length),Yr.add(r)):(ue.addInt16(0),Yr.addInt32(Buffer.byteLength(r)),Yr.addString(r))}},pq=(t={})=>{let e=t.portal||"",n=t.statement||"",r=t.binary||!1,i=t.values||lw,a=i.length;return ue.addCString(e).addCString(n),ue.addInt16(a),lq(i,t.valueMapper),ue.addInt16(a),ue.add(Yr.flush()),ue.addInt16(1),ue.addInt16(r?1:0),ue.flush(66)},dq=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fq=t=>{if(!t||!t.portal&&!t.rows)return dq;let e=t.portal||"",n=t.rows||0,r=Buffer.byteLength(e),i=4+r+1+4,a=Buffer.allocUnsafe(1+i);return a[0]=69,a.writeInt32BE(i,1),a.write(e,5,"utf-8"),a[r+5]=0,a.writeUInt32BE(n,a.length-4),a},mq=(t,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(t,8),n.writeInt32BE(e,12),n},Md=(t,e)=>{let r=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+r);return i[0]=t,i.writeInt32BE(r,1),i.write(e,5,"utf-8"),i[r]=0,i},hq=ue.addCString("P").flush(68),vq=ue.addCString("S").flush(68),gq=t=>t.name?Md(68,`${t.type}${t.name||""}`):t.type==="P"?hq:vq,yq=t=>{let e=`${t.type}${t.name||""}`;return Md(67,e)},xq=t=>ue.add(t).flush(100),bq=t=>Md(102,t),No=t=>Buffer.from([t,0,0,0,4]),wq=No(72),Sq=No(83),_q=No(88),Eq=No(99),kq={startup:rq,password:aq,requestSsl:iq,sendSASLInitialResponseMessage:sq,sendSCRAMClientFinalMessage:oq,query:cq,parse:uq,bind:pq,execute:fq,describe:gq,close:yq,flush:()=>wq,sync:()=>Sq,end:()=>_q,copyData:xq,copyDone:()=>Eq,copyFail:bq,cancel:mq};Oo.serialize=kq});var dw=g(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BufferReader=void 0;var Tq=Buffer.allocUnsafe(0),Bd=class{constructor(e=0){this.offset=e,this.buffer=Tq,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};Ro.BufferReader=Bd});var hw=g(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.Parser=void 0;var me=Od(),Cq=dw(),Fd=1,Aq=4,fw=Fd+Aq,mw=Buffer.allocUnsafe(0),Ld=class{constructor(e){if(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0,this.reader=new Cq.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+fw<=r;){let a=this.buffer[i],s=this.buffer.readUInt32BE(i+Fd),o=Fd+s;if(o+i<=r){let c=this.handlePacket(i+fw,a,s,this.buffer);n(c),i+=o}else break}i===r?(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let i;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;i=Buffer.allocUnsafe(a)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,i){switch(n){case 50:return me.bindComplete;case 49:return me.parseComplete;case 51:return me.closeComplete;case 110:return me.noData;case 115:return me.portalSuspended;case 99:return me.copyDone;case 87:return me.replicationStart;case 73:return me.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 116:return this.parseParameterDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:return new me.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.string(1);return new me.ReadyForQueryMessage(n,i)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring();return new me.CommandCompleteMessage(n,i)}parseCopyData(e,n,r){let i=r.slice(e,e+(n-4));return new me.CopyDataMessage(n,i)}parseCopyInMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyInResponse")}parseCopyOutMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyOutResponse")}parseCopyMessage(e,n,r,i){this.reader.setBuffer(e,r);let a=this.reader.byte()!==0,s=this.reader.int16(),o=new me.CopyResponse(n,i,a,s);for(let c=0;c<s;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.cstring(),s=this.reader.cstring();return new me.NotificationResponseMessage(n,i,a,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.RowDescriptionMessage(n,i);for(let s=0;s<i;s++)a.fields[s]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),r=this.reader.int16(),i=this.reader.uint32(),a=this.reader.int16(),s=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new me.Field(e,n,r,i,a,s,o)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.ParameterDescriptionMessage(n,i);for(let s=0;s<i;s++)a.dataTypeIDs[s]=this.reader.int32();return a}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new Array(i);for(let s=0;s<i;s++){let o=this.reader.int32();a[s]=o===-1?null:this.reader.string(o)}return new me.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring(),a=this.reader.cstring();return new me.ParameterStatusMessage(n,i,a)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.int32();return new me.BackendKeyDataMessage(n,i,a)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a={name:"authenticationOk",length:n};switch(i){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let s=this.reader.bytes(4);return new me.AuthenticationMD5Password(n,s)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let s;do s=this.reader.cstring(),s&&a.mechanisms.push(s);while(s)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return a}parseErrorMessage(e,n,r,i){this.reader.setBuffer(e,r);let a={},s=this.reader.string(1);for(;s!=="\0";)a[s]=this.reader.cstring(),s=this.reader.string(1);let o=a.M,c=i==="notice"?new me.NoticeMessage(n,o):new me.DatabaseError(o,n,i);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};Do.Parser=Ld});var zd=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DatabaseError=ln.serialize=ln.parse=void 0;var Pq=Od();Object.defineProperty(ln,"DatabaseError",{enumerable:!0,get:function(){return Pq.DatabaseError}});var qq=pw();Object.defineProperty(ln,"serialize",{enumerable:!0,get:function(){return qq.serialize}});var Iq=hw();function jq(t,e){let n=new Iq.Parser;return t.on("data",r=>n.parse(r,e)),new Promise(r=>t.on("end",()=>r()))}ln.parse=jq});var vw=g($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.default={}});var yw=g((wF,gw)=>{var{getStream:Nq,getSecureStream:Oq}=Bq();gw.exports={getStream:Nq,getSecureStream:Oq};function Rq(){function t(n){let r=require("net");return new r.Socket}function e(n){return require("tls").connect(n)}return{getStream:t,getSecureStream:e}}function Dq(){function t(n){let{CloudflareSocket:r}=vw();return new r(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:t,getSecureStream:e}}function Mq(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function Bq(){return Mq()?Dq():Rq()}});var Qd=g((SF,xw)=>{"use strict";var Fq=require("events").EventEmitter,{parse:Lq,serialize:Ne}=zd(),{getStream:zq,getSecureStream:$q}=yw(),Uq=Ne.flush(),Qq=Ne.sync(),Vq=Ne.end(),Ud=class extends Fq{constructor(e){super(),e=e||{},this.stream=e.stream||zq(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(r){r==="message"&&(n._emitMessage=!0)})}connect(e,n){let r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")});let i=function(a){r._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||r.emit("error",a)};if(this.stream.on("error",i),this.stream.on("close",function(){r.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:r.stream};r.ssl!==!0&&(Object.assign(o,r.ssl),"key"in r.ssl&&(o.key=r.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(o.servername=n);try{r.stream=$q(o)}catch(u){return r.emit("error",u)}r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")})}attachListeners(e){Lq(e,n=>{let r=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(r,n)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(e){this.stream.write(Ne.startup(e))}cancel(e,n){this._send(Ne.cancel(e,n))}password(e){this._send(Ne.password(e))}sendSASLInitialResponseMessage(e,n){this._send(Ne.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(Ne.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(Ne.query(e))}parse(e){this._send(Ne.parse(e))}bind(e){this._send(Ne.bind(e))}execute(e){this._send(Ne.execute(e))}flush(){this.stream.writable&&this.stream.write(Uq)}sync(){this._ending=!0,this._send(Qq)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Vq,()=>{this.stream.end()})}close(e){this._send(Ne.close(e))}describe(e){this._send(Ne.describe(e))}sendCopyFromChunk(e){this._send(Ne.copyData(e))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(e){this._send(Ne.copyFail(e))}};xw.exports=Ud});var _w=g((_F,Sw)=>{"use strict";var{Transform:Hq}=require("stream"),{StringDecoder:Gq}=require("string_decoder"),pn=Symbol("last"),Mo=Symbol("decoder");function Kq(t,e,n){let r;if(this.overflow){if(r=this[Mo].write(t).split(this.matcher),r.length===1)return n();r.shift(),this.overflow=!1}else this[pn]+=this[Mo].write(t),r=this[pn].split(this.matcher);this[pn]=r.pop();for(let i=0;i<r.length;i++)try{ww(this,this.mapper(r[i]))}catch(a){return n(a)}if(this.overflow=this[pn].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Wq(t){if(this[pn]+=this[Mo].end(),this[pn])try{ww(this,this.mapper(this[pn]))}catch(e){return t(e)}t()}function ww(t,e){e!==void 0&&t.push(e)}function bw(t){return t}function Zq(t,e,n){switch(t=t||/\r?\n/,e=e||bw,n=n||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(n=t,t=/\r?\n/);break;case 2:typeof t=="function"?(n=e,e=t,t=/\r?\n/):typeof e=="object"&&(n=e,e=bw)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Kq,n.flush=Wq,n.readableObjectMode=!0;let r=new Hq(n);return r[pn]="",r[Mo]=new Gq("utf8"),r.matcher=t,r.mapper=e,r.maxLength=n.maxLength,r.skipOverflow=n.skipOverflow||!1,r.overflow=!1,r._destroy=function(i,a){this._writableState.errorEmitted=!1,a(i)},r}Sw.exports=Zq});var Tw=g((EF,Ht)=>{"use strict";var Ew=require("path"),Jq=require("stream").Stream,Xq=_w(),kw=require("util"),Yq=5432,Bo=process.platform==="win32",Ra=process.stderr,e9=56,t9=7,n9=61440,r9=32768;function i9(t){return(t&n9)==r9}var ei=["host","port","database","user","password"],Vd=ei.length,a9=ei[Vd-1];function Hd(){var t=Ra instanceof Jq&&Ra.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
pollmetry-app  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app  | /app/dist/index.cjs:63
pollmetry-app  | `}function j5(){return function(){this.error(404)}}function N5(){return function(e){if(this.hasTrailingSlash()){this.error(404);return}var n=el.original(this.req);n.path=null,n.pathname=q5(n.pathname+"/");var r=k5(A5.format(n)),i=I5("Redirecting","Redirecting to "+T5(r));e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(i)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",r),e.end(i)}}});var xb=g((Je,yb)=>{"use strict";var Gs=cg(),O5=require("events").EventEmitter,mb=lg(),hb=Sx(),R5=wu(),D5=_u(),vb=Kx(),gb=pb();Je=yb.exports=M5;function M5(){var t=function(e,n,r){t.handle(e,n,r)};return mb(t,O5.prototype,!1),mb(t,hb,!1),t.request=Object.create(vb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(gb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}Je.application=hb;Je.request=vb;Je.response=gb;Je.Route=R5;Je.Router=D5;Je.json=Gs.json;Je.query=Eu();Je.raw=Gs.raw;Je.static=fb();Je.text=Gs.text;Je.urlencoded=Gs.urlencoded;var B5=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];B5.forEach(function(t){Object.defineProperty(Je,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var nl=g((Yj,bb)=>{"use strict";bb.exports=xb()});var Yp=g(a1=>{"use strict";a1.parse=function(t,e){return new Xp(t,e).parse()};var Xp=class t{constructor(e,n){this.source=e,this.transform=n||T3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,r,i;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!i)this.dimension++,this.dimension>1&&(r=new t(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);else if(n.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(i&&this.newEntry(!0),i=!i):n.value===","&&!i?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function T3(t){return t}});var ed=g((HB,s1)=>{var C3=Yp();s1.exports={create:function(t,e){return{parse:function(){return C3.parse(t,e)}}}}});var u1=g((GB,c1)=>{"use strict";var A3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,P3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,q3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,I3=/^-?infinity$/;c1.exports=function(e){if(I3.test(e))return Number(e.replace("i","I"));var n=A3.exec(e);if(!n)return j3(e)||null;var r=!!n[8],i=parseInt(n[1],10);r&&(i=o1(i));var a=parseInt(n[2],10)-1,s=n[3],o=parseInt(n[4],10),c=parseInt(n[5],10),u=parseInt(n[6],10),l=n[7];l=l?1e3*parseFloat(l):0;var p,d=N3(e);return d!=null?(p=new Date(Date.UTC(i,a,s,o,c,u,l)),td(i)&&p.setUTCFullYear(i),d!==0&&p.setTime(p.getTime()-d)):(p=new Date(i,a,s,o,c,u,l),td(i)&&p.setFullYear(i)),p};function j3(t){var e=P3.exec(t);if(e){var n=parseInt(e[1],10),r=!!e[4];r&&(n=o1(n));var i=parseInt(e[2],10)-1,a=e[3],s=new Date(n,i,a);return td(n)&&s.setFullYear(n),s}}function N3(t){if(t.endsWith("+00"))return 0;var e=q3.exec(t.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var r=n==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*r*1e3}}function o1(t){return-(t-1)}function td(t){return t>=0&&t<100}});var p1=g((KB,l1)=>{l1.exports=R3;var O3=Object.prototype.hasOwnProperty;function R3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)O3.call(n,r)&&(t[r]=n[r])}return t}});var m1=g((WB,f1)=>{"use strict";var D3=p1();f1.exports=Gr;function Gr(t){if(!(this instanceof Gr))return new Gr(t);D3(this,K3(t))}var M3=["seconds","minutes","hours","days","months","years"];Gr.prototype.toPostgres=function(){var t=M3.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var B3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},F3=["years","months","days"],L3=["hours","minutes","seconds"];Gr.prototype.toISOString=Gr.prototype.toISO=function(){var t=F3.map(n,this).join(""),e=L3.map(n,this).join("");return"P"+t+"T"+e;function n(r){var i=this[r]||0;return r==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+B3[r]}};var nd="([+-]?\\d+)",z3=nd+"\\s+years?",$3=nd+"\\s+mons?",U3=nd+"\\s+days?",Q3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",V3=new RegExp([z3,$3,U3,Q3].map(function(t){return"("+t+")?"}).join("\\s*")),d1={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H3=["hours","minutes","seconds","milliseconds"];function G3(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function K3(t){if(!t)return{};var e=V3.exec(t),n=e[8]==="-";return Object.keys(d1).reduce(function(r,i){var a=d1[i],s=e[a];return!s||(s=i==="milliseconds"?G3(s):parseInt(s,10),!s)||(n&&~H3.indexOf(i)&&(s*=-1),r[i]=s),r},{})}});var v1=g((ZB,h1)=>{"use strict";h1.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var n="",r=0;r<e.length;)if(e[r]!=="\\")n+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))n+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&e[r+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";r+=Math.floor(i/2)*2}return new Buffer(n,"binary")}});var _1=g((JB,S1)=>{var Ca=Yp(),Aa=ed(),Co=u1(),y1=m1(),x1=v1();function Ao(t){return function(n){return n===null?n:t(n)}}function b1(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function W3(t){return t?Ca.parse(t,b1):null}function Z3(t){return parseInt(t,10)}function rd(t){return t?Ca.parse(t,Ao(Z3)):null}function J3(t){return t?Ca.parse(t,Ao(function(e){return w1(e).trim()})):null}var X3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=od(n)),n});return e.parse()},id=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},vt=function(t){if(!t)return null;var e=Aa.create(t);return e.parse()},ad=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=Co(n)),n});return e.parse()},Y3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=y1(n)),n});return e.parse()},eP=function(t){return t?Ca.parse(t,Ao(x1)):null},sd=function(t){return parseInt(t,10)},w1=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},g1=function(t){return t?Ca.parse(t,Ao(JSON.parse)):null},od=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},tP=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",n="",r=!1,i=2;i<t.length-1;i++){if(r||(e+=t[i]),t[i]===")"){r=!0;continue}else if(!r)continue;t[i]!==","&&(n+=t[i])}var a=od(e);return a.radius=parseFloat(n),a},nP=function(t){t(20,w1),t(21,sd),t(23,sd),t(26,sd),t(700,parseFloat),t(701,parseFloat),t(16,b1),t(1082,Co),t(1114,Co),t(1184,Co),t(600,od),t(651,vt),t(718,tP),t(1e3,W3),t(1001,eP),t(1005,rd),t(1007,rd),t(1028,rd),t(1016,J3),t(1017,X3),t(1021,id),t(1022,id),t(1231,id),t(1014,vt),t(1015,vt),t(1008,vt),t(1009,vt),t(1040,vt),t(1041,vt),t(1115,ad),t(1182,ad),t(1185,ad),t(1186,y1),t(1187,Y3),t(17,x1),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,g1),t(3807,g1),t(3907,vt),t(2951,vt),t(791,vt),t(1183,vt),t(1270,vt)};S1.exports={init:nP}});var k1=g((XB,E1)=>{"use strict";var nt=1e6;function rP(t){var e=t.readInt32BE(0),n=t.readUInt32BE(4),r="";e<0&&(e=~e+(n===0),n=~n+1>>>0,r="-");var i="",a,s,o,c,u,l;{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}return a=e%nt,s=4294967296*a+n,o=""+s%nt,r+o+i}E1.exports=rP});var q1=g((YB,P1)=>{var iP=k1(),fe=function(t,e,n,r,i){n=n||0,r=r||!1,i=i||function(f,v,y){return f*Math.pow(2,y)+v};var a=n>>3,s=function(f){return r?~f&255:f},o=255,c=8-n%8;e<c&&(o=255<<8-e&255,c=e),n&&(o=o>>n%8);var u=0;n%8+e>=8&&(u=i(0,s(t[a])&o,c));for(var l=e+n>>3,p=a+1;p<l;p++)u=i(u,s(t[p]),8);var d=(e+n)%8;return d>0&&(u=i(u,s(t[l])>>8-d,d)),u},A1=function(t,e,n){var r=Math.pow(2,n-1)-1,i=fe(t,1),a=fe(t,n,1);if(a===0)return 0;var s=1,o=function(u,l,p){u===0&&(u=1);for(var d=1;d<=p;d++)s/=2,(l&1<<p-d)>0&&(u+=s);return u},c=fe(t,e,n+1,!1,o);return a==Math.pow(2,n+1)-1?c===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,a-r)*c},aP=function(t){return fe(t,1)==1?-1*(fe(t,15,1,!0)+1):fe(t,15,1)},T1=function(t){return fe(t,1)==1?-1*(fe(t,31,1,!0)+1):fe(t,31,1)},sP=function(t){return A1(t,23,8)},oP=function(t){return A1(t,52,11)},cP=function(t){var e=fe(t,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,fe(t,16,16)),r=0,i=[],a=fe(t,16),s=0;s<a;s++)r+=fe(t,16,64+16*s)*n,n/=1e4;var o=Math.pow(10,fe(t,16,48));return(e===0?1:-1)*Math.round(r*o)/o},C1=function(t,e){var n=fe(e,1),r=fe(e,63,1),i=new Date((n===0?1:-1)*r/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(a){this.usec=a},i.getUTCMicroSeconds=function(){return this.usec},i},Pa=function(t){for(var e=fe(t,32),n=fe(t,32,32),r=fe(t,32,64),i=96,a=[],s=0;s<e;s++)a[s]=fe(t,32,i),i+=32,i+=32;var o=function(u){var l=fe(t,32,i);if(i+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=fe(t,l*8,i),i+=l*8,p;if(u==25)return p=t.toString(this.encoding,i>>3,(i+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],d;if(u.length>1){var f=u.shift();for(d=0;d<f;d++)p[d]=c(u,l);u.unshift(f)}else for(d=0;d<u[0];d++)p[d]=o(l);return p};return c(a,r)},uP=function(t){return t.toString("utf8")},lP=function(t){return t===null?null:fe(t,8)>0},pP=function(t){t(20,iP),t(21,aP),t(23,T1),t(26,T1),t(1700,cP),t(700,sP),t(701,oP),t(16,lP),t(1114,C1.bind(null,!1)),t(1184,C1.bind(null,!0)),t(1e3,Pa),t(1007,Pa),t(1016,Pa),t(1008,Pa),t(1009,Pa),t(25,uP)};P1.exports={init:pP}});var j1=g((eF,I1)=>{I1.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var ja=g(Ia=>{var dP=_1(),fP=q1(),mP=ed(),hP=j1();Ia.getTypeParser=vP;Ia.setTypeParser=gP;Ia.arrayParser=mP;Ia.builtins=hP;var qa={text:{},binary:{}};function N1(t){return String(t)}function vP(t,e){return e=e||"text",qa[e]&&qa[e][t]||N1}function gP(t,e,n){typeof e=="function"&&(n=e,e="text"),qa[e][t]=n}dP.init(function(t,e){qa.text[t]=e});fP.init(function(t,e){qa.binary[t]=e})});var Na=g((nF,cd)=>{"use strict";cd.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Kr=ja(),yP=Kr.getTypeParser(20,"text"),xP=Kr.getTypeParser(1016,"text");cd.exports.__defineSetter__("parseInt8",function(t){Kr.setTypeParser(20,"text",t?Kr.getTypeParser(23,"text"):yP),Kr.setTypeParser(1016,"text",t?Kr.getTypeParser(1007,"text"):xP)})});var Wr=g((rF,D1)=>{"use strict";var bP=Na(),O1=require("util"),{isDate:wP}=O1.types||O1;function SP(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function R1(t){let e="{";for(let n=0;n<t.length;n++)if(n>0&&(e=e+","),t[n]===null||typeof t[n]>"u")e=e+"NULL";else if(Array.isArray(t[n]))e=e+R1(t[n]);else if(ArrayBuffer.isView(t[n])){let r=t[n];if(!(r instanceof Buffer)){let i=Buffer.from(r.buffer,r.byteOffset,r.byteLength);i.length===r.byteLength?r=i:r=i.slice(r.byteOffset,r.byteOffset+r.byteLength)}e+="\\\\x"+r.toString("hex")}else e+=SP(Po(t[n]));return e=e+"}",e}var Po=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let n=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return n.length===t.byteLength?n:n.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wP(t)?bP.parseInputDatesAsUTC?kP(t):EP(t):Array.isArray(t)?R1(t):_P(t,e)}return t.toString()};function _P(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Po(t.toPostgres(Po),e)}return JSON.stringify(t)}function EP(t){let e=-t.getTimezoneOffset(),n=t.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);let i=String(n).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(i+="-",e*=-1):i+="+",i+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),r&&(i+=" BC"),i}function kP(t){let e=t.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let r=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return r+="+00:00",n&&(r+=" BC"),r}function TP(t,e,n){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),n&&(t.callback=n),t}var CP=function(t){return'"'+t.replace(/"/g,'""')+'"'},AP=function(t){let e=!1,n="'";if(t==null||typeof t!="string")return"''";for(let r=0;r<t.length;r++){let i=t[r];i==="'"?n+=i+i:i==="\\"?(n+=i+i,e=!0):n+=i}return n+="'",e===!0&&(n=" E"+n),n};D1.exports={prepareValue:function(e){return Po(e)},normalizeQueryConfig:TP,escapeIdentifier:CP,escapeLiteral:AP}});var B1=g((iF,M1)=>{"use strict";var Zr=require("crypto");function ud(t){return Zr.createHash("md5").update(t,"utf-8").digest("hex")}function PP(t,e,n){let r=ud(e+t);return"md5"+ud(Buffer.concat([Buffer.from(r),n]))}function qP(t){return Zr.createHash("sha256").update(t).digest()}function IP(t,e){return t=t.replace(/(\D)-/,"$1"),Zr.createHash(t).update(e).digest()}function jP(t,e){return Zr.createHmac("sha256",t).update(e).digest()}async function NP(t,e,n){return Zr.pbkdf2Sync(t,e,n,32,"sha256")}M1.exports={postgresMd5PasswordHash:PP,randomBytes:Zr.randomBytes,deriveKey:NP,sha256:qP,hashByName:IP,hmacSha256:jP,md5:ud}});var $1=g((aF,z1)=>{var F1=require("crypto");z1.exports={postgresMd5PasswordHash:RP,randomBytes:OP,deriveKey:FP,sha256:DP,hashByName:MP,hmacSha256:BP,md5:ld};var L1=F1.webcrypto||globalThis.crypto,Kn=L1.subtle,pd=new TextEncoder;function OP(t){return L1.getRandomValues(Buffer.alloc(t))}async function ld(t){try{return F1.createHash("md5").update(t,"utf-8").digest("hex")}catch{let n=typeof t=="string"?pd.encode(t):t,r=await Kn.digest("MD5",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function RP(t,e,n){let r=await ld(e+t);return"md5"+await ld(Buffer.concat([Buffer.from(r),n]))}async function DP(t){return await Kn.digest("SHA-256",t)}async function MP(t,e){return await Kn.digest(t,e)}async function BP(t,e){let n=await Kn.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Kn.sign("HMAC",n,pd.encode(e))}async function FP(t,e,n){let r=await Kn.importKey("raw",pd.encode(t),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Kn.deriveBits(i,r,256,["deriveBits"])}});var fd=g((sF,dd)=>{"use strict";var LP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;LP?dd.exports=B1():dd.exports=$1()});var V1=g((oF,Q1)=>{function Wn(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function md(t,e){let n=t[e++];if(n<128)return{length:n,index:e};let r=n&127;if(r>4)throw Wn("bad length",t);n=0;for(let i=0;i<r;i++)n=n<<8|t[e++];return{length:n,index:e}}function U1(t,e){if(t[e++]!==6)throw Wn("non-OID data",t);let{length:n,index:r}=md(t,e);e=r;let i=e+n,a=t[e++],s=(a/40>>0)+"."+a%40;for(;e<i;){let o=0;for(;e<i;){let c=t[e++];if(o=o<<7|c&127,c<128)break}s+="."+o}return{oid:s,index:e}}function Oa(t,e){if(t[e++]!==48)throw Wn("non-sequence data",t);return md(t,e)}function zP(t,e){e===void 0&&(e=0),e=Oa(t,e).index;let{length:n,index:r}=Oa(t,e);e=r+n,e=Oa(t,e).index;let{oid:i,index:a}=U1(t,e);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=Oa(t,e).index,t[e++]!==160)throw Wn("non-tag data",t);e=md(t,e).index,e=Oa(t,e).index;let{oid:s}=U1(t,e);switch(s){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Wn("unknown hash OID "+s,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Wn("Ed448 certificate channel binding is not currently supported by Postgres")}throw Wn("unknown OID "+i,t)}Q1.exports={signatureAlgorithmHashFromCertificate:zP}});var W1=g((cF,K1)=>{"use strict";var un=fd(),{signatureAlgorithmHashFromCertificate:$P}=V1();function UP(t,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let r=n.find(s=>t.includes(s));if(!r)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(r==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=un.randomBytes(18).toString("base64");return{mechanism:r,clientNonce:i,response:(r==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function QP(t,e,n,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=GP(n);if(i.nonce.startsWith(t.clientNonce)){if(i.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+t.clientNonce,s="r="+i.nonce+",s="+i.salt+",i="+i.iteration,o=r?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let I=r.getPeerCertificate().raw,_=$P(I);(_==="MD5"||_==="SHA-1")&&(_="SHA-256");let O=await un.hashByName(_,I);o=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(O)]).toString("base64")}let c="c="+o+",r="+i.nonce,u=a+","+s+","+c,l=Buffer.from(i.salt,"base64"),p=await un.deriveKey(e,l,i.iteration),d=await un.hmacSha256(p,"Client Key"),f=await un.sha256(d),v=await un.hmacSha256(f,u),y=WP(Buffer.from(d),Buffer.from(v)).toString("base64"),b=await un.hmacSha256(p,"Server Key"),E=await un.hmacSha256(b,u);t.message="SASLResponse",t.serverSignature=Buffer.from(E).toString("base64"),t.response=c+",p="+y}function VP(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=KP(e);if(n!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HP(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,n)=>t.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H1(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function G1(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],r=e.substring(2);return[n,r]}))}function GP(t){let e=G1(t),n=e.get("r");if(n){if(!HP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let r=e.get("s");if(r){if(!H1(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(i,10);return{nonce:n,salt:r,iteration:a}}function KP(t){let n=G1(t).get("v");if(n){if(!H1(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function WP(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((n,r)=>t[r]^e[r]))}K1.exports={startSession:UP,continueSession:QP,finalizeSession:VP}});var Io=g((uF,Z1)=>{"use strict";var ZP=ja();function qo(t){this._types=t||ZP,this.text={},this.binary={}}qo.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};qo.prototype.setTypeParser=function(t,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[t]=n};qo.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Z1.exports=qo});var Y1=g((lF,X1)=>{"use strict";function Jr(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let n={},r,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of r.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(r.username),n.password=n.password||decodeURIComponent(r.password),r.protocol=="socket:")return n.host=decodeURI(r.pathname),n.database=r.searchParams.get("db"),n.client_encoding=r.searchParams.get("encoding"),n;let a=i?"":r.hostname;n.host?a&&/^%2f/i.test(a)&&(r.pathname=a+r.pathname):n.host=decodeURIComponent(a),n.port||(n.port=r.port);let s=r.pathname.slice(1)||null;n.database=s?decodeURI(s):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let o=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function JP(t){return Object.entries(t).reduce((n,[r,i])=>(i!=null&&(n[r]=i),n),{})}function J1(t){return Object.entries(t).reduce((n,[r,i])=>{if(r==="ssl"){let a=i;typeof a=="boolean"&&(n[r]=a),typeof a=="object"&&(n[r]=JP(a))}else if(i!=null)if(r==="port"){if(i!==""){let a=parseInt(i,10);if(isNaN(a))throw new Error(`Invalid ${r}: ${i}`);n[r]=a}}else n[r]=i;return n},{})}function XP(t){return J1(Jr(t))}X1.exports=Jr;Jr.parse=Jr;Jr.toClientConfig=J1;Jr.parseIntoClientConfig=XP});var vd=g((pF,nw)=>{"use strict";var YP=require("dns"),tw=Na(),ew=Y1().parse,Ge=function(t,e,n){return n===void 0?n=process.env["PG"+t.toUpperCase()]:n===!1||(n=process.env[n]),e[t]||n||tw[t]},eq=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return tw.ssl},Xr=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},gt=function(t,e,n){let r=e[n];r!=null&&t.push(n+"="+Xr(r))},hd=class{constructor(e){e=typeof e=="string"?ew(e):e||{},e.connectionString&&(e=Object.assign({},e,ew(e.connectionString))),this.user=Ge("user",e),this.database=Ge("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ge("port",e),10),this.host=Ge("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ge("password",e)}),this.binary=Ge("binary",e),this.options=Ge("options",e),this.ssl=typeof e.ssl>"u"?eq():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ge("client_encoding",e),this.replication=Ge("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ge("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ge("fallback_application_name",e,!1),this.statement_timeout=Ge("statement_timeout",e,!1),this.lock_timeout=Ge("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Ge("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ge("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];gt(n,this,"user"),gt(n,this,"password"),gt(n,this,"port"),gt(n,this,"application_name"),gt(n,this,"fallback_application_name"),gt(n,this,"connect_timeout"),gt(n,this,"options");let r=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(gt(n,r,"sslmode"),gt(n,r,"sslca"),gt(n,r,"sslkey"),gt(n,r,"sslcert"),gt(n,r,"sslrootcert"),this.database&&n.push("dbname="+Xr(this.database)),this.replication&&n.push("replication="+Xr(this.replication)),this.host&&n.push("host="+Xr(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Xr(this.client_encoding)),YP.lookup(this.host,function(i,a){return i?e(i,null):(n.push("hostaddr="+Xr(a)),e(null,n.join(" ")))})}};nw.exports=hd});var yd=g((dF,iw)=>{"use strict";var tq=ja(),rw=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gd=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=rw.exec(e.text):n=rw.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let r=0,i=e.length;r<i;r++){let a=e[r];a!==null?n[r]=this._parsers[r](a):n[r]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let r=0,i=e.length;r<i;r++){let a=e[r],s=this.fields[r].name;if(a!==null){let o=this.fields[r].format==="binary"?Buffer.from(a):a;n[s]=this._parsers[r](o)}else n[s]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let r=0;r<e.length;r++){let i=e[r];n[i.name]=null,this._types?this._parsers[r]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[r]=tq.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...n}}};iw.exports=gd});var cw=g((fF,ow)=>{"use strict";var{EventEmitter:nq}=require("events"),aw=yd(),sw=Wr(),xd=class extends nq{constructor(e,n,r){super(),e=sw.normalizeQueryConfig(e,n,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new aw(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new aw(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(r){this._canceledDueToError=r;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:sw.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};ow.exports=xd});var Od=g(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.NoticeMessage=M.DataRowMessage=M.CommandCompleteMessage=M.ReadyForQueryMessage=M.NotificationResponseMessage=M.BackendKeyDataMessage=M.AuthenticationMD5Password=M.ParameterStatusMessage=M.ParameterDescriptionMessage=M.RowDescriptionMessage=M.Field=M.CopyResponse=M.CopyDataMessage=M.DatabaseError=M.copyDone=M.emptyQuery=M.replicationStart=M.portalSuspended=M.noData=M.closeComplete=M.bindComplete=M.parseComplete=void 0;M.parseComplete={name:"parseComplete",length:5};M.bindComplete={name:"bindComplete",length:5};M.closeComplete={name:"closeComplete",length:5};M.noData={name:"noData",length:5};M.portalSuspended={name:"portalSuspended",length:5};M.replicationStart={name:"replicationStart",length:4};M.emptyQuery={name:"emptyQuery",length:4};M.copyDone={name:"copyDone",length:4};var bd=class extends Error{constructor(e,n,r){super(e),this.length=n,this.name=r}};M.DatabaseError=bd;var wd=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};M.CopyDataMessage=wd;var Sd=class{constructor(e,n,r,i){this.length=e,this.name=n,this.binary=r,this.columnTypes=new Array(i)}};M.CopyResponse=Sd;var _d=class{constructor(e,n,r,i,a,s,o){this.name=e,this.tableID=n,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=a,this.dataTypeModifier=s,this.format=o}};M.Field=_d;var Ed=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};M.RowDescriptionMessage=Ed;var kd=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};M.ParameterDescriptionMessage=kd;var Td=class{constructor(e,n,r){this.length=e,this.parameterName=n,this.parameterValue=r,this.name="parameterStatus"}};M.ParameterStatusMessage=Td;var Cd=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};M.AuthenticationMD5Password=Cd;var Ad=class{constructor(e,n,r){this.length=e,this.processID=n,this.secretKey=r,this.name="backendKeyData"}};M.BackendKeyDataMessage=Ad;var Pd=class{constructor(e,n,r,i){this.length=e,this.processId=n,this.channel=r,this.payload=i,this.name="notification"}};M.NotificationResponseMessage=Pd;var qd=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};M.ReadyForQueryMessage=qd;var Id=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};M.CommandCompleteMessage=Id;var jd=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};M.DataRowMessage=jd;var Nd=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};M.NoticeMessage=Nd});var uw=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Writer=void 0;var Rd=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let r=this.buffer,i=r.length+(r.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};jo.Writer=Rd});var pw=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.serialize=void 0;var Dd=uw(),ue=new Dd.Writer,rq=t=>{ue.addInt16(3).addInt16(0);for(let r of Object.keys(t))ue.addCString(r).addCString(t[r]);ue.addCString("client_encoding").addCString("UTF8");let e=ue.addCString("").flush(),n=e.length+4;return new Dd.Writer().addInt32(n).add(e).flush()},iq=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},aq=t=>ue.addCString(t).flush(112),sq=function(t,e){return ue.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ue.flush(112)},oq=function(t){return ue.addString(t).flush(112)},cq=t=>ue.addCString(t).flush(81),lw=[],uq=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=t.types||lw,r=n.length,i=ue.addCString(e).addCString(t.text).addInt16(r);for(let a=0;a<r;a++)i.addInt32(n[a]);return ue.flush(80)},Yr=new Dd.Writer,lq=function(t,e){for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];r==null?(ue.addInt16(0),Yr.addInt32(-1)):r instanceof Buffer?(ue.addInt16(1),Yr.addInt32(r.length),Yr.add(r)):(ue.addInt16(0),Yr.addInt32(Buffer.byteLength(r)),Yr.addString(r))}},pq=(t={})=>{let e=t.portal||"",n=t.statement||"",r=t.binary||!1,i=t.values||lw,a=i.length;return ue.addCString(e).addCString(n),ue.addInt16(a),lq(i,t.valueMapper),ue.addInt16(a),ue.add(Yr.flush()),ue.addInt16(1),ue.addInt16(r?1:0),ue.flush(66)},dq=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fq=t=>{if(!t||!t.portal&&!t.rows)return dq;let e=t.portal||"",n=t.rows||0,r=Buffer.byteLength(e),i=4+r+1+4,a=Buffer.allocUnsafe(1+i);return a[0]=69,a.writeInt32BE(i,1),a.write(e,5,"utf-8"),a[r+5]=0,a.writeUInt32BE(n,a.length-4),a},mq=(t,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(t,8),n.writeInt32BE(e,12),n},Md=(t,e)=>{let r=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+r);return i[0]=t,i.writeInt32BE(r,1),i.write(e,5,"utf-8"),i[r]=0,i},hq=ue.addCString("P").flush(68),vq=ue.addCString("S").flush(68),gq=t=>t.name?Md(68,`${t.type}${t.name||""}`):t.type==="P"?hq:vq,yq=t=>{let e=`${t.type}${t.name||""}`;return Md(67,e)},xq=t=>ue.add(t).flush(100),bq=t=>Md(102,t),No=t=>Buffer.from([t,0,0,0,4]),wq=No(72),Sq=No(83),_q=No(88),Eq=No(99),kq={startup:rq,password:aq,requestSsl:iq,sendSASLInitialResponseMessage:sq,sendSCRAMClientFinalMessage:oq,query:cq,parse:uq,bind:pq,execute:fq,describe:gq,close:yq,flush:()=>wq,sync:()=>Sq,end:()=>_q,copyData:xq,copyDone:()=>Eq,copyFail:bq,cancel:mq};Oo.serialize=kq});var dw=g(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BufferReader=void 0;var Tq=Buffer.allocUnsafe(0),Bd=class{constructor(e=0){this.offset=e,this.buffer=Tq,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};Ro.BufferReader=Bd});var hw=g(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.Parser=void 0;var me=Od(),Cq=dw(),Fd=1,Aq=4,fw=Fd+Aq,mw=Buffer.allocUnsafe(0),Ld=class{constructor(e){if(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0,this.reader=new Cq.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+fw<=r;){let a=this.buffer[i],s=this.buffer.readUInt32BE(i+Fd),o=Fd+s;if(o+i<=r){let c=this.handlePacket(i+fw,a,s,this.buffer);n(c),i+=o}else break}i===r?(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let i;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;i=Buffer.allocUnsafe(a)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,i){switch(n){case 50:return me.bindComplete;case 49:return me.parseComplete;case 51:return me.closeComplete;case 110:return me.noData;case 115:return me.portalSuspended;case 99:return me.copyDone;case 87:return me.replicationStart;case 73:return me.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 116:return this.parseParameterDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:return new me.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.string(1);return new me.ReadyForQueryMessage(n,i)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring();return new me.CommandCompleteMessage(n,i)}parseCopyData(e,n,r){let i=r.slice(e,e+(n-4));return new me.CopyDataMessage(n,i)}parseCopyInMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyInResponse")}parseCopyOutMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyOutResponse")}parseCopyMessage(e,n,r,i){this.reader.setBuffer(e,r);let a=this.reader.byte()!==0,s=this.reader.int16(),o=new me.CopyResponse(n,i,a,s);for(let c=0;c<s;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.cstring(),s=this.reader.cstring();return new me.NotificationResponseMessage(n,i,a,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.RowDescriptionMessage(n,i);for(let s=0;s<i;s++)a.fields[s]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),r=this.reader.int16(),i=this.reader.uint32(),a=this.reader.int16(),s=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new me.Field(e,n,r,i,a,s,o)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.ParameterDescriptionMessage(n,i);for(let s=0;s<i;s++)a.dataTypeIDs[s]=this.reader.int32();return a}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new Array(i);for(let s=0;s<i;s++){let o=this.reader.int32();a[s]=o===-1?null:this.reader.string(o)}return new me.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring(),a=this.reader.cstring();return new me.ParameterStatusMessage(n,i,a)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.int32();return new me.BackendKeyDataMessage(n,i,a)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a={name:"authenticationOk",length:n};switch(i){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let s=this.reader.bytes(4);return new me.AuthenticationMD5Password(n,s)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let s;do s=this.reader.cstring(),s&&a.mechanisms.push(s);while(s)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return a}parseErrorMessage(e,n,r,i){this.reader.setBuffer(e,r);let a={},s=this.reader.string(1);for(;s!=="\0";)a[s]=this.reader.cstring(),s=this.reader.string(1);let o=a.M,c=i==="notice"?new me.NoticeMessage(n,o):new me.DatabaseError(o,n,i);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};Do.Parser=Ld});var zd=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DatabaseError=ln.serialize=ln.parse=void 0;var Pq=Od();Object.defineProperty(ln,"DatabaseError",{enumerable:!0,get:function(){return Pq.DatabaseError}});var qq=pw();Object.defineProperty(ln,"serialize",{enumerable:!0,get:function(){return qq.serialize}});var Iq=hw();function jq(t,e){let n=new Iq.Parser;return t.on("data",r=>n.parse(r,e)),new Promise(r=>t.on("end",()=>r()))}ln.parse=jq});var vw=g($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.default={}});var yw=g((wF,gw)=>{var{getStream:Nq,getSecureStream:Oq}=Bq();gw.exports={getStream:Nq,getSecureStream:Oq};function Rq(){function t(n){let r=require("net");return new r.Socket}function e(n){return require("tls").connect(n)}return{getStream:t,getSecureStream:e}}function Dq(){function t(n){let{CloudflareSocket:r}=vw();return new r(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:t,getSecureStream:e}}function Mq(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function Bq(){return Mq()?Dq():Rq()}});var Qd=g((SF,xw)=>{"use strict";var Fq=require("events").EventEmitter,{parse:Lq,serialize:Ne}=zd(),{getStream:zq,getSecureStream:$q}=yw(),Uq=Ne.flush(),Qq=Ne.sync(),Vq=Ne.end(),Ud=class extends Fq{constructor(e){super(),e=e||{},this.stream=e.stream||zq(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(r){r==="message"&&(n._emitMessage=!0)})}connect(e,n){let r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")});let i=function(a){r._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||r.emit("error",a)};if(this.stream.on("error",i),this.stream.on("close",function(){r.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:r.stream};r.ssl!==!0&&(Object.assign(o,r.ssl),"key"in r.ssl&&(o.key=r.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(o.servername=n);try{r.stream=$q(o)}catch(u){return r.emit("error",u)}r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")})}attachListeners(e){Lq(e,n=>{let r=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(r,n)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(e){this.stream.write(Ne.startup(e))}cancel(e,n){this._send(Ne.cancel(e,n))}password(e){this._send(Ne.password(e))}sendSASLInitialResponseMessage(e,n){this._send(Ne.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(Ne.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(Ne.query(e))}parse(e){this._send(Ne.parse(e))}bind(e){this._send(Ne.bind(e))}execute(e){this._send(Ne.execute(e))}flush(){this.stream.writable&&this.stream.write(Uq)}sync(){this._ending=!0,this._send(Qq)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Vq,()=>{this.stream.end()})}close(e){this._send(Ne.close(e))}describe(e){this._send(Ne.describe(e))}sendCopyFromChunk(e){this._send(Ne.copyData(e))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(e){this._send(Ne.copyFail(e))}};xw.exports=Ud});var _w=g((_F,Sw)=>{"use strict";var{Transform:Hq}=require("stream"),{StringDecoder:Gq}=require("string_decoder"),pn=Symbol("last"),Mo=Symbol("decoder");function Kq(t,e,n){let r;if(this.overflow){if(r=this[Mo].write(t).split(this.matcher),r.length===1)return n();r.shift(),this.overflow=!1}else this[pn]+=this[Mo].write(t),r=this[pn].split(this.matcher);this[pn]=r.pop();for(let i=0;i<r.length;i++)try{ww(this,this.mapper(r[i]))}catch(a){return n(a)}if(this.overflow=this[pn].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Wq(t){if(this[pn]+=this[Mo].end(),this[pn])try{ww(this,this.mapper(this[pn]))}catch(e){return t(e)}t()}function ww(t,e){e!==void 0&&t.push(e)}function bw(t){return t}function Zq(t,e,n){switch(t=t||/\r?\n/,e=e||bw,n=n||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(n=t,t=/\r?\n/);break;case 2:typeof t=="function"?(n=e,e=t,t=/\r?\n/):typeof e=="object"&&(n=e,e=bw)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Kq,n.flush=Wq,n.readableObjectMode=!0;let r=new Hq(n);return r[pn]="",r[Mo]=new Gq("utf8"),r.matcher=t,r.mapper=e,r.maxLength=n.maxLength,r.skipOverflow=n.skipOverflow||!1,r.overflow=!1,r._destroy=function(i,a){this._writableState.errorEmitted=!1,a(i)},r}Sw.exports=Zq});var Tw=g((EF,Ht)=>{"use strict";var Ew=require("path"),Jq=require("stream").Stream,Xq=_w(),kw=require("util"),Yq=5432,Bo=process.platform==="win32",Ra=process.stderr,e9=56,t9=7,n9=61440,r9=32768;function i9(t){return(t&n9)==r9}var ei=["host","port","database","user","password"],Vd=ei.length,a9=ei[Vd-1];function Hd(){var t=Ra instanceof Jq&&Ra.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
pollmetry-app  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app  | /app/dist/index.cjs:63
pollmetry-app  | `}function j5(){return function(){this.error(404)}}function N5(){return function(e){if(this.hasTrailingSlash()){this.error(404);return}var n=el.original(this.req);n.path=null,n.pathname=q5(n.pathname+"/");var r=k5(A5.format(n)),i=I5("Redirecting","Redirecting to "+T5(r));e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(i)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",r),e.end(i)}}});var xb=g((Je,yb)=>{"use strict";var Gs=cg(),O5=require("events").EventEmitter,mb=lg(),hb=Sx(),R5=wu(),D5=_u(),vb=Kx(),gb=pb();Je=yb.exports=M5;function M5(){var t=function(e,n,r){t.handle(e,n,r)};return mb(t,O5.prototype,!1),mb(t,hb,!1),t.request=Object.create(vb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(gb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}Je.application=hb;Je.request=vb;Je.response=gb;Je.Route=R5;Je.Router=D5;Je.json=Gs.json;Je.query=Eu();Je.raw=Gs.raw;Je.static=fb();Je.text=Gs.text;Je.urlencoded=Gs.urlencoded;var B5=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];B5.forEach(function(t){Object.defineProperty(Je,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var nl=g((Yj,bb)=>{"use strict";bb.exports=xb()});var Yp=g(a1=>{"use strict";a1.parse=function(t,e){return new Xp(t,e).parse()};var Xp=class t{constructor(e,n){this.source=e,this.transform=n||T3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,r,i;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!i)this.dimension++,this.dimension>1&&(r=new t(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);else if(n.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(i&&this.newEntry(!0),i=!i):n.value===","&&!i?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function T3(t){return t}});var ed=g((HB,s1)=>{var C3=Yp();s1.exports={create:function(t,e){return{parse:function(){return C3.parse(t,e)}}}}});var u1=g((GB,c1)=>{"use strict";var A3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,P3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,q3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,I3=/^-?infinity$/;c1.exports=function(e){if(I3.test(e))return Number(e.replace("i","I"));var n=A3.exec(e);if(!n)return j3(e)||null;var r=!!n[8],i=parseInt(n[1],10);r&&(i=o1(i));var a=parseInt(n[2],10)-1,s=n[3],o=parseInt(n[4],10),c=parseInt(n[5],10),u=parseInt(n[6],10),l=n[7];l=l?1e3*parseFloat(l):0;var p,d=N3(e);return d!=null?(p=new Date(Date.UTC(i,a,s,o,c,u,l)),td(i)&&p.setUTCFullYear(i),d!==0&&p.setTime(p.getTime()-d)):(p=new Date(i,a,s,o,c,u,l),td(i)&&p.setFullYear(i)),p};function j3(t){var e=P3.exec(t);if(e){var n=parseInt(e[1],10),r=!!e[4];r&&(n=o1(n));var i=parseInt(e[2],10)-1,a=e[3],s=new Date(n,i,a);return td(n)&&s.setFullYear(n),s}}function N3(t){if(t.endsWith("+00"))return 0;var e=q3.exec(t.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var r=n==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*r*1e3}}function o1(t){return-(t-1)}function td(t){return t>=0&&t<100}});var p1=g((KB,l1)=>{l1.exports=R3;var O3=Object.prototype.hasOwnProperty;function R3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)O3.call(n,r)&&(t[r]=n[r])}return t}});var m1=g((WB,f1)=>{"use strict";var D3=p1();f1.exports=Gr;function Gr(t){if(!(this instanceof Gr))return new Gr(t);D3(this,K3(t))}var M3=["seconds","minutes","hours","days","months","years"];Gr.prototype.toPostgres=function(){var t=M3.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var B3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},F3=["years","months","days"],L3=["hours","minutes","seconds"];Gr.prototype.toISOString=Gr.prototype.toISO=function(){var t=F3.map(n,this).join(""),e=L3.map(n,this).join("");return"P"+t+"T"+e;function n(r){var i=this[r]||0;return r==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+B3[r]}};var nd="([+-]?\\d+)",z3=nd+"\\s+years?",$3=nd+"\\s+mons?",U3=nd+"\\s+days?",Q3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",V3=new RegExp([z3,$3,U3,Q3].map(function(t){return"("+t+")?"}).join("\\s*")),d1={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H3=["hours","minutes","seconds","milliseconds"];function G3(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function K3(t){if(!t)return{};var e=V3.exec(t),n=e[8]==="-";return Object.keys(d1).reduce(function(r,i){var a=d1[i],s=e[a];return!s||(s=i==="milliseconds"?G3(s):parseInt(s,10),!s)||(n&&~H3.indexOf(i)&&(s*=-1),r[i]=s),r},{})}});var v1=g((ZB,h1)=>{"use strict";h1.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var n="",r=0;r<e.length;)if(e[r]!=="\\")n+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))n+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&e[r+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";r+=Math.floor(i/2)*2}return new Buffer(n,"binary")}});var _1=g((JB,S1)=>{var Ca=Yp(),Aa=ed(),Co=u1(),y1=m1(),x1=v1();function Ao(t){return function(n){return n===null?n:t(n)}}function b1(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function W3(t){return t?Ca.parse(t,b1):null}function Z3(t){return parseInt(t,10)}function rd(t){return t?Ca.parse(t,Ao(Z3)):null}function J3(t){return t?Ca.parse(t,Ao(function(e){return w1(e).trim()})):null}var X3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=od(n)),n});return e.parse()},id=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},vt=function(t){if(!t)return null;var e=Aa.create(t);return e.parse()},ad=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=Co(n)),n});return e.parse()},Y3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=y1(n)),n});return e.parse()},eP=function(t){return t?Ca.parse(t,Ao(x1)):null},sd=function(t){return parseInt(t,10)},w1=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},g1=function(t){return t?Ca.parse(t,Ao(JSON.parse)):null},od=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},tP=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",n="",r=!1,i=2;i<t.length-1;i++){if(r||(e+=t[i]),t[i]===")"){r=!0;continue}else if(!r)continue;t[i]!==","&&(n+=t[i])}var a=od(e);return a.radius=parseFloat(n),a},nP=function(t){t(20,w1),t(21,sd),t(23,sd),t(26,sd),t(700,parseFloat),t(701,parseFloat),t(16,b1),t(1082,Co),t(1114,Co),t(1184,Co),t(600,od),t(651,vt),t(718,tP),t(1e3,W3),t(1001,eP),t(1005,rd),t(1007,rd),t(1028,rd),t(1016,J3),t(1017,X3),t(1021,id),t(1022,id),t(1231,id),t(1014,vt),t(1015,vt),t(1008,vt),t(1009,vt),t(1040,vt),t(1041,vt),t(1115,ad),t(1182,ad),t(1185,ad),t(1186,y1),t(1187,Y3),t(17,x1),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,g1),t(3807,g1),t(3907,vt),t(2951,vt),t(791,vt),t(1183,vt),t(1270,vt)};S1.exports={init:nP}});var k1=g((XB,E1)=>{"use strict";var nt=1e6;function rP(t){var e=t.readInt32BE(0),n=t.readUInt32BE(4),r="";e<0&&(e=~e+(n===0),n=~n+1>>>0,r="-");var i="",a,s,o,c,u,l;{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}return a=e%nt,s=4294967296*a+n,o=""+s%nt,r+o+i}E1.exports=rP});var q1=g((YB,P1)=>{var iP=k1(),fe=function(t,e,n,r,i){n=n||0,r=r||!1,i=i||function(f,v,y){return f*Math.pow(2,y)+v};var a=n>>3,s=function(f){return r?~f&255:f},o=255,c=8-n%8;e<c&&(o=255<<8-e&255,c=e),n&&(o=o>>n%8);var u=0;n%8+e>=8&&(u=i(0,s(t[a])&o,c));for(var l=e+n>>3,p=a+1;p<l;p++)u=i(u,s(t[p]),8);var d=(e+n)%8;return d>0&&(u=i(u,s(t[l])>>8-d,d)),u},A1=function(t,e,n){var r=Math.pow(2,n-1)-1,i=fe(t,1),a=fe(t,n,1);if(a===0)return 0;var s=1,o=function(u,l,p){u===0&&(u=1);for(var d=1;d<=p;d++)s/=2,(l&1<<p-d)>0&&(u+=s);return u},c=fe(t,e,n+1,!1,o);return a==Math.pow(2,n+1)-1?c===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,a-r)*c},aP=function(t){return fe(t,1)==1?-1*(fe(t,15,1,!0)+1):fe(t,15,1)},T1=function(t){return fe(t,1)==1?-1*(fe(t,31,1,!0)+1):fe(t,31,1)},sP=function(t){return A1(t,23,8)},oP=function(t){return A1(t,52,11)},cP=function(t){var e=fe(t,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,fe(t,16,16)),r=0,i=[],a=fe(t,16),s=0;s<a;s++)r+=fe(t,16,64+16*s)*n,n/=1e4;var o=Math.pow(10,fe(t,16,48));return(e===0?1:-1)*Math.round(r*o)/o},C1=function(t,e){var n=fe(e,1),r=fe(e,63,1),i=new Date((n===0?1:-1)*r/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(a){this.usec=a},i.getUTCMicroSeconds=function(){return this.usec},i},Pa=function(t){for(var e=fe(t,32),n=fe(t,32,32),r=fe(t,32,64),i=96,a=[],s=0;s<e;s++)a[s]=fe(t,32,i),i+=32,i+=32;var o=function(u){var l=fe(t,32,i);if(i+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=fe(t,l*8,i),i+=l*8,p;if(u==25)return p=t.toString(this.encoding,i>>3,(i+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],d;if(u.length>1){var f=u.shift();for(d=0;d<f;d++)p[d]=c(u,l);u.unshift(f)}else for(d=0;d<u[0];d++)p[d]=o(l);return p};return c(a,r)},uP=function(t){return t.toString("utf8")},lP=function(t){return t===null?null:fe(t,8)>0},pP=function(t){t(20,iP),t(21,aP),t(23,T1),t(26,T1),t(1700,cP),t(700,sP),t(701,oP),t(16,lP),t(1114,C1.bind(null,!1)),t(1184,C1.bind(null,!0)),t(1e3,Pa),t(1007,Pa),t(1016,Pa),t(1008,Pa),t(1009,Pa),t(25,uP)};P1.exports={init:pP}});var j1=g((eF,I1)=>{I1.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var ja=g(Ia=>{var dP=_1(),fP=q1(),mP=ed(),hP=j1();Ia.getTypeParser=vP;Ia.setTypeParser=gP;Ia.arrayParser=mP;Ia.builtins=hP;var qa={text:{},binary:{}};function N1(t){return String(t)}function vP(t,e){return e=e||"text",qa[e]&&qa[e][t]||N1}function gP(t,e,n){typeof e=="function"&&(n=e,e="text"),qa[e][t]=n}dP.init(function(t,e){qa.text[t]=e});fP.init(function(t,e){qa.binary[t]=e})});var Na=g((nF,cd)=>{"use strict";cd.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Kr=ja(),yP=Kr.getTypeParser(20,"text"),xP=Kr.getTypeParser(1016,"text");cd.exports.__defineSetter__("parseInt8",function(t){Kr.setTypeParser(20,"text",t?Kr.getTypeParser(23,"text"):yP),Kr.setTypeParser(1016,"text",t?Kr.getTypeParser(1007,"text"):xP)})});var Wr=g((rF,D1)=>{"use strict";var bP=Na(),O1=require("util"),{isDate:wP}=O1.types||O1;function SP(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function R1(t){let e="{";for(let n=0;n<t.length;n++)if(n>0&&(e=e+","),t[n]===null||typeof t[n]>"u")e=e+"NULL";else if(Array.isArray(t[n]))e=e+R1(t[n]);else if(ArrayBuffer.isView(t[n])){let r=t[n];if(!(r instanceof Buffer)){let i=Buffer.from(r.buffer,r.byteOffset,r.byteLength);i.length===r.byteLength?r=i:r=i.slice(r.byteOffset,r.byteOffset+r.byteLength)}e+="\\\\x"+r.toString("hex")}else e+=SP(Po(t[n]));return e=e+"}",e}var Po=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let n=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return n.length===t.byteLength?n:n.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wP(t)?bP.parseInputDatesAsUTC?kP(t):EP(t):Array.isArray(t)?R1(t):_P(t,e)}return t.toString()};function _P(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Po(t.toPostgres(Po),e)}return JSON.stringify(t)}function EP(t){let e=-t.getTimezoneOffset(),n=t.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);let i=String(n).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(i+="-",e*=-1):i+="+",i+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),r&&(i+=" BC"),i}function kP(t){let e=t.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let r=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return r+="+00:00",n&&(r+=" BC"),r}function TP(t,e,n){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),n&&(t.callback=n),t}var CP=function(t){return'"'+t.replace(/"/g,'""')+'"'},AP=function(t){let e=!1,n="'";if(t==null||typeof t!="string")return"''";for(let r=0;r<t.length;r++){let i=t[r];i==="'"?n+=i+i:i==="\\"?(n+=i+i,e=!0):n+=i}return n+="'",e===!0&&(n=" E"+n),n};D1.exports={prepareValue:function(e){return Po(e)},normalizeQueryConfig:TP,escapeIdentifier:CP,escapeLiteral:AP}});var B1=g((iF,M1)=>{"use strict";var Zr=require("crypto");function ud(t){return Zr.createHash("md5").update(t,"utf-8").digest("hex")}function PP(t,e,n){let r=ud(e+t);return"md5"+ud(Buffer.concat([Buffer.from(r),n]))}function qP(t){return Zr.createHash("sha256").update(t).digest()}function IP(t,e){return t=t.replace(/(\D)-/,"$1"),Zr.createHash(t).update(e).digest()}function jP(t,e){return Zr.createHmac("sha256",t).update(e).digest()}async function NP(t,e,n){return Zr.pbkdf2Sync(t,e,n,32,"sha256")}M1.exports={postgresMd5PasswordHash:PP,randomBytes:Zr.randomBytes,deriveKey:NP,sha256:qP,hashByName:IP,hmacSha256:jP,md5:ud}});var $1=g((aF,z1)=>{var F1=require("crypto");z1.exports={postgresMd5PasswordHash:RP,randomBytes:OP,deriveKey:FP,sha256:DP,hashByName:MP,hmacSha256:BP,md5:ld};var L1=F1.webcrypto||globalThis.crypto,Kn=L1.subtle,pd=new TextEncoder;function OP(t){return L1.getRandomValues(Buffer.alloc(t))}async function ld(t){try{return F1.createHash("md5").update(t,"utf-8").digest("hex")}catch{let n=typeof t=="string"?pd.encode(t):t,r=await Kn.digest("MD5",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function RP(t,e,n){let r=await ld(e+t);return"md5"+await ld(Buffer.concat([Buffer.from(r),n]))}async function DP(t){return await Kn.digest("SHA-256",t)}async function MP(t,e){return await Kn.digest(t,e)}async function BP(t,e){let n=await Kn.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Kn.sign("HMAC",n,pd.encode(e))}async function FP(t,e,n){let r=await Kn.importKey("raw",pd.encode(t),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Kn.deriveBits(i,r,256,["deriveBits"])}});var fd=g((sF,dd)=>{"use strict";var LP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;LP?dd.exports=B1():dd.exports=$1()});var V1=g((oF,Q1)=>{function Wn(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function md(t,e){let n=t[e++];if(n<128)return{length:n,index:e};let r=n&127;if(r>4)throw Wn("bad length",t);n=0;for(let i=0;i<r;i++)n=n<<8|t[e++];return{length:n,index:e}}function U1(t,e){if(t[e++]!==6)throw Wn("non-OID data",t);let{length:n,index:r}=md(t,e);e=r;let i=e+n,a=t[e++],s=(a/40>>0)+"."+a%40;for(;e<i;){let o=0;for(;e<i;){let c=t[e++];if(o=o<<7|c&127,c<128)break}s+="."+o}return{oid:s,index:e}}function Oa(t,e){if(t[e++]!==48)throw Wn("non-sequence data",t);return md(t,e)}function zP(t,e){e===void 0&&(e=0),e=Oa(t,e).index;let{length:n,index:r}=Oa(t,e);e=r+n,e=Oa(t,e).index;let{oid:i,index:a}=U1(t,e);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=Oa(t,e).index,t[e++]!==160)throw Wn("non-tag data",t);e=md(t,e).index,e=Oa(t,e).index;let{oid:s}=U1(t,e);switch(s){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Wn("unknown hash OID "+s,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Wn("Ed448 certificate channel binding is not currently supported by Postgres")}throw Wn("unknown OID "+i,t)}Q1.exports={signatureAlgorithmHashFromCertificate:zP}});var W1=g((cF,K1)=>{"use strict";var un=fd(),{signatureAlgorithmHashFromCertificate:$P}=V1();function UP(t,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let r=n.find(s=>t.includes(s));if(!r)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(r==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=un.randomBytes(18).toString("base64");return{mechanism:r,clientNonce:i,response:(r==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function QP(t,e,n,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=GP(n);if(i.nonce.startsWith(t.clientNonce)){if(i.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+t.clientNonce,s="r="+i.nonce+",s="+i.salt+",i="+i.iteration,o=r?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let I=r.getPeerCertificate().raw,_=$P(I);(_==="MD5"||_==="SHA-1")&&(_="SHA-256");let O=await un.hashByName(_,I);o=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(O)]).toString("base64")}let c="c="+o+",r="+i.nonce,u=a+","+s+","+c,l=Buffer.from(i.salt,"base64"),p=await un.deriveKey(e,l,i.iteration),d=await un.hmacSha256(p,"Client Key"),f=await un.sha256(d),v=await un.hmacSha256(f,u),y=WP(Buffer.from(d),Buffer.from(v)).toString("base64"),b=await un.hmacSha256(p,"Server Key"),E=await un.hmacSha256(b,u);t.message="SASLResponse",t.serverSignature=Buffer.from(E).toString("base64"),t.response=c+",p="+y}function VP(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=KP(e);if(n!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HP(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,n)=>t.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H1(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function G1(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],r=e.substring(2);return[n,r]}))}function GP(t){let e=G1(t),n=e.get("r");if(n){if(!HP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let r=e.get("s");if(r){if(!H1(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(i,10);return{nonce:n,salt:r,iteration:a}}function KP(t){let n=G1(t).get("v");if(n){if(!H1(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function WP(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((n,r)=>t[r]^e[r]))}K1.exports={startSession:UP,continueSession:QP,finalizeSession:VP}});var Io=g((uF,Z1)=>{"use strict";var ZP=ja();function qo(t){this._types=t||ZP,this.text={},this.binary={}}qo.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};qo.prototype.setTypeParser=function(t,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[t]=n};qo.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Z1.exports=qo});var Y1=g((lF,X1)=>{"use strict";function Jr(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let n={},r,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of r.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(r.username),n.password=n.password||decodeURIComponent(r.password),r.protocol=="socket:")return n.host=decodeURI(r.pathname),n.database=r.searchParams.get("db"),n.client_encoding=r.searchParams.get("encoding"),n;let a=i?"":r.hostname;n.host?a&&/^%2f/i.test(a)&&(r.pathname=a+r.pathname):n.host=decodeURIComponent(a),n.port||(n.port=r.port);let s=r.pathname.slice(1)||null;n.database=s?decodeURI(s):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let o=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function JP(t){return Object.entries(t).reduce((n,[r,i])=>(i!=null&&(n[r]=i),n),{})}function J1(t){return Object.entries(t).reduce((n,[r,i])=>{if(r==="ssl"){let a=i;typeof a=="boolean"&&(n[r]=a),typeof a=="object"&&(n[r]=JP(a))}else if(i!=null)if(r==="port"){if(i!==""){let a=parseInt(i,10);if(isNaN(a))throw new Error(`Invalid ${r}: ${i}`);n[r]=a}}else n[r]=i;return n},{})}function XP(t){return J1(Jr(t))}X1.exports=Jr;Jr.parse=Jr;Jr.toClientConfig=J1;Jr.parseIntoClientConfig=XP});var vd=g((pF,nw)=>{"use strict";var YP=require("dns"),tw=Na(),ew=Y1().parse,Ge=function(t,e,n){return n===void 0?n=process.env["PG"+t.toUpperCase()]:n===!1||(n=process.env[n]),e[t]||n||tw[t]},eq=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return tw.ssl},Xr=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},gt=function(t,e,n){let r=e[n];r!=null&&t.push(n+"="+Xr(r))},hd=class{constructor(e){e=typeof e=="string"?ew(e):e||{},e.connectionString&&(e=Object.assign({},e,ew(e.connectionString))),this.user=Ge("user",e),this.database=Ge("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ge("port",e),10),this.host=Ge("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ge("password",e)}),this.binary=Ge("binary",e),this.options=Ge("options",e),this.ssl=typeof e.ssl>"u"?eq():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ge("client_encoding",e),this.replication=Ge("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ge("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ge("fallback_application_name",e,!1),this.statement_timeout=Ge("statement_timeout",e,!1),this.lock_timeout=Ge("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Ge("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ge("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];gt(n,this,"user"),gt(n,this,"password"),gt(n,this,"port"),gt(n,this,"application_name"),gt(n,this,"fallback_application_name"),gt(n,this,"connect_timeout"),gt(n,this,"options");let r=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(gt(n,r,"sslmode"),gt(n,r,"sslca"),gt(n,r,"sslkey"),gt(n,r,"sslcert"),gt(n,r,"sslrootcert"),this.database&&n.push("dbname="+Xr(this.database)),this.replication&&n.push("replication="+Xr(this.replication)),this.host&&n.push("host="+Xr(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Xr(this.client_encoding)),YP.lookup(this.host,function(i,a){return i?e(i,null):(n.push("hostaddr="+Xr(a)),e(null,n.join(" ")))})}};nw.exports=hd});var yd=g((dF,iw)=>{"use strict";var tq=ja(),rw=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gd=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=rw.exec(e.text):n=rw.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let r=0,i=e.length;r<i;r++){let a=e[r];a!==null?n[r]=this._parsers[r](a):n[r]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let r=0,i=e.length;r<i;r++){let a=e[r],s=this.fields[r].name;if(a!==null){let o=this.fields[r].format==="binary"?Buffer.from(a):a;n[s]=this._parsers[r](o)}else n[s]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let r=0;r<e.length;r++){let i=e[r];n[i.name]=null,this._types?this._parsers[r]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[r]=tq.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...n}}};iw.exports=gd});var cw=g((fF,ow)=>{"use strict";var{EventEmitter:nq}=require("events"),aw=yd(),sw=Wr(),xd=class extends nq{constructor(e,n,r){super(),e=sw.normalizeQueryConfig(e,n,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new aw(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new aw(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(r){this._canceledDueToError=r;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:sw.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};ow.exports=xd});var Od=g(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.NoticeMessage=M.DataRowMessage=M.CommandCompleteMessage=M.ReadyForQueryMessage=M.NotificationResponseMessage=M.BackendKeyDataMessage=M.AuthenticationMD5Password=M.ParameterStatusMessage=M.ParameterDescriptionMessage=M.RowDescriptionMessage=M.Field=M.CopyResponse=M.CopyDataMessage=M.DatabaseError=M.copyDone=M.emptyQuery=M.replicationStart=M.portalSuspended=M.noData=M.closeComplete=M.bindComplete=M.parseComplete=void 0;M.parseComplete={name:"parseComplete",length:5};M.bindComplete={name:"bindComplete",length:5};M.closeComplete={name:"closeComplete",length:5};M.noData={name:"noData",length:5};M.portalSuspended={name:"portalSuspended",length:5};M.replicationStart={name:"replicationStart",length:4};M.emptyQuery={name:"emptyQuery",length:4};M.copyDone={name:"copyDone",length:4};var bd=class extends Error{constructor(e,n,r){super(e),this.length=n,this.name=r}};M.DatabaseError=bd;var wd=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};M.CopyDataMessage=wd;var Sd=class{constructor(e,n,r,i){this.length=e,this.name=n,this.binary=r,this.columnTypes=new Array(i)}};M.CopyResponse=Sd;var _d=class{constructor(e,n,r,i,a,s,o){this.name=e,this.tableID=n,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=a,this.dataTypeModifier=s,this.format=o}};M.Field=_d;var Ed=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};M.RowDescriptionMessage=Ed;var kd=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};M.ParameterDescriptionMessage=kd;var Td=class{constructor(e,n,r){this.length=e,this.parameterName=n,this.parameterValue=r,this.name="parameterStatus"}};M.ParameterStatusMessage=Td;var Cd=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};M.AuthenticationMD5Password=Cd;var Ad=class{constructor(e,n,r){this.length=e,this.processID=n,this.secretKey=r,this.name="backendKeyData"}};M.BackendKeyDataMessage=Ad;var Pd=class{constructor(e,n,r,i){this.length=e,this.processId=n,this.channel=r,this.payload=i,this.name="notification"}};M.NotificationResponseMessage=Pd;var qd=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};M.ReadyForQueryMessage=qd;var Id=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};M.CommandCompleteMessage=Id;var jd=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};M.DataRowMessage=jd;var Nd=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};M.NoticeMessage=Nd});var uw=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Writer=void 0;var Rd=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let r=this.buffer,i=r.length+(r.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};jo.Writer=Rd});var pw=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.serialize=void 0;var Dd=uw(),ue=new Dd.Writer,rq=t=>{ue.addInt16(3).addInt16(0);for(let r of Object.keys(t))ue.addCString(r).addCString(t[r]);ue.addCString("client_encoding").addCString("UTF8");let e=ue.addCString("").flush(),n=e.length+4;return new Dd.Writer().addInt32(n).add(e).flush()},iq=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},aq=t=>ue.addCString(t).flush(112),sq=function(t,e){return ue.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ue.flush(112)},oq=function(t){return ue.addString(t).flush(112)},cq=t=>ue.addCString(t).flush(81),lw=[],uq=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=t.types||lw,r=n.length,i=ue.addCString(e).addCString(t.text).addInt16(r);for(let a=0;a<r;a++)i.addInt32(n[a]);return ue.flush(80)},Yr=new Dd.Writer,lq=function(t,e){for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];r==null?(ue.addInt16(0),Yr.addInt32(-1)):r instanceof Buffer?(ue.addInt16(1),Yr.addInt32(r.length),Yr.add(r)):(ue.addInt16(0),Yr.addInt32(Buffer.byteLength(r)),Yr.addString(r))}},pq=(t={})=>{let e=t.portal||"",n=t.statement||"",r=t.binary||!1,i=t.values||lw,a=i.length;return ue.addCString(e).addCString(n),ue.addInt16(a),lq(i,t.valueMapper),ue.addInt16(a),ue.add(Yr.flush()),ue.addInt16(1),ue.addInt16(r?1:0),ue.flush(66)},dq=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fq=t=>{if(!t||!t.portal&&!t.rows)return dq;let e=t.portal||"",n=t.rows||0,r=Buffer.byteLength(e),i=4+r+1+4,a=Buffer.allocUnsafe(1+i);return a[0]=69,a.writeInt32BE(i,1),a.write(e,5,"utf-8"),a[r+5]=0,a.writeUInt32BE(n,a.length-4),a},mq=(t,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(t,8),n.writeInt32BE(e,12),n},Md=(t,e)=>{let r=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+r);return i[0]=t,i.writeInt32BE(r,1),i.write(e,5,"utf-8"),i[r]=0,i},hq=ue.addCString("P").flush(68),vq=ue.addCString("S").flush(68),gq=t=>t.name?Md(68,`${t.type}${t.name||""}`):t.type==="P"?hq:vq,yq=t=>{let e=`${t.type}${t.name||""}`;return Md(67,e)},xq=t=>ue.add(t).flush(100),bq=t=>Md(102,t),No=t=>Buffer.from([t,0,0,0,4]),wq=No(72),Sq=No(83),_q=No(88),Eq=No(99),kq={startup:rq,password:aq,requestSsl:iq,sendSASLInitialResponseMessage:sq,sendSCRAMClientFinalMessage:oq,query:cq,parse:uq,bind:pq,execute:fq,describe:gq,close:yq,flush:()=>wq,sync:()=>Sq,end:()=>_q,copyData:xq,copyDone:()=>Eq,copyFail:bq,cancel:mq};Oo.serialize=kq});var dw=g(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BufferReader=void 0;var Tq=Buffer.allocUnsafe(0),Bd=class{constructor(e=0){this.offset=e,this.buffer=Tq,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};Ro.BufferReader=Bd});var hw=g(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.Parser=void 0;var me=Od(),Cq=dw(),Fd=1,Aq=4,fw=Fd+Aq,mw=Buffer.allocUnsafe(0),Ld=class{constructor(e){if(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0,this.reader=new Cq.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+fw<=r;){let a=this.buffer[i],s=this.buffer.readUInt32BE(i+Fd),o=Fd+s;if(o+i<=r){let c=this.handlePacket(i+fw,a,s,this.buffer);n(c),i+=o}else break}i===r?(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let i;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;i=Buffer.allocUnsafe(a)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,i){switch(n){case 50:return me.bindComplete;case 49:return me.parseComplete;case 51:return me.closeComplete;case 110:return me.noData;case 115:return me.portalSuspended;case 99:return me.copyDone;case 87:return me.replicationStart;case 73:return me.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 116:return this.parseParameterDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:return new me.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.string(1);return new me.ReadyForQueryMessage(n,i)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring();return new me.CommandCompleteMessage(n,i)}parseCopyData(e,n,r){let i=r.slice(e,e+(n-4));return new me.CopyDataMessage(n,i)}parseCopyInMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyInResponse")}parseCopyOutMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyOutResponse")}parseCopyMessage(e,n,r,i){this.reader.setBuffer(e,r);let a=this.reader.byte()!==0,s=this.reader.int16(),o=new me.CopyResponse(n,i,a,s);for(let c=0;c<s;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.cstring(),s=this.reader.cstring();return new me.NotificationResponseMessage(n,i,a,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.RowDescriptionMessage(n,i);for(let s=0;s<i;s++)a.fields[s]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),r=this.reader.int16(),i=this.reader.uint32(),a=this.reader.int16(),s=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new me.Field(e,n,r,i,a,s,o)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.ParameterDescriptionMessage(n,i);for(let s=0;s<i;s++)a.dataTypeIDs[s]=this.reader.int32();return a}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new Array(i);for(let s=0;s<i;s++){let o=this.reader.int32();a[s]=o===-1?null:this.reader.string(o)}return new me.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring(),a=this.reader.cstring();return new me.ParameterStatusMessage(n,i,a)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.int32();return new me.BackendKeyDataMessage(n,i,a)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a={name:"authenticationOk",length:n};switch(i){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let s=this.reader.bytes(4);return new me.AuthenticationMD5Password(n,s)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let s;do s=this.reader.cstring(),s&&a.mechanisms.push(s);while(s)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return a}parseErrorMessage(e,n,r,i){this.reader.setBuffer(e,r);let a={},s=this.reader.string(1);for(;s!=="\0";)a[s]=this.reader.cstring(),s=this.reader.string(1);let o=a.M,c=i==="notice"?new me.NoticeMessage(n,o):new me.DatabaseError(o,n,i);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};Do.Parser=Ld});var zd=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DatabaseError=ln.serialize=ln.parse=void 0;var Pq=Od();Object.defineProperty(ln,"DatabaseError",{enumerable:!0,get:function(){return Pq.DatabaseError}});var qq=pw();Object.defineProperty(ln,"serialize",{enumerable:!0,get:function(){return qq.serialize}});var Iq=hw();function jq(t,e){let n=new Iq.Parser;return t.on("data",r=>n.parse(r,e)),new Promise(r=>t.on("end",()=>r()))}ln.parse=jq});var vw=g($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.default={}});var yw=g((wF,gw)=>{var{getStream:Nq,getSecureStream:Oq}=Bq();gw.exports={getStream:Nq,getSecureStream:Oq};function Rq(){function t(n){let r=require("net");return new r.Socket}function e(n){return require("tls").connect(n)}return{getStream:t,getSecureStream:e}}function Dq(){function t(n){let{CloudflareSocket:r}=vw();return new r(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:t,getSecureStream:e}}function Mq(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function Bq(){return Mq()?Dq():Rq()}});var Qd=g((SF,xw)=>{"use strict";var Fq=require("events").EventEmitter,{parse:Lq,serialize:Ne}=zd(),{getStream:zq,getSecureStream:$q}=yw(),Uq=Ne.flush(),Qq=Ne.sync(),Vq=Ne.end(),Ud=class extends Fq{constructor(e){super(),e=e||{},this.stream=e.stream||zq(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(r){r==="message"&&(n._emitMessage=!0)})}connect(e,n){let r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")});let i=function(a){r._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||r.emit("error",a)};if(this.stream.on("error",i),this.stream.on("close",function(){r.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:r.stream};r.ssl!==!0&&(Object.assign(o,r.ssl),"key"in r.ssl&&(o.key=r.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(o.servername=n);try{r.stream=$q(o)}catch(u){return r.emit("error",u)}r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")})}attachListeners(e){Lq(e,n=>{let r=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(r,n)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(e){this.stream.write(Ne.startup(e))}cancel(e,n){this._send(Ne.cancel(e,n))}password(e){this._send(Ne.password(e))}sendSASLInitialResponseMessage(e,n){this._send(Ne.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(Ne.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(Ne.query(e))}parse(e){this._send(Ne.parse(e))}bind(e){this._send(Ne.bind(e))}execute(e){this._send(Ne.execute(e))}flush(){this.stream.writable&&this.stream.write(Uq)}sync(){this._ending=!0,this._send(Qq)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Vq,()=>{this.stream.end()})}close(e){this._send(Ne.close(e))}describe(e){this._send(Ne.describe(e))}sendCopyFromChunk(e){this._send(Ne.copyData(e))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(e){this._send(Ne.copyFail(e))}};xw.exports=Ud});var _w=g((_F,Sw)=>{"use strict";var{Transform:Hq}=require("stream"),{StringDecoder:Gq}=require("string_decoder"),pn=Symbol("last"),Mo=Symbol("decoder");function Kq(t,e,n){let r;if(this.overflow){if(r=this[Mo].write(t).split(this.matcher),r.length===1)return n();r.shift(),this.overflow=!1}else this[pn]+=this[Mo].write(t),r=this[pn].split(this.matcher);this[pn]=r.pop();for(let i=0;i<r.length;i++)try{ww(this,this.mapper(r[i]))}catch(a){return n(a)}if(this.overflow=this[pn].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Wq(t){if(this[pn]+=this[Mo].end(),this[pn])try{ww(this,this.mapper(this[pn]))}catch(e){return t(e)}t()}function ww(t,e){e!==void 0&&t.push(e)}function bw(t){return t}function Zq(t,e,n){switch(t=t||/\r?\n/,e=e||bw,n=n||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(n=t,t=/\r?\n/);break;case 2:typeof t=="function"?(n=e,e=t,t=/\r?\n/):typeof e=="object"&&(n=e,e=bw)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Kq,n.flush=Wq,n.readableObjectMode=!0;let r=new Hq(n);return r[pn]="",r[Mo]=new Gq("utf8"),r.matcher=t,r.mapper=e,r.maxLength=n.maxLength,r.skipOverflow=n.skipOverflow||!1,r.overflow=!1,r._destroy=function(i,a){this._writableState.errorEmitted=!1,a(i)},r}Sw.exports=Zq});var Tw=g((EF,Ht)=>{"use strict";var Ew=require("path"),Jq=require("stream").Stream,Xq=_w(),kw=require("util"),Yq=5432,Bo=process.platform==="win32",Ra=process.stderr,e9=56,t9=7,n9=61440,r9=32768;function i9(t){return(t&n9)==r9}var ei=["host","port","database","user","password"],Vd=ei.length,a9=ei[Vd-1];function Hd(){var t=Ra instanceof Jq&&Ra.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
pollmetry-app  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app  | /app/dist/index.cjs:63
pollmetry-app  | `}function j5(){return function(){this.error(404)}}function N5(){return function(e){if(this.hasTrailingSlash()){this.error(404);return}var n=el.original(this.req);n.path=null,n.pathname=q5(n.pathname+"/");var r=k5(A5.format(n)),i=I5("Redirecting","Redirecting to "+T5(r));e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(i)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",r),e.end(i)}}});var xb=g((Je,yb)=>{"use strict";var Gs=cg(),O5=require("events").EventEmitter,mb=lg(),hb=Sx(),R5=wu(),D5=_u(),vb=Kx(),gb=pb();Je=yb.exports=M5;function M5(){var t=function(e,n,r){t.handle(e,n,r)};return mb(t,O5.prototype,!1),mb(t,hb,!1),t.request=Object.create(vb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(gb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}Je.application=hb;Je.request=vb;Je.response=gb;Je.Route=R5;Je.Router=D5;Je.json=Gs.json;Je.query=Eu();Je.raw=Gs.raw;Je.static=fb();Je.text=Gs.text;Je.urlencoded=Gs.urlencoded;var B5=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];B5.forEach(function(t){Object.defineProperty(Je,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var nl=g((Yj,bb)=>{"use strict";bb.exports=xb()});var Yp=g(a1=>{"use strict";a1.parse=function(t,e){return new Xp(t,e).parse()};var Xp=class t{constructor(e,n){this.source=e,this.transform=n||T3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,r,i;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!i)this.dimension++,this.dimension>1&&(r=new t(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);else if(n.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(i&&this.newEntry(!0),i=!i):n.value===","&&!i?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function T3(t){return t}});var ed=g((HB,s1)=>{var C3=Yp();s1.exports={create:function(t,e){return{parse:function(){return C3.parse(t,e)}}}}});var u1=g((GB,c1)=>{"use strict";var A3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,P3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,q3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,I3=/^-?infinity$/;c1.exports=function(e){if(I3.test(e))return Number(e.replace("i","I"));var n=A3.exec(e);if(!n)return j3(e)||null;var r=!!n[8],i=parseInt(n[1],10);r&&(i=o1(i));var a=parseInt(n[2],10)-1,s=n[3],o=parseInt(n[4],10),c=parseInt(n[5],10),u=parseInt(n[6],10),l=n[7];l=l?1e3*parseFloat(l):0;var p,d=N3(e);return d!=null?(p=new Date(Date.UTC(i,a,s,o,c,u,l)),td(i)&&p.setUTCFullYear(i),d!==0&&p.setTime(p.getTime()-d)):(p=new Date(i,a,s,o,c,u,l),td(i)&&p.setFullYear(i)),p};function j3(t){var e=P3.exec(t);if(e){var n=parseInt(e[1],10),r=!!e[4];r&&(n=o1(n));var i=parseInt(e[2],10)-1,a=e[3],s=new Date(n,i,a);return td(n)&&s.setFullYear(n),s}}function N3(t){if(t.endsWith("+00"))return 0;var e=q3.exec(t.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var r=n==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*r*1e3}}function o1(t){return-(t-1)}function td(t){return t>=0&&t<100}});var p1=g((KB,l1)=>{l1.exports=R3;var O3=Object.prototype.hasOwnProperty;function R3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)O3.call(n,r)&&(t[r]=n[r])}return t}});var m1=g((WB,f1)=>{"use strict";var D3=p1();f1.exports=Gr;function Gr(t){if(!(this instanceof Gr))return new Gr(t);D3(this,K3(t))}var M3=["seconds","minutes","hours","days","months","years"];Gr.prototype.toPostgres=function(){var t=M3.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var B3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},F3=["years","months","days"],L3=["hours","minutes","seconds"];Gr.prototype.toISOString=Gr.prototype.toISO=function(){var t=F3.map(n,this).join(""),e=L3.map(n,this).join("");return"P"+t+"T"+e;function n(r){var i=this[r]||0;return r==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+B3[r]}};var nd="([+-]?\\d+)",z3=nd+"\\s+years?",$3=nd+"\\s+mons?",U3=nd+"\\s+days?",Q3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",V3=new RegExp([z3,$3,U3,Q3].map(function(t){return"("+t+")?"}).join("\\s*")),d1={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H3=["hours","minutes","seconds","milliseconds"];function G3(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function K3(t){if(!t)return{};var e=V3.exec(t),n=e[8]==="-";return Object.keys(d1).reduce(function(r,i){var a=d1[i],s=e[a];return!s||(s=i==="milliseconds"?G3(s):parseInt(s,10),!s)||(n&&~H3.indexOf(i)&&(s*=-1),r[i]=s),r},{})}});var v1=g((ZB,h1)=>{"use strict";h1.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var n="",r=0;r<e.length;)if(e[r]!=="\\")n+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))n+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&e[r+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";r+=Math.floor(i/2)*2}return new Buffer(n,"binary")}});var _1=g((JB,S1)=>{var Ca=Yp(),Aa=ed(),Co=u1(),y1=m1(),x1=v1();function Ao(t){return function(n){return n===null?n:t(n)}}function b1(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function W3(t){return t?Ca.parse(t,b1):null}function Z3(t){return parseInt(t,10)}function rd(t){return t?Ca.parse(t,Ao(Z3)):null}function J3(t){return t?Ca.parse(t,Ao(function(e){return w1(e).trim()})):null}var X3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=od(n)),n});return e.parse()},id=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},vt=function(t){if(!t)return null;var e=Aa.create(t);return e.parse()},ad=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=Co(n)),n});return e.parse()},Y3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=y1(n)),n});return e.parse()},eP=function(t){return t?Ca.parse(t,Ao(x1)):null},sd=function(t){return parseInt(t,10)},w1=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},g1=function(t){return t?Ca.parse(t,Ao(JSON.parse)):null},od=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},tP=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",n="",r=!1,i=2;i<t.length-1;i++){if(r||(e+=t[i]),t[i]===")"){r=!0;continue}else if(!r)continue;t[i]!==","&&(n+=t[i])}var a=od(e);return a.radius=parseFloat(n),a},nP=function(t){t(20,w1),t(21,sd),t(23,sd),t(26,sd),t(700,parseFloat),t(701,parseFloat),t(16,b1),t(1082,Co),t(1114,Co),t(1184,Co),t(600,od),t(651,vt),t(718,tP),t(1e3,W3),t(1001,eP),t(1005,rd),t(1007,rd),t(1028,rd),t(1016,J3),t(1017,X3),t(1021,id),t(1022,id),t(1231,id),t(1014,vt),t(1015,vt),t(1008,vt),t(1009,vt),t(1040,vt),t(1041,vt),t(1115,ad),t(1182,ad),t(1185,ad),t(1186,y1),t(1187,Y3),t(17,x1),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,g1),t(3807,g1),t(3907,vt),t(2951,vt),t(791,vt),t(1183,vt),t(1270,vt)};S1.exports={init:nP}});var k1=g((XB,E1)=>{"use strict";var nt=1e6;function rP(t){var e=t.readInt32BE(0),n=t.readUInt32BE(4),r="";e<0&&(e=~e+(n===0),n=~n+1>>>0,r="-");var i="",a,s,o,c,u,l;{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}return a=e%nt,s=4294967296*a+n,o=""+s%nt,r+o+i}E1.exports=rP});var q1=g((YB,P1)=>{var iP=k1(),fe=function(t,e,n,r,i){n=n||0,r=r||!1,i=i||function(f,v,y){return f*Math.pow(2,y)+v};var a=n>>3,s=function(f){return r?~f&255:f},o=255,c=8-n%8;e<c&&(o=255<<8-e&255,c=e),n&&(o=o>>n%8);var u=0;n%8+e>=8&&(u=i(0,s(t[a])&o,c));for(var l=e+n>>3,p=a+1;p<l;p++)u=i(u,s(t[p]),8);var d=(e+n)%8;return d>0&&(u=i(u,s(t[l])>>8-d,d)),u},A1=function(t,e,n){var r=Math.pow(2,n-1)-1,i=fe(t,1),a=fe(t,n,1);if(a===0)return 0;var s=1,o=function(u,l,p){u===0&&(u=1);for(var d=1;d<=p;d++)s/=2,(l&1<<p-d)>0&&(u+=s);return u},c=fe(t,e,n+1,!1,o);return a==Math.pow(2,n+1)-1?c===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,a-r)*c},aP=function(t){return fe(t,1)==1?-1*(fe(t,15,1,!0)+1):fe(t,15,1)},T1=function(t){return fe(t,1)==1?-1*(fe(t,31,1,!0)+1):fe(t,31,1)},sP=function(t){return A1(t,23,8)},oP=function(t){return A1(t,52,11)},cP=function(t){var e=fe(t,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,fe(t,16,16)),r=0,i=[],a=fe(t,16),s=0;s<a;s++)r+=fe(t,16,64+16*s)*n,n/=1e4;var o=Math.pow(10,fe(t,16,48));return(e===0?1:-1)*Math.round(r*o)/o},C1=function(t,e){var n=fe(e,1),r=fe(e,63,1),i=new Date((n===0?1:-1)*r/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(a){this.usec=a},i.getUTCMicroSeconds=function(){return this.usec},i},Pa=function(t){for(var e=fe(t,32),n=fe(t,32,32),r=fe(t,32,64),i=96,a=[],s=0;s<e;s++)a[s]=fe(t,32,i),i+=32,i+=32;var o=function(u){var l=fe(t,32,i);if(i+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=fe(t,l*8,i),i+=l*8,p;if(u==25)return p=t.toString(this.encoding,i>>3,(i+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],d;if(u.length>1){var f=u.shift();for(d=0;d<f;d++)p[d]=c(u,l);u.unshift(f)}else for(d=0;d<u[0];d++)p[d]=o(l);return p};return c(a,r)},uP=function(t){return t.toString("utf8")},lP=function(t){return t===null?null:fe(t,8)>0},pP=function(t){t(20,iP),t(21,aP),t(23,T1),t(26,T1),t(1700,cP),t(700,sP),t(701,oP),t(16,lP),t(1114,C1.bind(null,!1)),t(1184,C1.bind(null,!0)),t(1e3,Pa),t(1007,Pa),t(1016,Pa),t(1008,Pa),t(1009,Pa),t(25,uP)};P1.exports={init:pP}});var j1=g((eF,I1)=>{I1.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var ja=g(Ia=>{var dP=_1(),fP=q1(),mP=ed(),hP=j1();Ia.getTypeParser=vP;Ia.setTypeParser=gP;Ia.arrayParser=mP;Ia.builtins=hP;var qa={text:{},binary:{}};function N1(t){return String(t)}function vP(t,e){return e=e||"text",qa[e]&&qa[e][t]||N1}function gP(t,e,n){typeof e=="function"&&(n=e,e="text"),qa[e][t]=n}dP.init(function(t,e){qa.text[t]=e});fP.init(function(t,e){qa.binary[t]=e})});var Na=g((nF,cd)=>{"use strict";cd.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Kr=ja(),yP=Kr.getTypeParser(20,"text"),xP=Kr.getTypeParser(1016,"text");cd.exports.__defineSetter__("parseInt8",function(t){Kr.setTypeParser(20,"text",t?Kr.getTypeParser(23,"text"):yP),Kr.setTypeParser(1016,"text",t?Kr.getTypeParser(1007,"text"):xP)})});var Wr=g((rF,D1)=>{"use strict";var bP=Na(),O1=require("util"),{isDate:wP}=O1.types||O1;function SP(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function R1(t){let e="{";for(let n=0;n<t.length;n++)if(n>0&&(e=e+","),t[n]===null||typeof t[n]>"u")e=e+"NULL";else if(Array.isArray(t[n]))e=e+R1(t[n]);else if(ArrayBuffer.isView(t[n])){let r=t[n];if(!(r instanceof Buffer)){let i=Buffer.from(r.buffer,r.byteOffset,r.byteLength);i.length===r.byteLength?r=i:r=i.slice(r.byteOffset,r.byteOffset+r.byteLength)}e+="\\\\x"+r.toString("hex")}else e+=SP(Po(t[n]));return e=e+"}",e}var Po=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let n=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return n.length===t.byteLength?n:n.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wP(t)?bP.parseInputDatesAsUTC?kP(t):EP(t):Array.isArray(t)?R1(t):_P(t,e)}return t.toString()};function _P(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Po(t.toPostgres(Po),e)}return JSON.stringify(t)}function EP(t){let e=-t.getTimezoneOffset(),n=t.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);let i=String(n).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(i+="-",e*=-1):i+="+",i+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),r&&(i+=" BC"),i}function kP(t){let e=t.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let r=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return r+="+00:00",n&&(r+=" BC"),r}function TP(t,e,n){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),n&&(t.callback=n),t}var CP=function(t){return'"'+t.replace(/"/g,'""')+'"'},AP=function(t){let e=!1,n="'";if(t==null||typeof t!="string")return"''";for(let r=0;r<t.length;r++){let i=t[r];i==="'"?n+=i+i:i==="\\"?(n+=i+i,e=!0):n+=i}return n+="'",e===!0&&(n=" E"+n),n};D1.exports={prepareValue:function(e){return Po(e)},normalizeQueryConfig:TP,escapeIdentifier:CP,escapeLiteral:AP}});var B1=g((iF,M1)=>{"use strict";var Zr=require("crypto");function ud(t){return Zr.createHash("md5").update(t,"utf-8").digest("hex")}function PP(t,e,n){let r=ud(e+t);return"md5"+ud(Buffer.concat([Buffer.from(r),n]))}function qP(t){return Zr.createHash("sha256").update(t).digest()}function IP(t,e){return t=t.replace(/(\D)-/,"$1"),Zr.createHash(t).update(e).digest()}function jP(t,e){return Zr.createHmac("sha256",t).update(e).digest()}async function NP(t,e,n){return Zr.pbkdf2Sync(t,e,n,32,"sha256")}M1.exports={postgresMd5PasswordHash:PP,randomBytes:Zr.randomBytes,deriveKey:NP,sha256:qP,hashByName:IP,hmacSha256:jP,md5:ud}});var $1=g((aF,z1)=>{var F1=require("crypto");z1.exports={postgresMd5PasswordHash:RP,randomBytes:OP,deriveKey:FP,sha256:DP,hashByName:MP,hmacSha256:BP,md5:ld};var L1=F1.webcrypto||globalThis.crypto,Kn=L1.subtle,pd=new TextEncoder;function OP(t){return L1.getRandomValues(Buffer.alloc(t))}async function ld(t){try{return F1.createHash("md5").update(t,"utf-8").digest("hex")}catch{let n=typeof t=="string"?pd.encode(t):t,r=await Kn.digest("MD5",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function RP(t,e,n){let r=await ld(e+t);return"md5"+await ld(Buffer.concat([Buffer.from(r),n]))}async function DP(t){return await Kn.digest("SHA-256",t)}async function MP(t,e){return await Kn.digest(t,e)}async function BP(t,e){let n=await Kn.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Kn.sign("HMAC",n,pd.encode(e))}async function FP(t,e,n){let r=await Kn.importKey("raw",pd.encode(t),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Kn.deriveBits(i,r,256,["deriveBits"])}});var fd=g((sF,dd)=>{"use strict";var LP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;LP?dd.exports=B1():dd.exports=$1()});var V1=g((oF,Q1)=>{function Wn(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function md(t,e){let n=t[e++];if(n<128)return{length:n,index:e};let r=n&127;if(r>4)throw Wn("bad length",t);n=0;for(let i=0;i<r;i++)n=n<<8|t[e++];return{length:n,index:e}}function U1(t,e){if(t[e++]!==6)throw Wn("non-OID data",t);let{length:n,index:r}=md(t,e);e=r;let i=e+n,a=t[e++],s=(a/40>>0)+"."+a%40;for(;e<i;){let o=0;for(;e<i;){let c=t[e++];if(o=o<<7|c&127,c<128)break}s+="."+o}return{oid:s,index:e}}function Oa(t,e){if(t[e++]!==48)throw Wn("non-sequence data",t);return md(t,e)}function zP(t,e){e===void 0&&(e=0),e=Oa(t,e).index;let{length:n,index:r}=Oa(t,e);e=r+n,e=Oa(t,e).index;let{oid:i,index:a}=U1(t,e);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=Oa(t,e).index,t[e++]!==160)throw Wn("non-tag data",t);e=md(t,e).index,e=Oa(t,e).index;let{oid:s}=U1(t,e);switch(s){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Wn("unknown hash OID "+s,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Wn("Ed448 certificate channel binding is not currently supported by Postgres")}throw Wn("unknown OID "+i,t)}Q1.exports={signatureAlgorithmHashFromCertificate:zP}});var W1=g((cF,K1)=>{"use strict";var un=fd(),{signatureAlgorithmHashFromCertificate:$P}=V1();function UP(t,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let r=n.find(s=>t.includes(s));if(!r)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(r==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=un.randomBytes(18).toString("base64");return{mechanism:r,clientNonce:i,response:(r==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function QP(t,e,n,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=GP(n);if(i.nonce.startsWith(t.clientNonce)){if(i.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+t.clientNonce,s="r="+i.nonce+",s="+i.salt+",i="+i.iteration,o=r?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let I=r.getPeerCertificate().raw,_=$P(I);(_==="MD5"||_==="SHA-1")&&(_="SHA-256");let O=await un.hashByName(_,I);o=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(O)]).toString("base64")}let c="c="+o+",r="+i.nonce,u=a+","+s+","+c,l=Buffer.from(i.salt,"base64"),p=await un.deriveKey(e,l,i.iteration),d=await un.hmacSha256(p,"Client Key"),f=await un.sha256(d),v=await un.hmacSha256(f,u),y=WP(Buffer.from(d),Buffer.from(v)).toString("base64"),b=await un.hmacSha256(p,"Server Key"),E=await un.hmacSha256(b,u);t.message="SASLResponse",t.serverSignature=Buffer.from(E).toString("base64"),t.response=c+",p="+y}function VP(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=KP(e);if(n!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HP(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,n)=>t.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H1(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function G1(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],r=e.substring(2);return[n,r]}))}function GP(t){let e=G1(t),n=e.get("r");if(n){if(!HP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let r=e.get("s");if(r){if(!H1(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(i,10);return{nonce:n,salt:r,iteration:a}}function KP(t){let n=G1(t).get("v");if(n){if(!H1(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function WP(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((n,r)=>t[r]^e[r]))}K1.exports={startSession:UP,continueSession:QP,finalizeSession:VP}});var Io=g((uF,Z1)=>{"use strict";var ZP=ja();function qo(t){this._types=t||ZP,this.text={},this.binary={}}qo.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};qo.prototype.setTypeParser=function(t,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[t]=n};qo.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Z1.exports=qo});var Y1=g((lF,X1)=>{"use strict";function Jr(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let n={},r,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of r.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(r.username),n.password=n.password||decodeURIComponent(r.password),r.protocol=="socket:")return n.host=decodeURI(r.pathname),n.database=r.searchParams.get("db"),n.client_encoding=r.searchParams.get("encoding"),n;let a=i?"":r.hostname;n.host?a&&/^%2f/i.test(a)&&(r.pathname=a+r.pathname):n.host=decodeURIComponent(a),n.port||(n.port=r.port);let s=r.pathname.slice(1)||null;n.database=s?decodeURI(s):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let o=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function JP(t){return Object.entries(t).reduce((n,[r,i])=>(i!=null&&(n[r]=i),n),{})}function J1(t){return Object.entries(t).reduce((n,[r,i])=>{if(r==="ssl"){let a=i;typeof a=="boolean"&&(n[r]=a),typeof a=="object"&&(n[r]=JP(a))}else if(i!=null)if(r==="port"){if(i!==""){let a=parseInt(i,10);if(isNaN(a))throw new Error(`Invalid ${r}: ${i}`);n[r]=a}}else n[r]=i;return n},{})}function XP(t){return J1(Jr(t))}X1.exports=Jr;Jr.parse=Jr;Jr.toClientConfig=J1;Jr.parseIntoClientConfig=XP});var vd=g((pF,nw)=>{"use strict";var YP=require("dns"),tw=Na(),ew=Y1().parse,Ge=function(t,e,n){return n===void 0?n=process.env["PG"+t.toUpperCase()]:n===!1||(n=process.env[n]),e[t]||n||tw[t]},eq=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return tw.ssl},Xr=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},gt=function(t,e,n){let r=e[n];r!=null&&t.push(n+"="+Xr(r))},hd=class{constructor(e){e=typeof e=="string"?ew(e):e||{},e.connectionString&&(e=Object.assign({},e,ew(e.connectionString))),this.user=Ge("user",e),this.database=Ge("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ge("port",e),10),this.host=Ge("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ge("password",e)}),this.binary=Ge("binary",e),this.options=Ge("options",e),this.ssl=typeof e.ssl>"u"?eq():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ge("client_encoding",e),this.replication=Ge("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ge("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ge("fallback_application_name",e,!1),this.statement_timeout=Ge("statement_timeout",e,!1),this.lock_timeout=Ge("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Ge("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ge("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];gt(n,this,"user"),gt(n,this,"password"),gt(n,this,"port"),gt(n,this,"application_name"),gt(n,this,"fallback_application_name"),gt(n,this,"connect_timeout"),gt(n,this,"options");let r=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(gt(n,r,"sslmode"),gt(n,r,"sslca"),gt(n,r,"sslkey"),gt(n,r,"sslcert"),gt(n,r,"sslrootcert"),this.database&&n.push("dbname="+Xr(this.database)),this.replication&&n.push("replication="+Xr(this.replication)),this.host&&n.push("host="+Xr(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Xr(this.client_encoding)),YP.lookup(this.host,function(i,a){return i?e(i,null):(n.push("hostaddr="+Xr(a)),e(null,n.join(" ")))})}};nw.exports=hd});var yd=g((dF,iw)=>{"use strict";var tq=ja(),rw=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gd=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=rw.exec(e.text):n=rw.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let r=0,i=e.length;r<i;r++){let a=e[r];a!==null?n[r]=this._parsers[r](a):n[r]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let r=0,i=e.length;r<i;r++){let a=e[r],s=this.fields[r].name;if(a!==null){let o=this.fields[r].format==="binary"?Buffer.from(a):a;n[s]=this._parsers[r](o)}else n[s]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let r=0;r<e.length;r++){let i=e[r];n[i.name]=null,this._types?this._parsers[r]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[r]=tq.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...n}}};iw.exports=gd});var cw=g((fF,ow)=>{"use strict";var{EventEmitter:nq}=require("events"),aw=yd(),sw=Wr(),xd=class extends nq{constructor(e,n,r){super(),e=sw.normalizeQueryConfig(e,n,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new aw(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new aw(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(r){this._canceledDueToError=r;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:sw.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};ow.exports=xd});var Od=g(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.NoticeMessage=M.DataRowMessage=M.CommandCompleteMessage=M.ReadyForQueryMessage=M.NotificationResponseMessage=M.BackendKeyDataMessage=M.AuthenticationMD5Password=M.ParameterStatusMessage=M.ParameterDescriptionMessage=M.RowDescriptionMessage=M.Field=M.CopyResponse=M.CopyDataMessage=M.DatabaseError=M.copyDone=M.emptyQuery=M.replicationStart=M.portalSuspended=M.noData=M.closeComplete=M.bindComplete=M.parseComplete=void 0;M.parseComplete={name:"parseComplete",length:5};M.bindComplete={name:"bindComplete",length:5};M.closeComplete={name:"closeComplete",length:5};M.noData={name:"noData",length:5};M.portalSuspended={name:"portalSuspended",length:5};M.replicationStart={name:"replicationStart",length:4};M.emptyQuery={name:"emptyQuery",length:4};M.copyDone={name:"copyDone",length:4};var bd=class extends Error{constructor(e,n,r){super(e),this.length=n,this.name=r}};M.DatabaseError=bd;var wd=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};M.CopyDataMessage=wd;var Sd=class{constructor(e,n,r,i){this.length=e,this.name=n,this.binary=r,this.columnTypes=new Array(i)}};M.CopyResponse=Sd;var _d=class{constructor(e,n,r,i,a,s,o){this.name=e,this.tableID=n,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=a,this.dataTypeModifier=s,this.format=o}};M.Field=_d;var Ed=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};M.RowDescriptionMessage=Ed;var kd=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};M.ParameterDescriptionMessage=kd;var Td=class{constructor(e,n,r){this.length=e,this.parameterName=n,this.parameterValue=r,this.name="parameterStatus"}};M.ParameterStatusMessage=Td;var Cd=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};M.AuthenticationMD5Password=Cd;var Ad=class{constructor(e,n,r){this.length=e,this.processID=n,this.secretKey=r,this.name="backendKeyData"}};M.BackendKeyDataMessage=Ad;var Pd=class{constructor(e,n,r,i){this.length=e,this.processId=n,this.channel=r,this.payload=i,this.name="notification"}};M.NotificationResponseMessage=Pd;var qd=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};M.ReadyForQueryMessage=qd;var Id=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};M.CommandCompleteMessage=Id;var jd=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};M.DataRowMessage=jd;var Nd=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};M.NoticeMessage=Nd});var uw=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Writer=void 0;var Rd=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let r=this.buffer,i=r.length+(r.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};jo.Writer=Rd});var pw=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.serialize=void 0;var Dd=uw(),ue=new Dd.Writer,rq=t=>{ue.addInt16(3).addInt16(0);for(let r of Object.keys(t))ue.addCString(r).addCString(t[r]);ue.addCString("client_encoding").addCString("UTF8");let e=ue.addCString("").flush(),n=e.length+4;return new Dd.Writer().addInt32(n).add(e).flush()},iq=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},aq=t=>ue.addCString(t).flush(112),sq=function(t,e){return ue.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ue.flush(112)},oq=function(t){return ue.addString(t).flush(112)},cq=t=>ue.addCString(t).flush(81),lw=[],uq=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=t.types||lw,r=n.length,i=ue.addCString(e).addCString(t.text).addInt16(r);for(let a=0;a<r;a++)i.addInt32(n[a]);return ue.flush(80)},Yr=new Dd.Writer,lq=function(t,e){for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];r==null?(ue.addInt16(0),Yr.addInt32(-1)):r instanceof Buffer?(ue.addInt16(1),Yr.addInt32(r.length),Yr.add(r)):(ue.addInt16(0),Yr.addInt32(Buffer.byteLength(r)),Yr.addString(r))}},pq=(t={})=>{let e=t.portal||"",n=t.statement||"",r=t.binary||!1,i=t.values||lw,a=i.length;return ue.addCString(e).addCString(n),ue.addInt16(a),lq(i,t.valueMapper),ue.addInt16(a),ue.add(Yr.flush()),ue.addInt16(1),ue.addInt16(r?1:0),ue.flush(66)},dq=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fq=t=>{if(!t||!t.portal&&!t.rows)return dq;let e=t.portal||"",n=t.rows||0,r=Buffer.byteLength(e),i=4+r+1+4,a=Buffer.allocUnsafe(1+i);return a[0]=69,a.writeInt32BE(i,1),a.write(e,5,"utf-8"),a[r+5]=0,a.writeUInt32BE(n,a.length-4),a},mq=(t,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(t,8),n.writeInt32BE(e,12),n},Md=(t,e)=>{let r=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+r);return i[0]=t,i.writeInt32BE(r,1),i.write(e,5,"utf-8"),i[r]=0,i},hq=ue.addCString("P").flush(68),vq=ue.addCString("S").flush(68),gq=t=>t.name?Md(68,`${t.type}${t.name||""}`):t.type==="P"?hq:vq,yq=t=>{let e=`${t.type}${t.name||""}`;return Md(67,e)},xq=t=>ue.add(t).flush(100),bq=t=>Md(102,t),No=t=>Buffer.from([t,0,0,0,4]),wq=No(72),Sq=No(83),_q=No(88),Eq=No(99),kq={startup:rq,password:aq,requestSsl:iq,sendSASLInitialResponseMessage:sq,sendSCRAMClientFinalMessage:oq,query:cq,parse:uq,bind:pq,execute:fq,describe:gq,close:yq,flush:()=>wq,sync:()=>Sq,end:()=>_q,copyData:xq,copyDone:()=>Eq,copyFail:bq,cancel:mq};Oo.serialize=kq});var dw=g(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BufferReader=void 0;var Tq=Buffer.allocUnsafe(0),Bd=class{constructor(e=0){this.offset=e,this.buffer=Tq,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};Ro.BufferReader=Bd});var hw=g(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.Parser=void 0;var me=Od(),Cq=dw(),Fd=1,Aq=4,fw=Fd+Aq,mw=Buffer.allocUnsafe(0),Ld=class{constructor(e){if(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0,this.reader=new Cq.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+fw<=r;){let a=this.buffer[i],s=this.buffer.readUInt32BE(i+Fd),o=Fd+s;if(o+i<=r){let c=this.handlePacket(i+fw,a,s,this.buffer);n(c),i+=o}else break}i===r?(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let i;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;i=Buffer.allocUnsafe(a)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,i){switch(n){case 50:return me.bindComplete;case 49:return me.parseComplete;case 51:return me.closeComplete;case 110:return me.noData;case 115:return me.portalSuspended;case 99:return me.copyDone;case 87:return me.replicationStart;case 73:return me.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 116:return this.parseParameterDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:return new me.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.string(1);return new me.ReadyForQueryMessage(n,i)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring();return new me.CommandCompleteMessage(n,i)}parseCopyData(e,n,r){let i=r.slice(e,e+(n-4));return new me.CopyDataMessage(n,i)}parseCopyInMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyInResponse")}parseCopyOutMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyOutResponse")}parseCopyMessage(e,n,r,i){this.reader.setBuffer(e,r);let a=this.reader.byte()!==0,s=this.reader.int16(),o=new me.CopyResponse(n,i,a,s);for(let c=0;c<s;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.cstring(),s=this.reader.cstring();return new me.NotificationResponseMessage(n,i,a,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.RowDescriptionMessage(n,i);for(let s=0;s<i;s++)a.fields[s]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),r=this.reader.int16(),i=this.reader.uint32(),a=this.reader.int16(),s=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new me.Field(e,n,r,i,a,s,o)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.ParameterDescriptionMessage(n,i);for(let s=0;s<i;s++)a.dataTypeIDs[s]=this.reader.int32();return a}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new Array(i);for(let s=0;s<i;s++){let o=this.reader.int32();a[s]=o===-1?null:this.reader.string(o)}return new me.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring(),a=this.reader.cstring();return new me.ParameterStatusMessage(n,i,a)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.int32();return new me.BackendKeyDataMessage(n,i,a)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a={name:"authenticationOk",length:n};switch(i){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let s=this.reader.bytes(4);return new me.AuthenticationMD5Password(n,s)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let s;do s=this.reader.cstring(),s&&a.mechanisms.push(s);while(s)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return a}parseErrorMessage(e,n,r,i){this.reader.setBuffer(e,r);let a={},s=this.reader.string(1);for(;s!=="\0";)a[s]=this.reader.cstring(),s=this.reader.string(1);let o=a.M,c=i==="notice"?new me.NoticeMessage(n,o):new me.DatabaseError(o,n,i);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};Do.Parser=Ld});var zd=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DatabaseError=ln.serialize=ln.parse=void 0;var Pq=Od();Object.defineProperty(ln,"DatabaseError",{enumerable:!0,get:function(){return Pq.DatabaseError}});var qq=pw();Object.defineProperty(ln,"serialize",{enumerable:!0,get:function(){return qq.serialize}});var Iq=hw();function jq(t,e){let n=new Iq.Parser;return t.on("data",r=>n.parse(r,e)),new Promise(r=>t.on("end",()=>r()))}ln.parse=jq});var vw=g($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.default={}});var yw=g((wF,gw)=>{var{getStream:Nq,getSecureStream:Oq}=Bq();gw.exports={getStream:Nq,getSecureStream:Oq};function Rq(){function t(n){let r=require("net");return new r.Socket}function e(n){return require("tls").connect(n)}return{getStream:t,getSecureStream:e}}function Dq(){function t(n){let{CloudflareSocket:r}=vw();return new r(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:t,getSecureStream:e}}function Mq(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function Bq(){return Mq()?Dq():Rq()}});var Qd=g((SF,xw)=>{"use strict";var Fq=require("events").EventEmitter,{parse:Lq,serialize:Ne}=zd(),{getStream:zq,getSecureStream:$q}=yw(),Uq=Ne.flush(),Qq=Ne.sync(),Vq=Ne.end(),Ud=class extends Fq{constructor(e){super(),e=e||{},this.stream=e.stream||zq(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(r){r==="message"&&(n._emitMessage=!0)})}connect(e,n){let r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")});let i=function(a){r._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||r.emit("error",a)};if(this.stream.on("error",i),this.stream.on("close",function(){r.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:r.stream};r.ssl!==!0&&(Object.assign(o,r.ssl),"key"in r.ssl&&(o.key=r.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(o.servername=n);try{r.stream=$q(o)}catch(u){return r.emit("error",u)}r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")})}attachListeners(e){Lq(e,n=>{let r=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(r,n)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(e){this.stream.write(Ne.startup(e))}cancel(e,n){this._send(Ne.cancel(e,n))}password(e){this._send(Ne.password(e))}sendSASLInitialResponseMessage(e,n){this._send(Ne.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(Ne.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(Ne.query(e))}parse(e){this._send(Ne.parse(e))}bind(e){this._send(Ne.bind(e))}execute(e){this._send(Ne.execute(e))}flush(){this.stream.writable&&this.stream.write(Uq)}sync(){this._ending=!0,this._send(Qq)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Vq,()=>{this.stream.end()})}close(e){this._send(Ne.close(e))}describe(e){this._send(Ne.describe(e))}sendCopyFromChunk(e){this._send(Ne.copyData(e))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(e){this._send(Ne.copyFail(e))}};xw.exports=Ud});var _w=g((_F,Sw)=>{"use strict";var{Transform:Hq}=require("stream"),{StringDecoder:Gq}=require("string_decoder"),pn=Symbol("last"),Mo=Symbol("decoder");function Kq(t,e,n){let r;if(this.overflow){if(r=this[Mo].write(t).split(this.matcher),r.length===1)return n();r.shift(),this.overflow=!1}else this[pn]+=this[Mo].write(t),r=this[pn].split(this.matcher);this[pn]=r.pop();for(let i=0;i<r.length;i++)try{ww(this,this.mapper(r[i]))}catch(a){return n(a)}if(this.overflow=this[pn].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Wq(t){if(this[pn]+=this[Mo].end(),this[pn])try{ww(this,this.mapper(this[pn]))}catch(e){return t(e)}t()}function ww(t,e){e!==void 0&&t.push(e)}function bw(t){return t}function Zq(t,e,n){switch(t=t||/\r?\n/,e=e||bw,n=n||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(n=t,t=/\r?\n/);break;case 2:typeof t=="function"?(n=e,e=t,t=/\r?\n/):typeof e=="object"&&(n=e,e=bw)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Kq,n.flush=Wq,n.readableObjectMode=!0;let r=new Hq(n);return r[pn]="",r[Mo]=new Gq("utf8"),r.matcher=t,r.mapper=e,r.maxLength=n.maxLength,r.skipOverflow=n.skipOverflow||!1,r.overflow=!1,r._destroy=function(i,a){this._writableState.errorEmitted=!1,a(i)},r}Sw.exports=Zq});var Tw=g((EF,Ht)=>{"use strict";var Ew=require("path"),Jq=require("stream").Stream,Xq=_w(),kw=require("util"),Yq=5432,Bo=process.platform==="win32",Ra=process.stderr,e9=56,t9=7,n9=61440,r9=32768;function i9(t){return(t&n9)==r9}var ei=["host","port","database","user","password"],Vd=ei.length,a9=ei[Vd-1];function Hd(){var t=Ra instanceof Jq&&Ra.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
pollmetry-app  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app  | /app/dist/index.cjs:63
pollmetry-app  | `}function j5(){return function(){this.error(404)}}function N5(){return function(e){if(this.hasTrailingSlash()){this.error(404);return}var n=el.original(this.req);n.path=null,n.pathname=q5(n.pathname+"/");var r=k5(A5.format(n)),i=I5("Redirecting","Redirecting to "+T5(r));e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(i)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",r),e.end(i)}}});var xb=g((Je,yb)=>{"use strict";var Gs=cg(),O5=require("events").EventEmitter,mb=lg(),hb=Sx(),R5=wu(),D5=_u(),vb=Kx(),gb=pb();Je=yb.exports=M5;function M5(){var t=function(e,n,r){t.handle(e,n,r)};return mb(t,O5.prototype,!1),mb(t,hb,!1),t.request=Object.create(vb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(gb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}Je.application=hb;Je.request=vb;Je.response=gb;Je.Route=R5;Je.Router=D5;Je.json=Gs.json;Je.query=Eu();Je.raw=Gs.raw;Je.static=fb();Je.text=Gs.text;Je.urlencoded=Gs.urlencoded;var B5=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];B5.forEach(function(t){Object.defineProperty(Je,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var nl=g((Yj,bb)=>{"use strict";bb.exports=xb()});var Yp=g(a1=>{"use strict";a1.parse=function(t,e){return new Xp(t,e).parse()};var Xp=class t{constructor(e,n){this.source=e,this.transform=n||T3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,r,i;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!i)this.dimension++,this.dimension>1&&(r=new t(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);else if(n.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(i&&this.newEntry(!0),i=!i):n.value===","&&!i?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function T3(t){return t}});var ed=g((HB,s1)=>{var C3=Yp();s1.exports={create:function(t,e){return{parse:function(){return C3.parse(t,e)}}}}});var u1=g((GB,c1)=>{"use strict";var A3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,P3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,q3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,I3=/^-?infinity$/;c1.exports=function(e){if(I3.test(e))return Number(e.replace("i","I"));var n=A3.exec(e);if(!n)return j3(e)||null;var r=!!n[8],i=parseInt(n[1],10);r&&(i=o1(i));var a=parseInt(n[2],10)-1,s=n[3],o=parseInt(n[4],10),c=parseInt(n[5],10),u=parseInt(n[6],10),l=n[7];l=l?1e3*parseFloat(l):0;var p,d=N3(e);return d!=null?(p=new Date(Date.UTC(i,a,s,o,c,u,l)),td(i)&&p.setUTCFullYear(i),d!==0&&p.setTime(p.getTime()-d)):(p=new Date(i,a,s,o,c,u,l),td(i)&&p.setFullYear(i)),p};function j3(t){var e=P3.exec(t);if(e){var n=parseInt(e[1],10),r=!!e[4];r&&(n=o1(n));var i=parseInt(e[2],10)-1,a=e[3],s=new Date(n,i,a);return td(n)&&s.setFullYear(n),s}}function N3(t){if(t.endsWith("+00"))return 0;var e=q3.exec(t.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var r=n==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*r*1e3}}function o1(t){return-(t-1)}function td(t){return t>=0&&t<100}});var p1=g((KB,l1)=>{l1.exports=R3;var O3=Object.prototype.hasOwnProperty;function R3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)O3.call(n,r)&&(t[r]=n[r])}return t}});var m1=g((WB,f1)=>{"use strict";var D3=p1();f1.exports=Gr;function Gr(t){if(!(this instanceof Gr))return new Gr(t);D3(this,K3(t))}var M3=["seconds","minutes","hours","days","months","years"];Gr.prototype.toPostgres=function(){var t=M3.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var B3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},F3=["years","months","days"],L3=["hours","minutes","seconds"];Gr.prototype.toISOString=Gr.prototype.toISO=function(){var t=F3.map(n,this).join(""),e=L3.map(n,this).join("");return"P"+t+"T"+e;function n(r){var i=this[r]||0;return r==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+B3[r]}};var nd="([+-]?\\d+)",z3=nd+"\\s+years?",$3=nd+"\\s+mons?",U3=nd+"\\s+days?",Q3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",V3=new RegExp([z3,$3,U3,Q3].map(function(t){return"("+t+")?"}).join("\\s*")),d1={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H3=["hours","minutes","seconds","milliseconds"];function G3(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function K3(t){if(!t)return{};var e=V3.exec(t),n=e[8]==="-";return Object.keys(d1).reduce(function(r,i){var a=d1[i],s=e[a];return!s||(s=i==="milliseconds"?G3(s):parseInt(s,10),!s)||(n&&~H3.indexOf(i)&&(s*=-1),r[i]=s),r},{})}});var v1=g((ZB,h1)=>{"use strict";h1.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var n="",r=0;r<e.length;)if(e[r]!=="\\")n+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))n+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&e[r+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";r+=Math.floor(i/2)*2}return new Buffer(n,"binary")}});var _1=g((JB,S1)=>{var Ca=Yp(),Aa=ed(),Co=u1(),y1=m1(),x1=v1();function Ao(t){return function(n){return n===null?n:t(n)}}function b1(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function W3(t){return t?Ca.parse(t,b1):null}function Z3(t){return parseInt(t,10)}function rd(t){return t?Ca.parse(t,Ao(Z3)):null}function J3(t){return t?Ca.parse(t,Ao(function(e){return w1(e).trim()})):null}var X3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=od(n)),n});return e.parse()},id=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},vt=function(t){if(!t)return null;var e=Aa.create(t);return e.parse()},ad=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=Co(n)),n});return e.parse()},Y3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=y1(n)),n});return e.parse()},eP=function(t){return t?Ca.parse(t,Ao(x1)):null},sd=function(t){return parseInt(t,10)},w1=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},g1=function(t){return t?Ca.parse(t,Ao(JSON.parse)):null},od=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},tP=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",n="",r=!1,i=2;i<t.length-1;i++){if(r||(e+=t[i]),t[i]===")"){r=!0;continue}else if(!r)continue;t[i]!==","&&(n+=t[i])}var a=od(e);return a.radius=parseFloat(n),a},nP=function(t){t(20,w1),t(21,sd),t(23,sd),t(26,sd),t(700,parseFloat),t(701,parseFloat),t(16,b1),t(1082,Co),t(1114,Co),t(1184,Co),t(600,od),t(651,vt),t(718,tP),t(1e3,W3),t(1001,eP),t(1005,rd),t(1007,rd),t(1028,rd),t(1016,J3),t(1017,X3),t(1021,id),t(1022,id),t(1231,id),t(1014,vt),t(1015,vt),t(1008,vt),t(1009,vt),t(1040,vt),t(1041,vt),t(1115,ad),t(1182,ad),t(1185,ad),t(1186,y1),t(1187,Y3),t(17,x1),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,g1),t(3807,g1),t(3907,vt),t(2951,vt),t(791,vt),t(1183,vt),t(1270,vt)};S1.exports={init:nP}});var k1=g((XB,E1)=>{"use strict";var nt=1e6;function rP(t){var e=t.readInt32BE(0),n=t.readUInt32BE(4),r="";e<0&&(e=~e+(n===0),n=~n+1>>>0,r="-");var i="",a,s,o,c,u,l;{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}return a=e%nt,s=4294967296*a+n,o=""+s%nt,r+o+i}E1.exports=rP});var q1=g((YB,P1)=>{var iP=k1(),fe=function(t,e,n,r,i){n=n||0,r=r||!1,i=i||function(f,v,y){return f*Math.pow(2,y)+v};var a=n>>3,s=function(f){return r?~f&255:f},o=255,c=8-n%8;e<c&&(o=255<<8-e&255,c=e),n&&(o=o>>n%8);var u=0;n%8+e>=8&&(u=i(0,s(t[a])&o,c));for(var l=e+n>>3,p=a+1;p<l;p++)u=i(u,s(t[p]),8);var d=(e+n)%8;return d>0&&(u=i(u,s(t[l])>>8-d,d)),u},A1=function(t,e,n){var r=Math.pow(2,n-1)-1,i=fe(t,1),a=fe(t,n,1);if(a===0)return 0;var s=1,o=function(u,l,p){u===0&&(u=1);for(var d=1;d<=p;d++)s/=2,(l&1<<p-d)>0&&(u+=s);return u},c=fe(t,e,n+1,!1,o);return a==Math.pow(2,n+1)-1?c===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,a-r)*c},aP=function(t){return fe(t,1)==1?-1*(fe(t,15,1,!0)+1):fe(t,15,1)},T1=function(t){return fe(t,1)==1?-1*(fe(t,31,1,!0)+1):fe(t,31,1)},sP=function(t){return A1(t,23,8)},oP=function(t){return A1(t,52,11)},cP=function(t){var e=fe(t,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,fe(t,16,16)),r=0,i=[],a=fe(t,16),s=0;s<a;s++)r+=fe(t,16,64+16*s)*n,n/=1e4;var o=Math.pow(10,fe(t,16,48));return(e===0?1:-1)*Math.round(r*o)/o},C1=function(t,e){var n=fe(e,1),r=fe(e,63,1),i=new Date((n===0?1:-1)*r/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(a){this.usec=a},i.getUTCMicroSeconds=function(){return this.usec},i},Pa=function(t){for(var e=fe(t,32),n=fe(t,32,32),r=fe(t,32,64),i=96,a=[],s=0;s<e;s++)a[s]=fe(t,32,i),i+=32,i+=32;var o=function(u){var l=fe(t,32,i);if(i+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=fe(t,l*8,i),i+=l*8,p;if(u==25)return p=t.toString(this.encoding,i>>3,(i+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],d;if(u.length>1){var f=u.shift();for(d=0;d<f;d++)p[d]=c(u,l);u.unshift(f)}else for(d=0;d<u[0];d++)p[d]=o(l);return p};return c(a,r)},uP=function(t){return t.toString("utf8")},lP=function(t){return t===null?null:fe(t,8)>0},pP=function(t){t(20,iP),t(21,aP),t(23,T1),t(26,T1),t(1700,cP),t(700,sP),t(701,oP),t(16,lP),t(1114,C1.bind(null,!1)),t(1184,C1.bind(null,!0)),t(1e3,Pa),t(1007,Pa),t(1016,Pa),t(1008,Pa),t(1009,Pa),t(25,uP)};P1.exports={init:pP}});var j1=g((eF,I1)=>{I1.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var ja=g(Ia=>{var dP=_1(),fP=q1(),mP=ed(),hP=j1();Ia.getTypeParser=vP;Ia.setTypeParser=gP;Ia.arrayParser=mP;Ia.builtins=hP;var qa={text:{},binary:{}};function N1(t){return String(t)}function vP(t,e){return e=e||"text",qa[e]&&qa[e][t]||N1}function gP(t,e,n){typeof e=="function"&&(n=e,e="text"),qa[e][t]=n}dP.init(function(t,e){qa.text[t]=e});fP.init(function(t,e){qa.binary[t]=e})});var Na=g((nF,cd)=>{"use strict";cd.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Kr=ja(),yP=Kr.getTypeParser(20,"text"),xP=Kr.getTypeParser(1016,"text");cd.exports.__defineSetter__("parseInt8",function(t){Kr.setTypeParser(20,"text",t?Kr.getTypeParser(23,"text"):yP),Kr.setTypeParser(1016,"text",t?Kr.getTypeParser(1007,"text"):xP)})});var Wr=g((rF,D1)=>{"use strict";var bP=Na(),O1=require("util"),{isDate:wP}=O1.types||O1;function SP(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function R1(t){let e="{";for(let n=0;n<t.length;n++)if(n>0&&(e=e+","),t[n]===null||typeof t[n]>"u")e=e+"NULL";else if(Array.isArray(t[n]))e=e+R1(t[n]);else if(ArrayBuffer.isView(t[n])){let r=t[n];if(!(r instanceof Buffer)){let i=Buffer.from(r.buffer,r.byteOffset,r.byteLength);i.length===r.byteLength?r=i:r=i.slice(r.byteOffset,r.byteOffset+r.byteLength)}e+="\\\\x"+r.toString("hex")}else e+=SP(Po(t[n]));return e=e+"}",e}var Po=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let n=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return n.length===t.byteLength?n:n.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wP(t)?bP.parseInputDatesAsUTC?kP(t):EP(t):Array.isArray(t)?R1(t):_P(t,e)}return t.toString()};function _P(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Po(t.toPostgres(Po),e)}return JSON.stringify(t)}function EP(t){let e=-t.getTimezoneOffset(),n=t.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);let i=String(n).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(i+="-",e*=-1):i+="+",i+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),r&&(i+=" BC"),i}function kP(t){let e=t.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let r=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return r+="+00:00",n&&(r+=" BC"),r}function TP(t,e,n){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),n&&(t.callback=n),t}var CP=function(t){return'"'+t.replace(/"/g,'""')+'"'},AP=function(t){let e=!1,n="'";if(t==null||typeof t!="string")return"''";for(let r=0;r<t.length;r++){let i=t[r];i==="'"?n+=i+i:i==="\\"?(n+=i+i,e=!0):n+=i}return n+="'",e===!0&&(n=" E"+n),n};D1.exports={prepareValue:function(e){return Po(e)},normalizeQueryConfig:TP,escapeIdentifier:CP,escapeLiteral:AP}});var B1=g((iF,M1)=>{"use strict";var Zr=require("crypto");function ud(t){return Zr.createHash("md5").update(t,"utf-8").digest("hex")}function PP(t,e,n){let r=ud(e+t);return"md5"+ud(Buffer.concat([Buffer.from(r),n]))}function qP(t){return Zr.createHash("sha256").update(t).digest()}function IP(t,e){return t=t.replace(/(\D)-/,"$1"),Zr.createHash(t).update(e).digest()}function jP(t,e){return Zr.createHmac("sha256",t).update(e).digest()}async function NP(t,e,n){return Zr.pbkdf2Sync(t,e,n,32,"sha256")}M1.exports={postgresMd5PasswordHash:PP,randomBytes:Zr.randomBytes,deriveKey:NP,sha256:qP,hashByName:IP,hmacSha256:jP,md5:ud}});var $1=g((aF,z1)=>{var F1=require("crypto");z1.exports={postgresMd5PasswordHash:RP,randomBytes:OP,deriveKey:FP,sha256:DP,hashByName:MP,hmacSha256:BP,md5:ld};var L1=F1.webcrypto||globalThis.crypto,Kn=L1.subtle,pd=new TextEncoder;function OP(t){return L1.getRandomValues(Buffer.alloc(t))}async function ld(t){try{return F1.createHash("md5").update(t,"utf-8").digest("hex")}catch{let n=typeof t=="string"?pd.encode(t):t,r=await Kn.digest("MD5",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function RP(t,e,n){let r=await ld(e+t);return"md5"+await ld(Buffer.concat([Buffer.from(r),n]))}async function DP(t){return await Kn.digest("SHA-256",t)}async function MP(t,e){return await Kn.digest(t,e)}async function BP(t,e){let n=await Kn.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Kn.sign("HMAC",n,pd.encode(e))}async function FP(t,e,n){let r=await Kn.importKey("raw",pd.encode(t),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Kn.deriveBits(i,r,256,["deriveBits"])}});var fd=g((sF,dd)=>{"use strict";var LP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;LP?dd.exports=B1():dd.exports=$1()});var V1=g((oF,Q1)=>{function Wn(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function md(t,e){let n=t[e++];if(n<128)return{length:n,index:e};let r=n&127;if(r>4)throw Wn("bad length",t);n=0;for(let i=0;i<r;i++)n=n<<8|t[e++];return{length:n,index:e}}function U1(t,e){if(t[e++]!==6)throw Wn("non-OID data",t);let{length:n,index:r}=md(t,e);e=r;let i=e+n,a=t[e++],s=(a/40>>0)+"."+a%40;for(;e<i;){let o=0;for(;e<i;){let c=t[e++];if(o=o<<7|c&127,c<128)break}s+="."+o}return{oid:s,index:e}}function Oa(t,e){if(t[e++]!==48)throw Wn("non-sequence data",t);return md(t,e)}function zP(t,e){e===void 0&&(e=0),e=Oa(t,e).index;let{length:n,index:r}=Oa(t,e);e=r+n,e=Oa(t,e).index;let{oid:i,index:a}=U1(t,e);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=Oa(t,e).index,t[e++]!==160)throw Wn("non-tag data",t);e=md(t,e).index,e=Oa(t,e).index;let{oid:s}=U1(t,e);switch(s){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Wn("unknown hash OID "+s,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Wn("Ed448 certificate channel binding is not currently supported by Postgres")}throw Wn("unknown OID "+i,t)}Q1.exports={signatureAlgorithmHashFromCertificate:zP}});var W1=g((cF,K1)=>{"use strict";var un=fd(),{signatureAlgorithmHashFromCertificate:$P}=V1();function UP(t,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let r=n.find(s=>t.includes(s));if(!r)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(r==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=un.randomBytes(18).toString("base64");return{mechanism:r,clientNonce:i,response:(r==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function QP(t,e,n,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=GP(n);if(i.nonce.startsWith(t.clientNonce)){if(i.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+t.clientNonce,s="r="+i.nonce+",s="+i.salt+",i="+i.iteration,o=r?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let I=r.getPeerCertificate().raw,_=$P(I);(_==="MD5"||_==="SHA-1")&&(_="SHA-256");let O=await un.hashByName(_,I);o=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(O)]).toString("base64")}let c="c="+o+",r="+i.nonce,u=a+","+s+","+c,l=Buffer.from(i.salt,"base64"),p=await un.deriveKey(e,l,i.iteration),d=await un.hmacSha256(p,"Client Key"),f=await un.sha256(d),v=await un.hmacSha256(f,u),y=WP(Buffer.from(d),Buffer.from(v)).toString("base64"),b=await un.hmacSha256(p,"Server Key"),E=await un.hmacSha256(b,u);t.message="SASLResponse",t.serverSignature=Buffer.from(E).toString("base64"),t.response=c+",p="+y}function VP(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=KP(e);if(n!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HP(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,n)=>t.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H1(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function G1(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],r=e.substring(2);return[n,r]}))}function GP(t){let e=G1(t),n=e.get("r");if(n){if(!HP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let r=e.get("s");if(r){if(!H1(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(i,10);return{nonce:n,salt:r,iteration:a}}function KP(t){let n=G1(t).get("v");if(n){if(!H1(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function WP(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((n,r)=>t[r]^e[r]))}K1.exports={startSession:UP,continueSession:QP,finalizeSession:VP}});var Io=g((uF,Z1)=>{"use strict";var ZP=ja();function qo(t){this._types=t||ZP,this.text={},this.binary={}}qo.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};qo.prototype.setTypeParser=function(t,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[t]=n};qo.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Z1.exports=qo});var Y1=g((lF,X1)=>{"use strict";function Jr(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let n={},r,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of r.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(r.username),n.password=n.password||decodeURIComponent(r.password),r.protocol=="socket:")return n.host=decodeURI(r.pathname),n.database=r.searchParams.get("db"),n.client_encoding=r.searchParams.get("encoding"),n;let a=i?"":r.hostname;n.host?a&&/^%2f/i.test(a)&&(r.pathname=a+r.pathname):n.host=decodeURIComponent(a),n.port||(n.port=r.port);let s=r.pathname.slice(1)||null;n.database=s?decodeURI(s):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let o=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function JP(t){return Object.entries(t).reduce((n,[r,i])=>(i!=null&&(n[r]=i),n),{})}function J1(t){return Object.entries(t).reduce((n,[r,i])=>{if(r==="ssl"){let a=i;typeof a=="boolean"&&(n[r]=a),typeof a=="object"&&(n[r]=JP(a))}else if(i!=null)if(r==="port"){if(i!==""){let a=parseInt(i,10);if(isNaN(a))throw new Error(`Invalid ${r}: ${i}`);n[r]=a}}else n[r]=i;return n},{})}function XP(t){return J1(Jr(t))}X1.exports=Jr;Jr.parse=Jr;Jr.toClientConfig=J1;Jr.parseIntoClientConfig=XP});var vd=g((pF,nw)=>{"use strict";var YP=require("dns"),tw=Na(),ew=Y1().parse,Ge=function(t,e,n){return n===void 0?n=process.env["PG"+t.toUpperCase()]:n===!1||(n=process.env[n]),e[t]||n||tw[t]},eq=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return tw.ssl},Xr=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},gt=function(t,e,n){let r=e[n];r!=null&&t.push(n+"="+Xr(r))},hd=class{constructor(e){e=typeof e=="string"?ew(e):e||{},e.connectionString&&(e=Object.assign({},e,ew(e.connectionString))),this.user=Ge("user",e),this.database=Ge("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ge("port",e),10),this.host=Ge("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ge("password",e)}),this.binary=Ge("binary",e),this.options=Ge("options",e),this.ssl=typeof e.ssl>"u"?eq():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ge("client_encoding",e),this.replication=Ge("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ge("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ge("fallback_application_name",e,!1),this.statement_timeout=Ge("statement_timeout",e,!1),this.lock_timeout=Ge("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Ge("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ge("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];gt(n,this,"user"),gt(n,this,"password"),gt(n,this,"port"),gt(n,this,"application_name"),gt(n,this,"fallback_application_name"),gt(n,this,"connect_timeout"),gt(n,this,"options");let r=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(gt(n,r,"sslmode"),gt(n,r,"sslca"),gt(n,r,"sslkey"),gt(n,r,"sslcert"),gt(n,r,"sslrootcert"),this.database&&n.push("dbname="+Xr(this.database)),this.replication&&n.push("replication="+Xr(this.replication)),this.host&&n.push("host="+Xr(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Xr(this.client_encoding)),YP.lookup(this.host,function(i,a){return i?e(i,null):(n.push("hostaddr="+Xr(a)),e(null,n.join(" ")))})}};nw.exports=hd});var yd=g((dF,iw)=>{"use strict";var tq=ja(),rw=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gd=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=rw.exec(e.text):n=rw.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let r=0,i=e.length;r<i;r++){let a=e[r];a!==null?n[r]=this._parsers[r](a):n[r]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let r=0,i=e.length;r<i;r++){let a=e[r],s=this.fields[r].name;if(a!==null){let o=this.fields[r].format==="binary"?Buffer.from(a):a;n[s]=this._parsers[r](o)}else n[s]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let r=0;r<e.length;r++){let i=e[r];n[i.name]=null,this._types?this._parsers[r]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[r]=tq.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...n}}};iw.exports=gd});var cw=g((fF,ow)=>{"use strict";var{EventEmitter:nq}=require("events"),aw=yd(),sw=Wr(),xd=class extends nq{constructor(e,n,r){super(),e=sw.normalizeQueryConfig(e,n,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new aw(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new aw(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(r){this._canceledDueToError=r;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:sw.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};ow.exports=xd});var Od=g(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.NoticeMessage=M.DataRowMessage=M.CommandCompleteMessage=M.ReadyForQueryMessage=M.NotificationResponseMessage=M.BackendKeyDataMessage=M.AuthenticationMD5Password=M.ParameterStatusMessage=M.ParameterDescriptionMessage=M.RowDescriptionMessage=M.Field=M.CopyResponse=M.CopyDataMessage=M.DatabaseError=M.copyDone=M.emptyQuery=M.replicationStart=M.portalSuspended=M.noData=M.closeComplete=M.bindComplete=M.parseComplete=void 0;M.parseComplete={name:"parseComplete",length:5};M.bindComplete={name:"bindComplete",length:5};M.closeComplete={name:"closeComplete",length:5};M.noData={name:"noData",length:5};M.portalSuspended={name:"portalSuspended",length:5};M.replicationStart={name:"replicationStart",length:4};M.emptyQuery={name:"emptyQuery",length:4};M.copyDone={name:"copyDone",length:4};var bd=class extends Error{constructor(e,n,r){super(e),this.length=n,this.name=r}};M.DatabaseError=bd;var wd=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};M.CopyDataMessage=wd;var Sd=class{constructor(e,n,r,i){this.length=e,this.name=n,this.binary=r,this.columnTypes=new Array(i)}};M.CopyResponse=Sd;var _d=class{constructor(e,n,r,i,a,s,o){this.name=e,this.tableID=n,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=a,this.dataTypeModifier=s,this.format=o}};M.Field=_d;var Ed=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};M.RowDescriptionMessage=Ed;var kd=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};M.ParameterDescriptionMessage=kd;var Td=class{constructor(e,n,r){this.length=e,this.parameterName=n,this.parameterValue=r,this.name="parameterStatus"}};M.ParameterStatusMessage=Td;var Cd=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};M.AuthenticationMD5Password=Cd;var Ad=class{constructor(e,n,r){this.length=e,this.processID=n,this.secretKey=r,this.name="backendKeyData"}};M.BackendKeyDataMessage=Ad;var Pd=class{constructor(e,n,r,i){this.length=e,this.processId=n,this.channel=r,this.payload=i,this.name="notification"}};M.NotificationResponseMessage=Pd;var qd=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};M.ReadyForQueryMessage=qd;var Id=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};M.CommandCompleteMessage=Id;var jd=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};M.DataRowMessage=jd;var Nd=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};M.NoticeMessage=Nd});var uw=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Writer=void 0;var Rd=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let r=this.buffer,i=r.length+(r.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};jo.Writer=Rd});var pw=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.serialize=void 0;var Dd=uw(),ue=new Dd.Writer,rq=t=>{ue.addInt16(3).addInt16(0);for(let r of Object.keys(t))ue.addCString(r).addCString(t[r]);ue.addCString("client_encoding").addCString("UTF8");let e=ue.addCString("").flush(),n=e.length+4;return new Dd.Writer().addInt32(n).add(e).flush()},iq=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},aq=t=>ue.addCString(t).flush(112),sq=function(t,e){return ue.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ue.flush(112)},oq=function(t){return ue.addString(t).flush(112)},cq=t=>ue.addCString(t).flush(81),lw=[],uq=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=t.types||lw,r=n.length,i=ue.addCString(e).addCString(t.text).addInt16(r);for(let a=0;a<r;a++)i.addInt32(n[a]);return ue.flush(80)},Yr=new Dd.Writer,lq=function(t,e){for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];r==null?(ue.addInt16(0),Yr.addInt32(-1)):r instanceof Buffer?(ue.addInt16(1),Yr.addInt32(r.length),Yr.add(r)):(ue.addInt16(0),Yr.addInt32(Buffer.byteLength(r)),Yr.addString(r))}},pq=(t={})=>{let e=t.portal||"",n=t.statement||"",r=t.binary||!1,i=t.values||lw,a=i.length;return ue.addCString(e).addCString(n),ue.addInt16(a),lq(i,t.valueMapper),ue.addInt16(a),ue.add(Yr.flush()),ue.addInt16(1),ue.addInt16(r?1:0),ue.flush(66)},dq=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fq=t=>{if(!t||!t.portal&&!t.rows)return dq;let e=t.portal||"",n=t.rows||0,r=Buffer.byteLength(e),i=4+r+1+4,a=Buffer.allocUnsafe(1+i);return a[0]=69,a.writeInt32BE(i,1),a.write(e,5,"utf-8"),a[r+5]=0,a.writeUInt32BE(n,a.length-4),a},mq=(t,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(t,8),n.writeInt32BE(e,12),n},Md=(t,e)=>{let r=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+r);return i[0]=t,i.writeInt32BE(r,1),i.write(e,5,"utf-8"),i[r]=0,i},hq=ue.addCString("P").flush(68),vq=ue.addCString("S").flush(68),gq=t=>t.name?Md(68,`${t.type}${t.name||""}`):t.type==="P"?hq:vq,yq=t=>{let e=`${t.type}${t.name||""}`;return Md(67,e)},xq=t=>ue.add(t).flush(100),bq=t=>Md(102,t),No=t=>Buffer.from([t,0,0,0,4]),wq=No(72),Sq=No(83),_q=No(88),Eq=No(99),kq={startup:rq,password:aq,requestSsl:iq,sendSASLInitialResponseMessage:sq,sendSCRAMClientFinalMessage:oq,query:cq,parse:uq,bind:pq,execute:fq,describe:gq,close:yq,flush:()=>wq,sync:()=>Sq,end:()=>_q,copyData:xq,copyDone:()=>Eq,copyFail:bq,cancel:mq};Oo.serialize=kq});var dw=g(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BufferReader=void 0;var Tq=Buffer.allocUnsafe(0),Bd=class{constructor(e=0){this.offset=e,this.buffer=Tq,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};Ro.BufferReader=Bd});var hw=g(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.Parser=void 0;var me=Od(),Cq=dw(),Fd=1,Aq=4,fw=Fd+Aq,mw=Buffer.allocUnsafe(0),Ld=class{constructor(e){if(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0,this.reader=new Cq.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+fw<=r;){let a=this.buffer[i],s=this.buffer.readUInt32BE(i+Fd),o=Fd+s;if(o+i<=r){let c=this.handlePacket(i+fw,a,s,this.buffer);n(c),i+=o}else break}i===r?(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let i;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;i=Buffer.allocUnsafe(a)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,i){switch(n){case 50:return me.bindComplete;case 49:return me.parseComplete;case 51:return me.closeComplete;case 110:return me.noData;case 115:return me.portalSuspended;case 99:return me.copyDone;case 87:return me.replicationStart;case 73:return me.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 116:return this.parseParameterDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:return new me.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.string(1);return new me.ReadyForQueryMessage(n,i)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring();return new me.CommandCompleteMessage(n,i)}parseCopyData(e,n,r){let i=r.slice(e,e+(n-4));return new me.CopyDataMessage(n,i)}parseCopyInMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyInResponse")}parseCopyOutMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyOutResponse")}parseCopyMessage(e,n,r,i){this.reader.setBuffer(e,r);let a=this.reader.byte()!==0,s=this.reader.int16(),o=new me.CopyResponse(n,i,a,s);for(let c=0;c<s;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.cstring(),s=this.reader.cstring();return new me.NotificationResponseMessage(n,i,a,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.RowDescriptionMessage(n,i);for(let s=0;s<i;s++)a.fields[s]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),r=this.reader.int16(),i=this.reader.uint32(),a=this.reader.int16(),s=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new me.Field(e,n,r,i,a,s,o)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.ParameterDescriptionMessage(n,i);for(let s=0;s<i;s++)a.dataTypeIDs[s]=this.reader.int32();return a}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new Array(i);for(let s=0;s<i;s++){let o=this.reader.int32();a[s]=o===-1?null:this.reader.string(o)}return new me.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring(),a=this.reader.cstring();return new me.ParameterStatusMessage(n,i,a)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.int32();return new me.BackendKeyDataMessage(n,i,a)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a={name:"authenticationOk",length:n};switch(i){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let s=this.reader.bytes(4);return new me.AuthenticationMD5Password(n,s)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let s;do s=this.reader.cstring(),s&&a.mechanisms.push(s);while(s)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return a}parseErrorMessage(e,n,r,i){this.reader.setBuffer(e,r);let a={},s=this.reader.string(1);for(;s!=="\0";)a[s]=this.reader.cstring(),s=this.reader.string(1);let o=a.M,c=i==="notice"?new me.NoticeMessage(n,o):new me.DatabaseError(o,n,i);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};Do.Parser=Ld});var zd=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DatabaseError=ln.serialize=ln.parse=void 0;var Pq=Od();Object.defineProperty(ln,"DatabaseError",{enumerable:!0,get:function(){return Pq.DatabaseError}});var qq=pw();Object.defineProperty(ln,"serialize",{enumerable:!0,get:function(){return qq.serialize}});var Iq=hw();function jq(t,e){let n=new Iq.Parser;return t.on("data",r=>n.parse(r,e)),new Promise(r=>t.on("end",()=>r()))}ln.parse=jq});var vw=g($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.default={}});var yw=g((wF,gw)=>{var{getStream:Nq,getSecureStream:Oq}=Bq();gw.exports={getStream:Nq,getSecureStream:Oq};function Rq(){function t(n){let r=require("net");return new r.Socket}function e(n){return require("tls").connect(n)}return{getStream:t,getSecureStream:e}}function Dq(){function t(n){let{CloudflareSocket:r}=vw();return new r(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:t,getSecureStream:e}}function Mq(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function Bq(){return Mq()?Dq():Rq()}});var Qd=g((SF,xw)=>{"use strict";var Fq=require("events").EventEmitter,{parse:Lq,serialize:Ne}=zd(),{getStream:zq,getSecureStream:$q}=yw(),Uq=Ne.flush(),Qq=Ne.sync(),Vq=Ne.end(),Ud=class extends Fq{constructor(e){super(),e=e||{},this.stream=e.stream||zq(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(r){r==="message"&&(n._emitMessage=!0)})}connect(e,n){let r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")});let i=function(a){r._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||r.emit("error",a)};if(this.stream.on("error",i),this.stream.on("close",function(){r.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:r.stream};r.ssl!==!0&&(Object.assign(o,r.ssl),"key"in r.ssl&&(o.key=r.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(o.servername=n);try{r.stream=$q(o)}catch(u){return r.emit("error",u)}r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")})}attachListeners(e){Lq(e,n=>{let r=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(r,n)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(e){this.stream.write(Ne.startup(e))}cancel(e,n){this._send(Ne.cancel(e,n))}password(e){this._send(Ne.password(e))}sendSASLInitialResponseMessage(e,n){this._send(Ne.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(Ne.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(Ne.query(e))}parse(e){this._send(Ne.parse(e))}bind(e){this._send(Ne.bind(e))}execute(e){this._send(Ne.execute(e))}flush(){this.stream.writable&&this.stream.write(Uq)}sync(){this._ending=!0,this._send(Qq)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Vq,()=>{this.stream.end()})}close(e){this._send(Ne.close(e))}describe(e){this._send(Ne.describe(e))}sendCopyFromChunk(e){this._send(Ne.copyData(e))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(e){this._send(Ne.copyFail(e))}};xw.exports=Ud});var _w=g((_F,Sw)=>{"use strict";var{Transform:Hq}=require("stream"),{StringDecoder:Gq}=require("string_decoder"),pn=Symbol("last"),Mo=Symbol("decoder");function Kq(t,e,n){let r;if(this.overflow){if(r=this[Mo].write(t).split(this.matcher),r.length===1)return n();r.shift(),this.overflow=!1}else this[pn]+=this[Mo].write(t),r=this[pn].split(this.matcher);this[pn]=r.pop();for(let i=0;i<r.length;i++)try{ww(this,this.mapper(r[i]))}catch(a){return n(a)}if(this.overflow=this[pn].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Wq(t){if(this[pn]+=this[Mo].end(),this[pn])try{ww(this,this.mapper(this[pn]))}catch(e){return t(e)}t()}function ww(t,e){e!==void 0&&t.push(e)}function bw(t){return t}function Zq(t,e,n){switch(t=t||/\r?\n/,e=e||bw,n=n||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(n=t,t=/\r?\n/);break;case 2:typeof t=="function"?(n=e,e=t,t=/\r?\n/):typeof e=="object"&&(n=e,e=bw)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Kq,n.flush=Wq,n.readableObjectMode=!0;let r=new Hq(n);return r[pn]="",r[Mo]=new Gq("utf8"),r.matcher=t,r.mapper=e,r.maxLength=n.maxLength,r.skipOverflow=n.skipOverflow||!1,r.overflow=!1,r._destroy=function(i,a){this._writableState.errorEmitted=!1,a(i)},r}Sw.exports=Zq});var Tw=g((EF,Ht)=>{"use strict";var Ew=require("path"),Jq=require("stream").Stream,Xq=_w(),kw=require("util"),Yq=5432,Bo=process.platform==="win32",Ra=process.stderr,e9=56,t9=7,n9=61440,r9=32768;function i9(t){return(t&n9)==r9}var ei=["host","port","database","user","password"],Vd=ei.length,a9=ei[Vd-1];function Hd(){var t=Ra instanceof Jq&&Ra.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
pollmetry-app  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app  | /app/dist/index.cjs:63
pollmetry-app  | `}function j5(){return function(){this.error(404)}}function N5(){return function(e){if(this.hasTrailingSlash()){this.error(404);return}var n=el.original(this.req);n.path=null,n.pathname=q5(n.pathname+"/");var r=k5(A5.format(n)),i=I5("Redirecting","Redirecting to "+T5(r));e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(i)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",r),e.end(i)}}});var xb=g((Je,yb)=>{"use strict";var Gs=cg(),O5=require("events").EventEmitter,mb=lg(),hb=Sx(),R5=wu(),D5=_u(),vb=Kx(),gb=pb();Je=yb.exports=M5;function M5(){var t=function(e,n,r){t.handle(e,n,r)};return mb(t,O5.prototype,!1),mb(t,hb,!1),t.request=Object.create(vb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(gb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}Je.application=hb;Je.request=vb;Je.response=gb;Je.Route=R5;Je.Router=D5;Je.json=Gs.json;Je.query=Eu();Je.raw=Gs.raw;Je.static=fb();Je.text=Gs.text;Je.urlencoded=Gs.urlencoded;var B5=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];B5.forEach(function(t){Object.defineProperty(Je,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var nl=g((Yj,bb)=>{"use strict";bb.exports=xb()});var Yp=g(a1=>{"use strict";a1.parse=function(t,e){return new Xp(t,e).parse()};var Xp=class t{constructor(e,n){this.source=e,this.transform=n||T3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,r,i;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!i)this.dimension++,this.dimension>1&&(r=new t(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);else if(n.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(i&&this.newEntry(!0),i=!i):n.value===","&&!i?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function T3(t){return t}});var ed=g((HB,s1)=>{var C3=Yp();s1.exports={create:function(t,e){return{parse:function(){return C3.parse(t,e)}}}}});var u1=g((GB,c1)=>{"use strict";var A3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,P3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,q3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,I3=/^-?infinity$/;c1.exports=function(e){if(I3.test(e))return Number(e.replace("i","I"));var n=A3.exec(e);if(!n)return j3(e)||null;var r=!!n[8],i=parseInt(n[1],10);r&&(i=o1(i));var a=parseInt(n[2],10)-1,s=n[3],o=parseInt(n[4],10),c=parseInt(n[5],10),u=parseInt(n[6],10),l=n[7];l=l?1e3*parseFloat(l):0;var p,d=N3(e);return d!=null?(p=new Date(Date.UTC(i,a,s,o,c,u,l)),td(i)&&p.setUTCFullYear(i),d!==0&&p.setTime(p.getTime()-d)):(p=new Date(i,a,s,o,c,u,l),td(i)&&p.setFullYear(i)),p};function j3(t){var e=P3.exec(t);if(e){var n=parseInt(e[1],10),r=!!e[4];r&&(n=o1(n));var i=parseInt(e[2],10)-1,a=e[3],s=new Date(n,i,a);return td(n)&&s.setFullYear(n),s}}function N3(t){if(t.endsWith("+00"))return 0;var e=q3.exec(t.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var r=n==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*r*1e3}}function o1(t){return-(t-1)}function td(t){return t>=0&&t<100}});var p1=g((KB,l1)=>{l1.exports=R3;var O3=Object.prototype.hasOwnProperty;function R3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)O3.call(n,r)&&(t[r]=n[r])}return t}});var m1=g((WB,f1)=>{"use strict";var D3=p1();f1.exports=Gr;function Gr(t){if(!(this instanceof Gr))return new Gr(t);D3(this,K3(t))}var M3=["seconds","minutes","hours","days","months","years"];Gr.prototype.toPostgres=function(){var t=M3.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var B3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},F3=["years","months","days"],L3=["hours","minutes","seconds"];Gr.prototype.toISOString=Gr.prototype.toISO=function(){var t=F3.map(n,this).join(""),e=L3.map(n,this).join("");return"P"+t+"T"+e;function n(r){var i=this[r]||0;return r==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+B3[r]}};var nd="([+-]?\\d+)",z3=nd+"\\s+years?",$3=nd+"\\s+mons?",U3=nd+"\\s+days?",Q3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",V3=new RegExp([z3,$3,U3,Q3].map(function(t){return"("+t+")?"}).join("\\s*")),d1={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H3=["hours","minutes","seconds","milliseconds"];function G3(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function K3(t){if(!t)return{};var e=V3.exec(t),n=e[8]==="-";return Object.keys(d1).reduce(function(r,i){var a=d1[i],s=e[a];return!s||(s=i==="milliseconds"?G3(s):parseInt(s,10),!s)||(n&&~H3.indexOf(i)&&(s*=-1),r[i]=s),r},{})}});var v1=g((ZB,h1)=>{"use strict";h1.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var n="",r=0;r<e.length;)if(e[r]!=="\\")n+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))n+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&e[r+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";r+=Math.floor(i/2)*2}return new Buffer(n,"binary")}});var _1=g((JB,S1)=>{var Ca=Yp(),Aa=ed(),Co=u1(),y1=m1(),x1=v1();function Ao(t){return function(n){return n===null?n:t(n)}}function b1(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function W3(t){return t?Ca.parse(t,b1):null}function Z3(t){return parseInt(t,10)}function rd(t){return t?Ca.parse(t,Ao(Z3)):null}function J3(t){return t?Ca.parse(t,Ao(function(e){return w1(e).trim()})):null}var X3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=od(n)),n});return e.parse()},id=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},vt=function(t){if(!t)return null;var e=Aa.create(t);return e.parse()},ad=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=Co(n)),n});return e.parse()},Y3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=y1(n)),n});return e.parse()},eP=function(t){return t?Ca.parse(t,Ao(x1)):null},sd=function(t){return parseInt(t,10)},w1=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},g1=function(t){return t?Ca.parse(t,Ao(JSON.parse)):null},od=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},tP=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",n="",r=!1,i=2;i<t.length-1;i++){if(r||(e+=t[i]),t[i]===")"){r=!0;continue}else if(!r)continue;t[i]!==","&&(n+=t[i])}var a=od(e);return a.radius=parseFloat(n),a},nP=function(t){t(20,w1),t(21,sd),t(23,sd),t(26,sd),t(700,parseFloat),t(701,parseFloat),t(16,b1),t(1082,Co),t(1114,Co),t(1184,Co),t(600,od),t(651,vt),t(718,tP),t(1e3,W3),t(1001,eP),t(1005,rd),t(1007,rd),t(1028,rd),t(1016,J3),t(1017,X3),t(1021,id),t(1022,id),t(1231,id),t(1014,vt),t(1015,vt),t(1008,vt),t(1009,vt),t(1040,vt),t(1041,vt),t(1115,ad),t(1182,ad),t(1185,ad),t(1186,y1),t(1187,Y3),t(17,x1),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,g1),t(3807,g1),t(3907,vt),t(2951,vt),t(791,vt),t(1183,vt),t(1270,vt)};S1.exports={init:nP}});var k1=g((XB,E1)=>{"use strict";var nt=1e6;function rP(t){var e=t.readInt32BE(0),n=t.readUInt32BE(4),r="";e<0&&(e=~e+(n===0),n=~n+1>>>0,r="-");var i="",a,s,o,c,u,l;{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}return a=e%nt,s=4294967296*a+n,o=""+s%nt,r+o+i}E1.exports=rP});var q1=g((YB,P1)=>{var iP=k1(),fe=function(t,e,n,r,i){n=n||0,r=r||!1,i=i||function(f,v,y){return f*Math.pow(2,y)+v};var a=n>>3,s=function(f){return r?~f&255:f},o=255,c=8-n%8;e<c&&(o=255<<8-e&255,c=e),n&&(o=o>>n%8);var u=0;n%8+e>=8&&(u=i(0,s(t[a])&o,c));for(var l=e+n>>3,p=a+1;p<l;p++)u=i(u,s(t[p]),8);var d=(e+n)%8;return d>0&&(u=i(u,s(t[l])>>8-d,d)),u},A1=function(t,e,n){var r=Math.pow(2,n-1)-1,i=fe(t,1),a=fe(t,n,1);if(a===0)return 0;var s=1,o=function(u,l,p){u===0&&(u=1);for(var d=1;d<=p;d++)s/=2,(l&1<<p-d)>0&&(u+=s);return u},c=fe(t,e,n+1,!1,o);return a==Math.pow(2,n+1)-1?c===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,a-r)*c},aP=function(t){return fe(t,1)==1?-1*(fe(t,15,1,!0)+1):fe(t,15,1)},T1=function(t){return fe(t,1)==1?-1*(fe(t,31,1,!0)+1):fe(t,31,1)},sP=function(t){return A1(t,23,8)},oP=function(t){return A1(t,52,11)},cP=function(t){var e=fe(t,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,fe(t,16,16)),r=0,i=[],a=fe(t,16),s=0;s<a;s++)r+=fe(t,16,64+16*s)*n,n/=1e4;var o=Math.pow(10,fe(t,16,48));return(e===0?1:-1)*Math.round(r*o)/o},C1=function(t,e){var n=fe(e,1),r=fe(e,63,1),i=new Date((n===0?1:-1)*r/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(a){this.usec=a},i.getUTCMicroSeconds=function(){return this.usec},i},Pa=function(t){for(var e=fe(t,32),n=fe(t,32,32),r=fe(t,32,64),i=96,a=[],s=0;s<e;s++)a[s]=fe(t,32,i),i+=32,i+=32;var o=function(u){var l=fe(t,32,i);if(i+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=fe(t,l*8,i),i+=l*8,p;if(u==25)return p=t.toString(this.encoding,i>>3,(i+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],d;if(u.length>1){var f=u.shift();for(d=0;d<f;d++)p[d]=c(u,l);u.unshift(f)}else for(d=0;d<u[0];d++)p[d]=o(l);return p};return c(a,r)},uP=function(t){return t.toString("utf8")},lP=function(t){return t===null?null:fe(t,8)>0},pP=function(t){t(20,iP),t(21,aP),t(23,T1),t(26,T1),t(1700,cP),t(700,sP),t(701,oP),t(16,lP),t(1114,C1.bind(null,!1)),t(1184,C1.bind(null,!0)),t(1e3,Pa),t(1007,Pa),t(1016,Pa),t(1008,Pa),t(1009,Pa),t(25,uP)};P1.exports={init:pP}});var j1=g((eF,I1)=>{I1.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var ja=g(Ia=>{var dP=_1(),fP=q1(),mP=ed(),hP=j1();Ia.getTypeParser=vP;Ia.setTypeParser=gP;Ia.arrayParser=mP;Ia.builtins=hP;var qa={text:{},binary:{}};function N1(t){return String(t)}function vP(t,e){return e=e||"text",qa[e]&&qa[e][t]||N1}function gP(t,e,n){typeof e=="function"&&(n=e,e="text"),qa[e][t]=n}dP.init(function(t,e){qa.text[t]=e});fP.init(function(t,e){qa.binary[t]=e})});var Na=g((nF,cd)=>{"use strict";cd.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Kr=ja(),yP=Kr.getTypeParser(20,"text"),xP=Kr.getTypeParser(1016,"text");cd.exports.__defineSetter__("parseInt8",function(t){Kr.setTypeParser(20,"text",t?Kr.getTypeParser(23,"text"):yP),Kr.setTypeParser(1016,"text",t?Kr.getTypeParser(1007,"text"):xP)})});var Wr=g((rF,D1)=>{"use strict";var bP=Na(),O1=require("util"),{isDate:wP}=O1.types||O1;function SP(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function R1(t){let e="{";for(let n=0;n<t.length;n++)if(n>0&&(e=e+","),t[n]===null||typeof t[n]>"u")e=e+"NULL";else if(Array.isArray(t[n]))e=e+R1(t[n]);else if(ArrayBuffer.isView(t[n])){let r=t[n];if(!(r instanceof Buffer)){let i=Buffer.from(r.buffer,r.byteOffset,r.byteLength);i.length===r.byteLength?r=i:r=i.slice(r.byteOffset,r.byteOffset+r.byteLength)}e+="\\\\x"+r.toString("hex")}else e+=SP(Po(t[n]));return e=e+"}",e}var Po=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let n=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return n.length===t.byteLength?n:n.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wP(t)?bP.parseInputDatesAsUTC?kP(t):EP(t):Array.isArray(t)?R1(t):_P(t,e)}return t.toString()};function _P(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Po(t.toPostgres(Po),e)}return JSON.stringify(t)}function EP(t){let e=-t.getTimezoneOffset(),n=t.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);let i=String(n).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(i+="-",e*=-1):i+="+",i+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),r&&(i+=" BC"),i}function kP(t){let e=t.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let r=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return r+="+00:00",n&&(r+=" BC"),r}function TP(t,e,n){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),n&&(t.callback=n),t}var CP=function(t){return'"'+t.replace(/"/g,'""')+'"'},AP=function(t){let e=!1,n="'";if(t==null||typeof t!="string")return"''";for(let r=0;r<t.length;r++){let i=t[r];i==="'"?n+=i+i:i==="\\"?(n+=i+i,e=!0):n+=i}return n+="'",e===!0&&(n=" E"+n),n};D1.exports={prepareValue:function(e){return Po(e)},normalizeQueryConfig:TP,escapeIdentifier:CP,escapeLiteral:AP}});var B1=g((iF,M1)=>{"use strict";var Zr=require("crypto");function ud(t){return Zr.createHash("md5").update(t,"utf-8").digest("hex")}function PP(t,e,n){let r=ud(e+t);return"md5"+ud(Buffer.concat([Buffer.from(r),n]))}function qP(t){return Zr.createHash("sha256").update(t).digest()}function IP(t,e){return t=t.replace(/(\D)-/,"$1"),Zr.createHash(t).update(e).digest()}function jP(t,e){return Zr.createHmac("sha256",t).update(e).digest()}async function NP(t,e,n){return Zr.pbkdf2Sync(t,e,n,32,"sha256")}M1.exports={postgresMd5PasswordHash:PP,randomBytes:Zr.randomBytes,deriveKey:NP,sha256:qP,hashByName:IP,hmacSha256:jP,md5:ud}});var $1=g((aF,z1)=>{var F1=require("crypto");z1.exports={postgresMd5PasswordHash:RP,randomBytes:OP,deriveKey:FP,sha256:DP,hashByName:MP,hmacSha256:BP,md5:ld};var L1=F1.webcrypto||globalThis.crypto,Kn=L1.subtle,pd=new TextEncoder;function OP(t){return L1.getRandomValues(Buffer.alloc(t))}async function ld(t){try{return F1.createHash("md5").update(t,"utf-8").digest("hex")}catch{let n=typeof t=="string"?pd.encode(t):t,r=await Kn.digest("MD5",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function RP(t,e,n){let r=await ld(e+t);return"md5"+await ld(Buffer.concat([Buffer.from(r),n]))}async function DP(t){return await Kn.digest("SHA-256",t)}async function MP(t,e){return await Kn.digest(t,e)}async function BP(t,e){let n=await Kn.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Kn.sign("HMAC",n,pd.encode(e))}async function FP(t,e,n){let r=await Kn.importKey("raw",pd.encode(t),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Kn.deriveBits(i,r,256,["deriveBits"])}});var fd=g((sF,dd)=>{"use strict";var LP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;LP?dd.exports=B1():dd.exports=$1()});var V1=g((oF,Q1)=>{function Wn(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function md(t,e){let n=t[e++];if(n<128)return{length:n,index:e};let r=n&127;if(r>4)throw Wn("bad length",t);n=0;for(let i=0;i<r;i++)n=n<<8|t[e++];return{length:n,index:e}}function U1(t,e){if(t[e++]!==6)throw Wn("non-OID data",t);let{length:n,index:r}=md(t,e);e=r;let i=e+n,a=t[e++],s=(a/40>>0)+"."+a%40;for(;e<i;){let o=0;for(;e<i;){let c=t[e++];if(o=o<<7|c&127,c<128)break}s+="."+o}return{oid:s,index:e}}function Oa(t,e){if(t[e++]!==48)throw Wn("non-sequence data",t);return md(t,e)}function zP(t,e){e===void 0&&(e=0),e=Oa(t,e).index;let{length:n,index:r}=Oa(t,e);e=r+n,e=Oa(t,e).index;let{oid:i,index:a}=U1(t,e);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=Oa(t,e).index,t[e++]!==160)throw Wn("non-tag data",t);e=md(t,e).index,e=Oa(t,e).index;let{oid:s}=U1(t,e);switch(s){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Wn("unknown hash OID "+s,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Wn("Ed448 certificate channel binding is not currently supported by Postgres")}throw Wn("unknown OID "+i,t)}Q1.exports={signatureAlgorithmHashFromCertificate:zP}});var W1=g((cF,K1)=>{"use strict";var un=fd(),{signatureAlgorithmHashFromCertificate:$P}=V1();function UP(t,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let r=n.find(s=>t.includes(s));if(!r)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(r==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=un.randomBytes(18).toString("base64");return{mechanism:r,clientNonce:i,response:(r==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function QP(t,e,n,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=GP(n);if(i.nonce.startsWith(t.clientNonce)){if(i.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+t.clientNonce,s="r="+i.nonce+",s="+i.salt+",i="+i.iteration,o=r?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let I=r.getPeerCertificate().raw,_=$P(I);(_==="MD5"||_==="SHA-1")&&(_="SHA-256");let O=await un.hashByName(_,I);o=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(O)]).toString("base64")}let c="c="+o+",r="+i.nonce,u=a+","+s+","+c,l=Buffer.from(i.salt,"base64"),p=await un.deriveKey(e,l,i.iteration),d=await un.hmacSha256(p,"Client Key"),f=await un.sha256(d),v=await un.hmacSha256(f,u),y=WP(Buffer.from(d),Buffer.from(v)).toString("base64"),b=await un.hmacSha256(p,"Server Key"),E=await un.hmacSha256(b,u);t.message="SASLResponse",t.serverSignature=Buffer.from(E).toString("base64"),t.response=c+",p="+y}function VP(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=KP(e);if(n!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HP(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,n)=>t.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H1(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function G1(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],r=e.substring(2);return[n,r]}))}function GP(t){let e=G1(t),n=e.get("r");if(n){if(!HP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let r=e.get("s");if(r){if(!H1(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(i,10);return{nonce:n,salt:r,iteration:a}}function KP(t){let n=G1(t).get("v");if(n){if(!H1(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function WP(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((n,r)=>t[r]^e[r]))}K1.exports={startSession:UP,continueSession:QP,finalizeSession:VP}});var Io=g((uF,Z1)=>{"use strict";var ZP=ja();function qo(t){this._types=t||ZP,this.text={},this.binary={}}qo.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};qo.prototype.setTypeParser=function(t,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[t]=n};qo.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Z1.exports=qo});var Y1=g((lF,X1)=>{"use strict";function Jr(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let n={},r,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of r.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(r.username),n.password=n.password||decodeURIComponent(r.password),r.protocol=="socket:")return n.host=decodeURI(r.pathname),n.database=r.searchParams.get("db"),n.client_encoding=r.searchParams.get("encoding"),n;let a=i?"":r.hostname;n.host?a&&/^%2f/i.test(a)&&(r.pathname=a+r.pathname):n.host=decodeURIComponent(a),n.port||(n.port=r.port);let s=r.pathname.slice(1)||null;n.database=s?decodeURI(s):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let o=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function JP(t){return Object.entries(t).reduce((n,[r,i])=>(i!=null&&(n[r]=i),n),{})}function J1(t){return Object.entries(t).reduce((n,[r,i])=>{if(r==="ssl"){let a=i;typeof a=="boolean"&&(n[r]=a),typeof a=="object"&&(n[r]=JP(a))}else if(i!=null)if(r==="port"){if(i!==""){let a=parseInt(i,10);if(isNaN(a))throw new Error(`Invalid ${r}: ${i}`);n[r]=a}}else n[r]=i;return n},{})}function XP(t){return J1(Jr(t))}X1.exports=Jr;Jr.parse=Jr;Jr.toClientConfig=J1;Jr.parseIntoClientConfig=XP});var vd=g((pF,nw)=>{"use strict";var YP=require("dns"),tw=Na(),ew=Y1().parse,Ge=function(t,e,n){return n===void 0?n=process.env["PG"+t.toUpperCase()]:n===!1||(n=process.env[n]),e[t]||n||tw[t]},eq=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return tw.ssl},Xr=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},gt=function(t,e,n){let r=e[n];r!=null&&t.push(n+"="+Xr(r))},hd=class{constructor(e){e=typeof e=="string"?ew(e):e||{},e.connectionString&&(e=Object.assign({},e,ew(e.connectionString))),this.user=Ge("user",e),this.database=Ge("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ge("port",e),10),this.host=Ge("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ge("password",e)}),this.binary=Ge("binary",e),this.options=Ge("options",e),this.ssl=typeof e.ssl>"u"?eq():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ge("client_encoding",e),this.replication=Ge("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ge("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ge("fallback_application_name",e,!1),this.statement_timeout=Ge("statement_timeout",e,!1),this.lock_timeout=Ge("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Ge("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ge("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];gt(n,this,"user"),gt(n,this,"password"),gt(n,this,"port"),gt(n,this,"application_name"),gt(n,this,"fallback_application_name"),gt(n,this,"connect_timeout"),gt(n,this,"options");let r=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(gt(n,r,"sslmode"),gt(n,r,"sslca"),gt(n,r,"sslkey"),gt(n,r,"sslcert"),gt(n,r,"sslrootcert"),this.database&&n.push("dbname="+Xr(this.database)),this.replication&&n.push("replication="+Xr(this.replication)),this.host&&n.push("host="+Xr(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Xr(this.client_encoding)),YP.lookup(this.host,function(i,a){return i?e(i,null):(n.push("hostaddr="+Xr(a)),e(null,n.join(" ")))})}};nw.exports=hd});var yd=g((dF,iw)=>{"use strict";var tq=ja(),rw=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gd=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=rw.exec(e.text):n=rw.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let r=0,i=e.length;r<i;r++){let a=e[r];a!==null?n[r]=this._parsers[r](a):n[r]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let r=0,i=e.length;r<i;r++){let a=e[r],s=this.fields[r].name;if(a!==null){let o=this.fields[r].format==="binary"?Buffer.from(a):a;n[s]=this._parsers[r](o)}else n[s]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let r=0;r<e.length;r++){let i=e[r];n[i.name]=null,this._types?this._parsers[r]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[r]=tq.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...n}}};iw.exports=gd});var cw=g((fF,ow)=>{"use strict";var{EventEmitter:nq}=require("events"),aw=yd(),sw=Wr(),xd=class extends nq{constructor(e,n,r){super(),e=sw.normalizeQueryConfig(e,n,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new aw(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new aw(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(r){this._canceledDueToError=r;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:sw.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};ow.exports=xd});var Od=g(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.NoticeMessage=M.DataRowMessage=M.CommandCompleteMessage=M.ReadyForQueryMessage=M.NotificationResponseMessage=M.BackendKeyDataMessage=M.AuthenticationMD5Password=M.ParameterStatusMessage=M.ParameterDescriptionMessage=M.RowDescriptionMessage=M.Field=M.CopyResponse=M.CopyDataMessage=M.DatabaseError=M.copyDone=M.emptyQuery=M.replicationStart=M.portalSuspended=M.noData=M.closeComplete=M.bindComplete=M.parseComplete=void 0;M.parseComplete={name:"parseComplete",length:5};M.bindComplete={name:"bindComplete",length:5};M.closeComplete={name:"closeComplete",length:5};M.noData={name:"noData",length:5};M.portalSuspended={name:"portalSuspended",length:5};M.replicationStart={name:"replicationStart",length:4};M.emptyQuery={name:"emptyQuery",length:4};M.copyDone={name:"copyDone",length:4};var bd=class extends Error{constructor(e,n,r){super(e),this.length=n,this.name=r}};M.DatabaseError=bd;var wd=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};M.CopyDataMessage=wd;var Sd=class{constructor(e,n,r,i){this.length=e,this.name=n,this.binary=r,this.columnTypes=new Array(i)}};M.CopyResponse=Sd;var _d=class{constructor(e,n,r,i,a,s,o){this.name=e,this.tableID=n,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=a,this.dataTypeModifier=s,this.format=o}};M.Field=_d;var Ed=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};M.RowDescriptionMessage=Ed;var kd=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};M.ParameterDescriptionMessage=kd;var Td=class{constructor(e,n,r){this.length=e,this.parameterName=n,this.parameterValue=r,this.name="parameterStatus"}};M.ParameterStatusMessage=Td;var Cd=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};M.AuthenticationMD5Password=Cd;var Ad=class{constructor(e,n,r){this.length=e,this.processID=n,this.secretKey=r,this.name="backendKeyData"}};M.BackendKeyDataMessage=Ad;var Pd=class{constructor(e,n,r,i){this.length=e,this.processId=n,this.channel=r,this.payload=i,this.name="notification"}};M.NotificationResponseMessage=Pd;var qd=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};M.ReadyForQueryMessage=qd;var Id=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};M.CommandCompleteMessage=Id;var jd=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};M.DataRowMessage=jd;var Nd=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};M.NoticeMessage=Nd});var uw=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Writer=void 0;var Rd=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let r=this.buffer,i=r.length+(r.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};jo.Writer=Rd});var pw=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.serialize=void 0;var Dd=uw(),ue=new Dd.Writer,rq=t=>{ue.addInt16(3).addInt16(0);for(let r of Object.keys(t))ue.addCString(r).addCString(t[r]);ue.addCString("client_encoding").addCString("UTF8");let e=ue.addCString("").flush(),n=e.length+4;return new Dd.Writer().addInt32(n).add(e).flush()},iq=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},aq=t=>ue.addCString(t).flush(112),sq=function(t,e){return ue.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ue.flush(112)},oq=function(t){return ue.addString(t).flush(112)},cq=t=>ue.addCString(t).flush(81),lw=[],uq=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=t.types||lw,r=n.length,i=ue.addCString(e).addCString(t.text).addInt16(r);for(let a=0;a<r;a++)i.addInt32(n[a]);return ue.flush(80)},Yr=new Dd.Writer,lq=function(t,e){for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];r==null?(ue.addInt16(0),Yr.addInt32(-1)):r instanceof Buffer?(ue.addInt16(1),Yr.addInt32(r.length),Yr.add(r)):(ue.addInt16(0),Yr.addInt32(Buffer.byteLength(r)),Yr.addString(r))}},pq=(t={})=>{let e=t.portal||"",n=t.statement||"",r=t.binary||!1,i=t.values||lw,a=i.length;return ue.addCString(e).addCString(n),ue.addInt16(a),lq(i,t.valueMapper),ue.addInt16(a),ue.add(Yr.flush()),ue.addInt16(1),ue.addInt16(r?1:0),ue.flush(66)},dq=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fq=t=>{if(!t||!t.portal&&!t.rows)return dq;let e=t.portal||"",n=t.rows||0,r=Buffer.byteLength(e),i=4+r+1+4,a=Buffer.allocUnsafe(1+i);return a[0]=69,a.writeInt32BE(i,1),a.write(e,5,"utf-8"),a[r+5]=0,a.writeUInt32BE(n,a.length-4),a},mq=(t,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(t,8),n.writeInt32BE(e,12),n},Md=(t,e)=>{let r=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+r);return i[0]=t,i.writeInt32BE(r,1),i.write(e,5,"utf-8"),i[r]=0,i},hq=ue.addCString("P").flush(68),vq=ue.addCString("S").flush(68),gq=t=>t.name?Md(68,`${t.type}${t.name||""}`):t.type==="P"?hq:vq,yq=t=>{let e=`${t.type}${t.name||""}`;return Md(67,e)},xq=t=>ue.add(t).flush(100),bq=t=>Md(102,t),No=t=>Buffer.from([t,0,0,0,4]),wq=No(72),Sq=No(83),_q=No(88),Eq=No(99),kq={startup:rq,password:aq,requestSsl:iq,sendSASLInitialResponseMessage:sq,sendSCRAMClientFinalMessage:oq,query:cq,parse:uq,bind:pq,execute:fq,describe:gq,close:yq,flush:()=>wq,sync:()=>Sq,end:()=>_q,copyData:xq,copyDone:()=>Eq,copyFail:bq,cancel:mq};Oo.serialize=kq});var dw=g(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BufferReader=void 0;var Tq=Buffer.allocUnsafe(0),Bd=class{constructor(e=0){this.offset=e,this.buffer=Tq,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};Ro.BufferReader=Bd});var hw=g(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.Parser=void 0;var me=Od(),Cq=dw(),Fd=1,Aq=4,fw=Fd+Aq,mw=Buffer.allocUnsafe(0),Ld=class{constructor(e){if(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0,this.reader=new Cq.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+fw<=r;){let a=this.buffer[i],s=this.buffer.readUInt32BE(i+Fd),o=Fd+s;if(o+i<=r){let c=this.handlePacket(i+fw,a,s,this.buffer);n(c),i+=o}else break}i===r?(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let i;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;i=Buffer.allocUnsafe(a)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,i){switch(n){case 50:return me.bindComplete;case 49:return me.parseComplete;case 51:return me.closeComplete;case 110:return me.noData;case 115:return me.portalSuspended;case 99:return me.copyDone;case 87:return me.replicationStart;case 73:return me.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 116:return this.parseParameterDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:return new me.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.string(1);return new me.ReadyForQueryMessage(n,i)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring();return new me.CommandCompleteMessage(n,i)}parseCopyData(e,n,r){let i=r.slice(e,e+(n-4));return new me.CopyDataMessage(n,i)}parseCopyInMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyInResponse")}parseCopyOutMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyOutResponse")}parseCopyMessage(e,n,r,i){this.reader.setBuffer(e,r);let a=this.reader.byte()!==0,s=this.reader.int16(),o=new me.CopyResponse(n,i,a,s);for(let c=0;c<s;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.cstring(),s=this.reader.cstring();return new me.NotificationResponseMessage(n,i,a,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.RowDescriptionMessage(n,i);for(let s=0;s<i;s++)a.fields[s]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),r=this.reader.int16(),i=this.reader.uint32(),a=this.reader.int16(),s=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new me.Field(e,n,r,i,a,s,o)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.ParameterDescriptionMessage(n,i);for(let s=0;s<i;s++)a.dataTypeIDs[s]=this.reader.int32();return a}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new Array(i);for(let s=0;s<i;s++){let o=this.reader.int32();a[s]=o===-1?null:this.reader.string(o)}return new me.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring(),a=this.reader.cstring();return new me.ParameterStatusMessage(n,i,a)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.int32();return new me.BackendKeyDataMessage(n,i,a)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a={name:"authenticationOk",length:n};switch(i){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let s=this.reader.bytes(4);return new me.AuthenticationMD5Password(n,s)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let s;do s=this.reader.cstring(),s&&a.mechanisms.push(s);while(s)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return a}parseErrorMessage(e,n,r,i){this.reader.setBuffer(e,r);let a={},s=this.reader.string(1);for(;s!=="\0";)a[s]=this.reader.cstring(),s=this.reader.string(1);let o=a.M,c=i==="notice"?new me.NoticeMessage(n,o):new me.DatabaseError(o,n,i);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};Do.Parser=Ld});var zd=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DatabaseError=ln.serialize=ln.parse=void 0;var Pq=Od();Object.defineProperty(ln,"DatabaseError",{enumerable:!0,get:function(){return Pq.DatabaseError}});var qq=pw();Object.defineProperty(ln,"serialize",{enumerable:!0,get:function(){return qq.serialize}});var Iq=hw();function jq(t,e){let n=new Iq.Parser;return t.on("data",r=>n.parse(r,e)),new Promise(r=>t.on("end",()=>r()))}ln.parse=jq});var vw=g($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.default={}});var yw=g((wF,gw)=>{var{getStream:Nq,getSecureStream:Oq}=Bq();gw.exports={getStream:Nq,getSecureStream:Oq};function Rq(){function t(n){let r=require("net");return new r.Socket}function e(n){return require("tls").connect(n)}return{getStream:t,getSecureStream:e}}function Dq(){function t(n){let{CloudflareSocket:r}=vw();return new r(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:t,getSecureStream:e}}function Mq(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function Bq(){return Mq()?Dq():Rq()}});var Qd=g((SF,xw)=>{"use strict";var Fq=require("events").EventEmitter,{parse:Lq,serialize:Ne}=zd(),{getStream:zq,getSecureStream:$q}=yw(),Uq=Ne.flush(),Qq=Ne.sync(),Vq=Ne.end(),Ud=class extends Fq{constructor(e){super(),e=e||{},this.stream=e.stream||zq(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(r){r==="message"&&(n._emitMessage=!0)})}connect(e,n){let r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")});let i=function(a){r._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||r.emit("error",a)};if(this.stream.on("error",i),this.stream.on("close",function(){r.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:r.stream};r.ssl!==!0&&(Object.assign(o,r.ssl),"key"in r.ssl&&(o.key=r.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(o.servername=n);try{r.stream=$q(o)}catch(u){return r.emit("error",u)}r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")})}attachListeners(e){Lq(e,n=>{let r=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(r,n)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(e){this.stream.write(Ne.startup(e))}cancel(e,n){this._send(Ne.cancel(e,n))}password(e){this._send(Ne.password(e))}sendSASLInitialResponseMessage(e,n){this._send(Ne.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(Ne.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(Ne.query(e))}parse(e){this._send(Ne.parse(e))}bind(e){this._send(Ne.bind(e))}execute(e){this._send(Ne.execute(e))}flush(){this.stream.writable&&this.stream.write(Uq)}sync(){this._ending=!0,this._send(Qq)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Vq,()=>{this.stream.end()})}close(e){this._send(Ne.close(e))}describe(e){this._send(Ne.describe(e))}sendCopyFromChunk(e){this._send(Ne.copyData(e))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(e){this._send(Ne.copyFail(e))}};xw.exports=Ud});var _w=g((_F,Sw)=>{"use strict";var{Transform:Hq}=require("stream"),{StringDecoder:Gq}=require("string_decoder"),pn=Symbol("last"),Mo=Symbol("decoder");function Kq(t,e,n){let r;if(this.overflow){if(r=this[Mo].write(t).split(this.matcher),r.length===1)return n();r.shift(),this.overflow=!1}else this[pn]+=this[Mo].write(t),r=this[pn].split(this.matcher);this[pn]=r.pop();for(let i=0;i<r.length;i++)try{ww(this,this.mapper(r[i]))}catch(a){return n(a)}if(this.overflow=this[pn].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Wq(t){if(this[pn]+=this[Mo].end(),this[pn])try{ww(this,this.mapper(this[pn]))}catch(e){return t(e)}t()}function ww(t,e){e!==void 0&&t.push(e)}function bw(t){return t}function Zq(t,e,n){switch(t=t||/\r?\n/,e=e||bw,n=n||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(n=t,t=/\r?\n/);break;case 2:typeof t=="function"?(n=e,e=t,t=/\r?\n/):typeof e=="object"&&(n=e,e=bw)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Kq,n.flush=Wq,n.readableObjectMode=!0;let r=new Hq(n);return r[pn]="",r[Mo]=new Gq("utf8"),r.matcher=t,r.mapper=e,r.maxLength=n.maxLength,r.skipOverflow=n.skipOverflow||!1,r.overflow=!1,r._destroy=function(i,a){this._writableState.errorEmitted=!1,a(i)},r}Sw.exports=Zq});var Tw=g((EF,Ht)=>{"use strict";var Ew=require("path"),Jq=require("stream").Stream,Xq=_w(),kw=require("util"),Yq=5432,Bo=process.platform==="win32",Ra=process.stderr,e9=56,t9=7,n9=61440,r9=32768;function i9(t){return(t&n9)==r9}var ei=["host","port","database","user","password"],Vd=ei.length,a9=ei[Vd-1];function Hd(){var t=Ra instanceof Jq&&Ra.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
pollmetry-app  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app  | /app/dist/index.cjs:63
pollmetry-app  | `}function j5(){return function(){this.error(404)}}function N5(){return function(e){if(this.hasTrailingSlash()){this.error(404);return}var n=el.original(this.req);n.path=null,n.pathname=q5(n.pathname+"/");var r=k5(A5.format(n)),i=I5("Redirecting","Redirecting to "+T5(r));e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(i)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",r),e.end(i)}}});var xb=g((Je,yb)=>{"use strict";var Gs=cg(),O5=require("events").EventEmitter,mb=lg(),hb=Sx(),R5=wu(),D5=_u(),vb=Kx(),gb=pb();Je=yb.exports=M5;function M5(){var t=function(e,n,r){t.handle(e,n,r)};return mb(t,O5.prototype,!1),mb(t,hb,!1),t.request=Object.create(vb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(gb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}Je.application=hb;Je.request=vb;Je.response=gb;Je.Route=R5;Je.Router=D5;Je.json=Gs.json;Je.query=Eu();Je.raw=Gs.raw;Je.static=fb();Je.text=Gs.text;Je.urlencoded=Gs.urlencoded;var B5=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];B5.forEach(function(t){Object.defineProperty(Je,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var nl=g((Yj,bb)=>{"use strict";bb.exports=xb()});var Yp=g(a1=>{"use strict";a1.parse=function(t,e){return new Xp(t,e).parse()};var Xp=class t{constructor(e,n){this.source=e,this.transform=n||T3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,r,i;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!i)this.dimension++,this.dimension>1&&(r=new t(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);else if(n.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(i&&this.newEntry(!0),i=!i):n.value===","&&!i?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function T3(t){return t}});var ed=g((HB,s1)=>{var C3=Yp();s1.exports={create:function(t,e){return{parse:function(){return C3.parse(t,e)}}}}});var u1=g((GB,c1)=>{"use strict";var A3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,P3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,q3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,I3=/^-?infinity$/;c1.exports=function(e){if(I3.test(e))return Number(e.replace("i","I"));var n=A3.exec(e);if(!n)return j3(e)||null;var r=!!n[8],i=parseInt(n[1],10);r&&(i=o1(i));var a=parseInt(n[2],10)-1,s=n[3],o=parseInt(n[4],10),c=parseInt(n[5],10),u=parseInt(n[6],10),l=n[7];l=l?1e3*parseFloat(l):0;var p,d=N3(e);return d!=null?(p=new Date(Date.UTC(i,a,s,o,c,u,l)),td(i)&&p.setUTCFullYear(i),d!==0&&p.setTime(p.getTime()-d)):(p=new Date(i,a,s,o,c,u,l),td(i)&&p.setFullYear(i)),p};function j3(t){var e=P3.exec(t);if(e){var n=parseInt(e[1],10),r=!!e[4];r&&(n=o1(n));var i=parseInt(e[2],10)-1,a=e[3],s=new Date(n,i,a);return td(n)&&s.setFullYear(n),s}}function N3(t){if(t.endsWith("+00"))return 0;var e=q3.exec(t.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var r=n==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*r*1e3}}function o1(t){return-(t-1)}function td(t){return t>=0&&t<100}});var p1=g((KB,l1)=>{l1.exports=R3;var O3=Object.prototype.hasOwnProperty;function R3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)O3.call(n,r)&&(t[r]=n[r])}return t}});var m1=g((WB,f1)=>{"use strict";var D3=p1();f1.exports=Gr;function Gr(t){if(!(this instanceof Gr))return new Gr(t);D3(this,K3(t))}var M3=["seconds","minutes","hours","days","months","years"];Gr.prototype.toPostgres=function(){var t=M3.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var B3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},F3=["years","months","days"],L3=["hours","minutes","seconds"];Gr.prototype.toISOString=Gr.prototype.toISO=function(){var t=F3.map(n,this).join(""),e=L3.map(n,this).join("");return"P"+t+"T"+e;function n(r){var i=this[r]||0;return r==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+B3[r]}};var nd="([+-]?\\d+)",z3=nd+"\\s+years?",$3=nd+"\\s+mons?",U3=nd+"\\s+days?",Q3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",V3=new RegExp([z3,$3,U3,Q3].map(function(t){return"("+t+")?"}).join("\\s*")),d1={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H3=["hours","minutes","seconds","milliseconds"];function G3(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function K3(t){if(!t)return{};var e=V3.exec(t),n=e[8]==="-";return Object.keys(d1).reduce(function(r,i){var a=d1[i],s=e[a];return!s||(s=i==="milliseconds"?G3(s):parseInt(s,10),!s)||(n&&~H3.indexOf(i)&&(s*=-1),r[i]=s),r},{})}});var v1=g((ZB,h1)=>{"use strict";h1.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var n="",r=0;r<e.length;)if(e[r]!=="\\")n+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))n+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&e[r+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";r+=Math.floor(i/2)*2}return new Buffer(n,"binary")}});var _1=g((JB,S1)=>{var Ca=Yp(),Aa=ed(),Co=u1(),y1=m1(),x1=v1();function Ao(t){return function(n){return n===null?n:t(n)}}function b1(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function W3(t){return t?Ca.parse(t,b1):null}function Z3(t){return parseInt(t,10)}function rd(t){return t?Ca.parse(t,Ao(Z3)):null}function J3(t){return t?Ca.parse(t,Ao(function(e){return w1(e).trim()})):null}var X3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=od(n)),n});return e.parse()},id=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},vt=function(t){if(!t)return null;var e=Aa.create(t);return e.parse()},ad=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=Co(n)),n});return e.parse()},Y3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=y1(n)),n});return e.parse()},eP=function(t){return t?Ca.parse(t,Ao(x1)):null},sd=function(t){return parseInt(t,10)},w1=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},g1=function(t){return t?Ca.parse(t,Ao(JSON.parse)):null},od=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},tP=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",n="",r=!1,i=2;i<t.length-1;i++){if(r||(e+=t[i]),t[i]===")"){r=!0;continue}else if(!r)continue;t[i]!==","&&(n+=t[i])}var a=od(e);return a.radius=parseFloat(n),a},nP=function(t){t(20,w1),t(21,sd),t(23,sd),t(26,sd),t(700,parseFloat),t(701,parseFloat),t(16,b1),t(1082,Co),t(1114,Co),t(1184,Co),t(600,od),t(651,vt),t(718,tP),t(1e3,W3),t(1001,eP),t(1005,rd),t(1007,rd),t(1028,rd),t(1016,J3),t(1017,X3),t(1021,id),t(1022,id),t(1231,id),t(1014,vt),t(1015,vt),t(1008,vt),t(1009,vt),t(1040,vt),t(1041,vt),t(1115,ad),t(1182,ad),t(1185,ad),t(1186,y1),t(1187,Y3),t(17,x1),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,g1),t(3807,g1),t(3907,vt),t(2951,vt),t(791,vt),t(1183,vt),t(1270,vt)};S1.exports={init:nP}});var k1=g((XB,E1)=>{"use strict";var nt=1e6;function rP(t){var e=t.readInt32BE(0),n=t.readUInt32BE(4),r="";e<0&&(e=~e+(n===0),n=~n+1>>>0,r="-");var i="",a,s,o,c,u,l;{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}return a=e%nt,s=4294967296*a+n,o=""+s%nt,r+o+i}E1.exports=rP});var q1=g((YB,P1)=>{var iP=k1(),fe=function(t,e,n,r,i){n=n||0,r=r||!1,i=i||function(f,v,y){return f*Math.pow(2,y)+v};var a=n>>3,s=function(f){return r?~f&255:f},o=255,c=8-n%8;e<c&&(o=255<<8-e&255,c=e),n&&(o=o>>n%8);var u=0;n%8+e>=8&&(u=i(0,s(t[a])&o,c));for(var l=e+n>>3,p=a+1;p<l;p++)u=i(u,s(t[p]),8);var d=(e+n)%8;return d>0&&(u=i(u,s(t[l])>>8-d,d)),u},A1=function(t,e,n){var r=Math.pow(2,n-1)-1,i=fe(t,1),a=fe(t,n,1);if(a===0)return 0;var s=1,o=function(u,l,p){u===0&&(u=1);for(var d=1;d<=p;d++)s/=2,(l&1<<p-d)>0&&(u+=s);return u},c=fe(t,e,n+1,!1,o);return a==Math.pow(2,n+1)-1?c===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,a-r)*c},aP=function(t){return fe(t,1)==1?-1*(fe(t,15,1,!0)+1):fe(t,15,1)},T1=function(t){return fe(t,1)==1?-1*(fe(t,31,1,!0)+1):fe(t,31,1)},sP=function(t){return A1(t,23,8)},oP=function(t){return A1(t,52,11)},cP=function(t){var e=fe(t,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,fe(t,16,16)),r=0,i=[],a=fe(t,16),s=0;s<a;s++)r+=fe(t,16,64+16*s)*n,n/=1e4;var o=Math.pow(10,fe(t,16,48));return(e===0?1:-1)*Math.round(r*o)/o},C1=function(t,e){var n=fe(e,1),r=fe(e,63,1),i=new Date((n===0?1:-1)*r/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(a){this.usec=a},i.getUTCMicroSeconds=function(){return this.usec},i},Pa=function(t){for(var e=fe(t,32),n=fe(t,32,32),r=fe(t,32,64),i=96,a=[],s=0;s<e;s++)a[s]=fe(t,32,i),i+=32,i+=32;var o=function(u){var l=fe(t,32,i);if(i+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=fe(t,l*8,i),i+=l*8,p;if(u==25)return p=t.toString(this.encoding,i>>3,(i+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],d;if(u.length>1){var f=u.shift();for(d=0;d<f;d++)p[d]=c(u,l);u.unshift(f)}else for(d=0;d<u[0];d++)p[d]=o(l);return p};return c(a,r)},uP=function(t){return t.toString("utf8")},lP=function(t){return t===null?null:fe(t,8)>0},pP=function(t){t(20,iP),t(21,aP),t(23,T1),t(26,T1),t(1700,cP),t(700,sP),t(701,oP),t(16,lP),t(1114,C1.bind(null,!1)),t(1184,C1.bind(null,!0)),t(1e3,Pa),t(1007,Pa),t(1016,Pa),t(1008,Pa),t(1009,Pa),t(25,uP)};P1.exports={init:pP}});var j1=g((eF,I1)=>{I1.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var ja=g(Ia=>{var dP=_1(),fP=q1(),mP=ed(),hP=j1();Ia.getTypeParser=vP;Ia.setTypeParser=gP;Ia.arrayParser=mP;Ia.builtins=hP;var qa={text:{},binary:{}};function N1(t){return String(t)}function vP(t,e){return e=e||"text",qa[e]&&qa[e][t]||N1}function gP(t,e,n){typeof e=="function"&&(n=e,e="text"),qa[e][t]=n}dP.init(function(t,e){qa.text[t]=e});fP.init(function(t,e){qa.binary[t]=e})});var Na=g((nF,cd)=>{"use strict";cd.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Kr=ja(),yP=Kr.getTypeParser(20,"text"),xP=Kr.getTypeParser(1016,"text");cd.exports.__defineSetter__("parseInt8",function(t){Kr.setTypeParser(20,"text",t?Kr.getTypeParser(23,"text"):yP),Kr.setTypeParser(1016,"text",t?Kr.getTypeParser(1007,"text"):xP)})});var Wr=g((rF,D1)=>{"use strict";var bP=Na(),O1=require("util"),{isDate:wP}=O1.types||O1;function SP(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function R1(t){let e="{";for(let n=0;n<t.length;n++)if(n>0&&(e=e+","),t[n]===null||typeof t[n]>"u")e=e+"NULL";else if(Array.isArray(t[n]))e=e+R1(t[n]);else if(ArrayBuffer.isView(t[n])){let r=t[n];if(!(r instanceof Buffer)){let i=Buffer.from(r.buffer,r.byteOffset,r.byteLength);i.length===r.byteLength?r=i:r=i.slice(r.byteOffset,r.byteOffset+r.byteLength)}e+="\\\\x"+r.toString("hex")}else e+=SP(Po(t[n]));return e=e+"}",e}var Po=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let n=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return n.length===t.byteLength?n:n.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wP(t)?bP.parseInputDatesAsUTC?kP(t):EP(t):Array.isArray(t)?R1(t):_P(t,e)}return t.toString()};function _P(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Po(t.toPostgres(Po),e)}return JSON.stringify(t)}function EP(t){let e=-t.getTimezoneOffset(),n=t.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);let i=String(n).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(i+="-",e*=-1):i+="+",i+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),r&&(i+=" BC"),i}function kP(t){let e=t.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let r=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return r+="+00:00",n&&(r+=" BC"),r}function TP(t,e,n){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),n&&(t.callback=n),t}var CP=function(t){return'"'+t.replace(/"/g,'""')+'"'},AP=function(t){let e=!1,n="'";if(t==null||typeof t!="string")return"''";for(let r=0;r<t.length;r++){let i=t[r];i==="'"?n+=i+i:i==="\\"?(n+=i+i,e=!0):n+=i}return n+="'",e===!0&&(n=" E"+n),n};D1.exports={prepareValue:function(e){return Po(e)},normalizeQueryConfig:TP,escapeIdentifier:CP,escapeLiteral:AP}});var B1=g((iF,M1)=>{"use strict";var Zr=require("crypto");function ud(t){return Zr.createHash("md5").update(t,"utf-8").digest("hex")}function PP(t,e,n){let r=ud(e+t);return"md5"+ud(Buffer.concat([Buffer.from(r),n]))}function qP(t){return Zr.createHash("sha256").update(t).digest()}function IP(t,e){return t=t.replace(/(\D)-/,"$1"),Zr.createHash(t).update(e).digest()}function jP(t,e){return Zr.createHmac("sha256",t).update(e).digest()}async function NP(t,e,n){return Zr.pbkdf2Sync(t,e,n,32,"sha256")}M1.exports={postgresMd5PasswordHash:PP,randomBytes:Zr.randomBytes,deriveKey:NP,sha256:qP,hashByName:IP,hmacSha256:jP,md5:ud}});var $1=g((aF,z1)=>{var F1=require("crypto");z1.exports={postgresMd5PasswordHash:RP,randomBytes:OP,deriveKey:FP,sha256:DP,hashByName:MP,hmacSha256:BP,md5:ld};var L1=F1.webcrypto||globalThis.crypto,Kn=L1.subtle,pd=new TextEncoder;function OP(t){return L1.getRandomValues(Buffer.alloc(t))}async function ld(t){try{return F1.createHash("md5").update(t,"utf-8").digest("hex")}catch{let n=typeof t=="string"?pd.encode(t):t,r=await Kn.digest("MD5",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function RP(t,e,n){let r=await ld(e+t);return"md5"+await ld(Buffer.concat([Buffer.from(r),n]))}async function DP(t){return await Kn.digest("SHA-256",t)}async function MP(t,e){return await Kn.digest(t,e)}async function BP(t,e){let n=await Kn.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Kn.sign("HMAC",n,pd.encode(e))}async function FP(t,e,n){let r=await Kn.importKey("raw",pd.encode(t),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Kn.deriveBits(i,r,256,["deriveBits"])}});var fd=g((sF,dd)=>{"use strict";var LP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;LP?dd.exports=B1():dd.exports=$1()});var V1=g((oF,Q1)=>{function Wn(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function md(t,e){let n=t[e++];if(n<128)return{length:n,index:e};let r=n&127;if(r>4)throw Wn("bad length",t);n=0;for(let i=0;i<r;i++)n=n<<8|t[e++];return{length:n,index:e}}function U1(t,e){if(t[e++]!==6)throw Wn("non-OID data",t);let{length:n,index:r}=md(t,e);e=r;let i=e+n,a=t[e++],s=(a/40>>0)+"."+a%40;for(;e<i;){let o=0;for(;e<i;){let c=t[e++];if(o=o<<7|c&127,c<128)break}s+="."+o}return{oid:s,index:e}}function Oa(t,e){if(t[e++]!==48)throw Wn("non-sequence data",t);return md(t,e)}function zP(t,e){e===void 0&&(e=0),e=Oa(t,e).index;let{length:n,index:r}=Oa(t,e);e=r+n,e=Oa(t,e).index;let{oid:i,index:a}=U1(t,e);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=Oa(t,e).index,t[e++]!==160)throw Wn("non-tag data",t);e=md(t,e).index,e=Oa(t,e).index;let{oid:s}=U1(t,e);switch(s){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Wn("unknown hash OID "+s,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Wn("Ed448 certificate channel binding is not currently supported by Postgres")}throw Wn("unknown OID "+i,t)}Q1.exports={signatureAlgorithmHashFromCertificate:zP}});var W1=g((cF,K1)=>{"use strict";var un=fd(),{signatureAlgorithmHashFromCertificate:$P}=V1();function UP(t,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let r=n.find(s=>t.includes(s));if(!r)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(r==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=un.randomBytes(18).toString("base64");return{mechanism:r,clientNonce:i,response:(r==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function QP(t,e,n,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=GP(n);if(i.nonce.startsWith(t.clientNonce)){if(i.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+t.clientNonce,s="r="+i.nonce+",s="+i.salt+",i="+i.iteration,o=r?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let I=r.getPeerCertificate().raw,_=$P(I);(_==="MD5"||_==="SHA-1")&&(_="SHA-256");let O=await un.hashByName(_,I);o=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(O)]).toString("base64")}let c="c="+o+",r="+i.nonce,u=a+","+s+","+c,l=Buffer.from(i.salt,"base64"),p=await un.deriveKey(e,l,i.iteration),d=await un.hmacSha256(p,"Client Key"),f=await un.sha256(d),v=await un.hmacSha256(f,u),y=WP(Buffer.from(d),Buffer.from(v)).toString("base64"),b=await un.hmacSha256(p,"Server Key"),E=await un.hmacSha256(b,u);t.message="SASLResponse",t.serverSignature=Buffer.from(E).toString("base64"),t.response=c+",p="+y}function VP(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=KP(e);if(n!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HP(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,n)=>t.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H1(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function G1(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],r=e.substring(2);return[n,r]}))}function GP(t){let e=G1(t),n=e.get("r");if(n){if(!HP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let r=e.get("s");if(r){if(!H1(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(i,10);return{nonce:n,salt:r,iteration:a}}function KP(t){let n=G1(t).get("v");if(n){if(!H1(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function WP(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((n,r)=>t[r]^e[r]))}K1.exports={startSession:UP,continueSession:QP,finalizeSession:VP}});var Io=g((uF,Z1)=>{"use strict";var ZP=ja();function qo(t){this._types=t||ZP,this.text={},this.binary={}}qo.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};qo.prototype.setTypeParser=function(t,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[t]=n};qo.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Z1.exports=qo});var Y1=g((lF,X1)=>{"use strict";function Jr(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let n={},r,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of r.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(r.username),n.password=n.password||decodeURIComponent(r.password),r.protocol=="socket:")return n.host=decodeURI(r.pathname),n.database=r.searchParams.get("db"),n.client_encoding=r.searchParams.get("encoding"),n;let a=i?"":r.hostname;n.host?a&&/^%2f/i.test(a)&&(r.pathname=a+r.pathname):n.host=decodeURIComponent(a),n.port||(n.port=r.port);let s=r.pathname.slice(1)||null;n.database=s?decodeURI(s):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let o=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function JP(t){return Object.entries(t).reduce((n,[r,i])=>(i!=null&&(n[r]=i),n),{})}function J1(t){return Object.entries(t).reduce((n,[r,i])=>{if(r==="ssl"){let a=i;typeof a=="boolean"&&(n[r]=a),typeof a=="object"&&(n[r]=JP(a))}else if(i!=null)if(r==="port"){if(i!==""){let a=parseInt(i,10);if(isNaN(a))throw new Error(`Invalid ${r}: ${i}`);n[r]=a}}else n[r]=i;return n},{})}function XP(t){return J1(Jr(t))}X1.exports=Jr;Jr.parse=Jr;Jr.toClientConfig=J1;Jr.parseIntoClientConfig=XP});var vd=g((pF,nw)=>{"use strict";var YP=require("dns"),tw=Na(),ew=Y1().parse,Ge=function(t,e,n){return n===void 0?n=process.env["PG"+t.toUpperCase()]:n===!1||(n=process.env[n]),e[t]||n||tw[t]},eq=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return tw.ssl},Xr=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},gt=function(t,e,n){let r=e[n];r!=null&&t.push(n+"="+Xr(r))},hd=class{constructor(e){e=typeof e=="string"?ew(e):e||{},e.connectionString&&(e=Object.assign({},e,ew(e.connectionString))),this.user=Ge("user",e),this.database=Ge("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ge("port",e),10),this.host=Ge("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ge("password",e)}),this.binary=Ge("binary",e),this.options=Ge("options",e),this.ssl=typeof e.ssl>"u"?eq():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ge("client_encoding",e),this.replication=Ge("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ge("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ge("fallback_application_name",e,!1),this.statement_timeout=Ge("statement_timeout",e,!1),this.lock_timeout=Ge("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Ge("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ge("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];gt(n,this,"user"),gt(n,this,"password"),gt(n,this,"port"),gt(n,this,"application_name"),gt(n,this,"fallback_application_name"),gt(n,this,"connect_timeout"),gt(n,this,"options");let r=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(gt(n,r,"sslmode"),gt(n,r,"sslca"),gt(n,r,"sslkey"),gt(n,r,"sslcert"),gt(n,r,"sslrootcert"),this.database&&n.push("dbname="+Xr(this.database)),this.replication&&n.push("replication="+Xr(this.replication)),this.host&&n.push("host="+Xr(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Xr(this.client_encoding)),YP.lookup(this.host,function(i,a){return i?e(i,null):(n.push("hostaddr="+Xr(a)),e(null,n.join(" ")))})}};nw.exports=hd});var yd=g((dF,iw)=>{"use strict";var tq=ja(),rw=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gd=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=rw.exec(e.text):n=rw.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let r=0,i=e.length;r<i;r++){let a=e[r];a!==null?n[r]=this._parsers[r](a):n[r]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let r=0,i=e.length;r<i;r++){let a=e[r],s=this.fields[r].name;if(a!==null){let o=this.fields[r].format==="binary"?Buffer.from(a):a;n[s]=this._parsers[r](o)}else n[s]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let r=0;r<e.length;r++){let i=e[r];n[i.name]=null,this._types?this._parsers[r]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[r]=tq.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...n}}};iw.exports=gd});var cw=g((fF,ow)=>{"use strict";var{EventEmitter:nq}=require("events"),aw=yd(),sw=Wr(),xd=class extends nq{constructor(e,n,r){super(),e=sw.normalizeQueryConfig(e,n,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new aw(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new aw(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(r){this._canceledDueToError=r;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:sw.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};ow.exports=xd});var Od=g(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.NoticeMessage=M.DataRowMessage=M.CommandCompleteMessage=M.ReadyForQueryMessage=M.NotificationResponseMessage=M.BackendKeyDataMessage=M.AuthenticationMD5Password=M.ParameterStatusMessage=M.ParameterDescriptionMessage=M.RowDescriptionMessage=M.Field=M.CopyResponse=M.CopyDataMessage=M.DatabaseError=M.copyDone=M.emptyQuery=M.replicationStart=M.portalSuspended=M.noData=M.closeComplete=M.bindComplete=M.parseComplete=void 0;M.parseComplete={name:"parseComplete",length:5};M.bindComplete={name:"bindComplete",length:5};M.closeComplete={name:"closeComplete",length:5};M.noData={name:"noData",length:5};M.portalSuspended={name:"portalSuspended",length:5};M.replicationStart={name:"replicationStart",length:4};M.emptyQuery={name:"emptyQuery",length:4};M.copyDone={name:"copyDone",length:4};var bd=class extends Error{constructor(e,n,r){super(e),this.length=n,this.name=r}};M.DatabaseError=bd;var wd=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};M.CopyDataMessage=wd;var Sd=class{constructor(e,n,r,i){this.length=e,this.name=n,this.binary=r,this.columnTypes=new Array(i)}};M.CopyResponse=Sd;var _d=class{constructor(e,n,r,i,a,s,o){this.name=e,this.tableID=n,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=a,this.dataTypeModifier=s,this.format=o}};M.Field=_d;var Ed=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};M.RowDescriptionMessage=Ed;var kd=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};M.ParameterDescriptionMessage=kd;var Td=class{constructor(e,n,r){this.length=e,this.parameterName=n,this.parameterValue=r,this.name="parameterStatus"}};M.ParameterStatusMessage=Td;var Cd=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};M.AuthenticationMD5Password=Cd;var Ad=class{constructor(e,n,r){this.length=e,this.processID=n,this.secretKey=r,this.name="backendKeyData"}};M.BackendKeyDataMessage=Ad;var Pd=class{constructor(e,n,r,i){this.length=e,this.processId=n,this.channel=r,this.payload=i,this.name="notification"}};M.NotificationResponseMessage=Pd;var qd=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};M.ReadyForQueryMessage=qd;var Id=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};M.CommandCompleteMessage=Id;var jd=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};M.DataRowMessage=jd;var Nd=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};M.NoticeMessage=Nd});var uw=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Writer=void 0;var Rd=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let r=this.buffer,i=r.length+(r.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};jo.Writer=Rd});var pw=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.serialize=void 0;var Dd=uw(),ue=new Dd.Writer,rq=t=>{ue.addInt16(3).addInt16(0);for(let r of Object.keys(t))ue.addCString(r).addCString(t[r]);ue.addCString("client_encoding").addCString("UTF8");let e=ue.addCString("").flush(),n=e.length+4;return new Dd.Writer().addInt32(n).add(e).flush()},iq=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},aq=t=>ue.addCString(t).flush(112),sq=function(t,e){return ue.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ue.flush(112)},oq=function(t){return ue.addString(t).flush(112)},cq=t=>ue.addCString(t).flush(81),lw=[],uq=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=t.types||lw,r=n.length,i=ue.addCString(e).addCString(t.text).addInt16(r);for(let a=0;a<r;a++)i.addInt32(n[a]);return ue.flush(80)},Yr=new Dd.Writer,lq=function(t,e){for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];r==null?(ue.addInt16(0),Yr.addInt32(-1)):r instanceof Buffer?(ue.addInt16(1),Yr.addInt32(r.length),Yr.add(r)):(ue.addInt16(0),Yr.addInt32(Buffer.byteLength(r)),Yr.addString(r))}},pq=(t={})=>{let e=t.portal||"",n=t.statement||"",r=t.binary||!1,i=t.values||lw,a=i.length;return ue.addCString(e).addCString(n),ue.addInt16(a),lq(i,t.valueMapper),ue.addInt16(a),ue.add(Yr.flush()),ue.addInt16(1),ue.addInt16(r?1:0),ue.flush(66)},dq=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fq=t=>{if(!t||!t.portal&&!t.rows)return dq;let e=t.portal||"",n=t.rows||0,r=Buffer.byteLength(e),i=4+r+1+4,a=Buffer.allocUnsafe(1+i);return a[0]=69,a.writeInt32BE(i,1),a.write(e,5,"utf-8"),a[r+5]=0,a.writeUInt32BE(n,a.length-4),a},mq=(t,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(t,8),n.writeInt32BE(e,12),n},Md=(t,e)=>{let r=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+r);return i[0]=t,i.writeInt32BE(r,1),i.write(e,5,"utf-8"),i[r]=0,i},hq=ue.addCString("P").flush(68),vq=ue.addCString("S").flush(68),gq=t=>t.name?Md(68,`${t.type}${t.name||""}`):t.type==="P"?hq:vq,yq=t=>{let e=`${t.type}${t.name||""}`;return Md(67,e)},xq=t=>ue.add(t).flush(100),bq=t=>Md(102,t),No=t=>Buffer.from([t,0,0,0,4]),wq=No(72),Sq=No(83),_q=No(88),Eq=No(99),kq={startup:rq,password:aq,requestSsl:iq,sendSASLInitialResponseMessage:sq,sendSCRAMClientFinalMessage:oq,query:cq,parse:uq,bind:pq,execute:fq,describe:gq,close:yq,flush:()=>wq,sync:()=>Sq,end:()=>_q,copyData:xq,copyDone:()=>Eq,copyFail:bq,cancel:mq};Oo.serialize=kq});var dw=g(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BufferReader=void 0;var Tq=Buffer.allocUnsafe(0),Bd=class{constructor(e=0){this.offset=e,this.buffer=Tq,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};Ro.BufferReader=Bd});var hw=g(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.Parser=void 0;var me=Od(),Cq=dw(),Fd=1,Aq=4,fw=Fd+Aq,mw=Buffer.allocUnsafe(0),Ld=class{constructor(e){if(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0,this.reader=new Cq.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+fw<=r;){let a=this.buffer[i],s=this.buffer.readUInt32BE(i+Fd),o=Fd+s;if(o+i<=r){let c=this.handlePacket(i+fw,a,s,this.buffer);n(c),i+=o}else break}i===r?(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let i;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;i=Buffer.allocUnsafe(a)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,i){switch(n){case 50:return me.bindComplete;case 49:return me.parseComplete;case 51:return me.closeComplete;case 110:return me.noData;case 115:return me.portalSuspended;case 99:return me.copyDone;case 87:return me.replicationStart;case 73:return me.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 116:return this.parseParameterDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:return new me.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.string(1);return new me.ReadyForQueryMessage(n,i)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring();return new me.CommandCompleteMessage(n,i)}parseCopyData(e,n,r){let i=r.slice(e,e+(n-4));return new me.CopyDataMessage(n,i)}parseCopyInMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyInResponse")}parseCopyOutMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyOutResponse")}parseCopyMessage(e,n,r,i){this.reader.setBuffer(e,r);let a=this.reader.byte()!==0,s=this.reader.int16(),o=new me.CopyResponse(n,i,a,s);for(let c=0;c<s;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.cstring(),s=this.reader.cstring();return new me.NotificationResponseMessage(n,i,a,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.RowDescriptionMessage(n,i);for(let s=0;s<i;s++)a.fields[s]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),r=this.reader.int16(),i=this.reader.uint32(),a=this.reader.int16(),s=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new me.Field(e,n,r,i,a,s,o)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.ParameterDescriptionMessage(n,i);for(let s=0;s<i;s++)a.dataTypeIDs[s]=this.reader.int32();return a}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new Array(i);for(let s=0;s<i;s++){let o=this.reader.int32();a[s]=o===-1?null:this.reader.string(o)}return new me.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring(),a=this.reader.cstring();return new me.ParameterStatusMessage(n,i,a)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.int32();return new me.BackendKeyDataMessage(n,i,a)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a={name:"authenticationOk",length:n};switch(i){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let s=this.reader.bytes(4);return new me.AuthenticationMD5Password(n,s)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let s;do s=this.reader.cstring(),s&&a.mechanisms.push(s);while(s)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return a}parseErrorMessage(e,n,r,i){this.reader.setBuffer(e,r);let a={},s=this.reader.string(1);for(;s!=="\0";)a[s]=this.reader.cstring(),s=this.reader.string(1);let o=a.M,c=i==="notice"?new me.NoticeMessage(n,o):new me.DatabaseError(o,n,i);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};Do.Parser=Ld});var zd=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DatabaseError=ln.serialize=ln.parse=void 0;var Pq=Od();Object.defineProperty(ln,"DatabaseError",{enumerable:!0,get:function(){return Pq.DatabaseError}});var qq=pw();Object.defineProperty(ln,"serialize",{enumerable:!0,get:function(){return qq.serialize}});var Iq=hw();function jq(t,e){let n=new Iq.Parser;return t.on("data",r=>n.parse(r,e)),new Promise(r=>t.on("end",()=>r()))}ln.parse=jq});var vw=g($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.default={}});var yw=g((wF,gw)=>{var{getStream:Nq,getSecureStream:Oq}=Bq();gw.exports={getStream:Nq,getSecureStream:Oq};function Rq(){function t(n){let r=require("net");return new r.Socket}function e(n){return require("tls").connect(n)}return{getStream:t,getSecureStream:e}}function Dq(){function t(n){let{CloudflareSocket:r}=vw();return new r(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:t,getSecureStream:e}}function Mq(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function Bq(){return Mq()?Dq():Rq()}});var Qd=g((SF,xw)=>{"use strict";var Fq=require("events").EventEmitter,{parse:Lq,serialize:Ne}=zd(),{getStream:zq,getSecureStream:$q}=yw(),Uq=Ne.flush(),Qq=Ne.sync(),Vq=Ne.end(),Ud=class extends Fq{constructor(e){super(),e=e||{},this.stream=e.stream||zq(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(r){r==="message"&&(n._emitMessage=!0)})}connect(e,n){let r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")});let i=function(a){r._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||r.emit("error",a)};if(this.stream.on("error",i),this.stream.on("close",function(){r.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:r.stream};r.ssl!==!0&&(Object.assign(o,r.ssl),"key"in r.ssl&&(o.key=r.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(o.servername=n);try{r.stream=$q(o)}catch(u){return r.emit("error",u)}r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")})}attachListeners(e){Lq(e,n=>{let r=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(r,n)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(e){this.stream.write(Ne.startup(e))}cancel(e,n){this._send(Ne.cancel(e,n))}password(e){this._send(Ne.password(e))}sendSASLInitialResponseMessage(e,n){this._send(Ne.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(Ne.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(Ne.query(e))}parse(e){this._send(Ne.parse(e))}bind(e){this._send(Ne.bind(e))}execute(e){this._send(Ne.execute(e))}flush(){this.stream.writable&&this.stream.write(Uq)}sync(){this._ending=!0,this._send(Qq)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Vq,()=>{this.stream.end()})}close(e){this._send(Ne.close(e))}describe(e){this._send(Ne.describe(e))}sendCopyFromChunk(e){this._send(Ne.copyData(e))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(e){this._send(Ne.copyFail(e))}};xw.exports=Ud});var _w=g((_F,Sw)=>{"use strict";var{Transform:Hq}=require("stream"),{StringDecoder:Gq}=require("string_decoder"),pn=Symbol("last"),Mo=Symbol("decoder");function Kq(t,e,n){let r;if(this.overflow){if(r=this[Mo].write(t).split(this.matcher),r.length===1)return n();r.shift(),this.overflow=!1}else this[pn]+=this[Mo].write(t),r=this[pn].split(this.matcher);this[pn]=r.pop();for(let i=0;i<r.length;i++)try{ww(this,this.mapper(r[i]))}catch(a){return n(a)}if(this.overflow=this[pn].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Wq(t){if(this[pn]+=this[Mo].end(),this[pn])try{ww(this,this.mapper(this[pn]))}catch(e){return t(e)}t()}function ww(t,e){e!==void 0&&t.push(e)}function bw(t){return t}function Zq(t,e,n){switch(t=t||/\r?\n/,e=e||bw,n=n||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(n=t,t=/\r?\n/);break;case 2:typeof t=="function"?(n=e,e=t,t=/\r?\n/):typeof e=="object"&&(n=e,e=bw)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Kq,n.flush=Wq,n.readableObjectMode=!0;let r=new Hq(n);return r[pn]="",r[Mo]=new Gq("utf8"),r.matcher=t,r.mapper=e,r.maxLength=n.maxLength,r.skipOverflow=n.skipOverflow||!1,r.overflow=!1,r._destroy=function(i,a){this._writableState.errorEmitted=!1,a(i)},r}Sw.exports=Zq});var Tw=g((EF,Ht)=>{"use strict";var Ew=require("path"),Jq=require("stream").Stream,Xq=_w(),kw=require("util"),Yq=5432,Bo=process.platform==="win32",Ra=process.stderr,e9=56,t9=7,n9=61440,r9=32768;function i9(t){return(t&n9)==r9}var ei=["host","port","database","user","password"],Vd=ei.length,a9=ei[Vd-1];function Hd(){var t=Ra instanceof Jq&&Ra.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
pollmetry-app  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app  | /app/dist/index.cjs:63
pollmetry-app  | `}function j5(){return function(){this.error(404)}}function N5(){return function(e){if(this.hasTrailingSlash()){this.error(404);return}var n=el.original(this.req);n.path=null,n.pathname=q5(n.pathname+"/");var r=k5(A5.format(n)),i=I5("Redirecting","Redirecting to "+T5(r));e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(i)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",r),e.end(i)}}});var xb=g((Je,yb)=>{"use strict";var Gs=cg(),O5=require("events").EventEmitter,mb=lg(),hb=Sx(),R5=wu(),D5=_u(),vb=Kx(),gb=pb();Je=yb.exports=M5;function M5(){var t=function(e,n,r){t.handle(e,n,r)};return mb(t,O5.prototype,!1),mb(t,hb,!1),t.request=Object.create(vb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(gb,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}Je.application=hb;Je.request=vb;Je.response=gb;Je.Route=R5;Je.Router=D5;Je.json=Gs.json;Je.query=Eu();Je.raw=Gs.raw;Je.static=fb();Je.text=Gs.text;Je.urlencoded=Gs.urlencoded;var B5=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];B5.forEach(function(t){Object.defineProperty(Je,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var nl=g((Yj,bb)=>{"use strict";bb.exports=xb()});var Yp=g(a1=>{"use strict";a1.parse=function(t,e){return new Xp(t,e).parse()};var Xp=class t{constructor(e,n){this.source=e,this.transform=n||T3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var n;(this.recorded.length>0||e)&&(n=this.recorded.join(""),n==="NULL"&&!e&&(n=null),n!==null&&(n=this.transform(n)),this.entries.push(n),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var n,r,i;for(this.consumeDimensions();!this.isEof();)if(n=this.nextCharacter(),n.value==="{"&&!i)this.dimension++,this.dimension>1&&(r=new t(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);else if(n.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else n.value==='"'&&!n.escaped?(i&&this.newEntry(!0),i=!i):n.value===","&&!i?this.newEntry():this.record(n.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function T3(t){return t}});var ed=g((HB,s1)=>{var C3=Yp();s1.exports={create:function(t,e){return{parse:function(){return C3.parse(t,e)}}}}});var u1=g((GB,c1)=>{"use strict";var A3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,P3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,q3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,I3=/^-?infinity$/;c1.exports=function(e){if(I3.test(e))return Number(e.replace("i","I"));var n=A3.exec(e);if(!n)return j3(e)||null;var r=!!n[8],i=parseInt(n[1],10);r&&(i=o1(i));var a=parseInt(n[2],10)-1,s=n[3],o=parseInt(n[4],10),c=parseInt(n[5],10),u=parseInt(n[6],10),l=n[7];l=l?1e3*parseFloat(l):0;var p,d=N3(e);return d!=null?(p=new Date(Date.UTC(i,a,s,o,c,u,l)),td(i)&&p.setUTCFullYear(i),d!==0&&p.setTime(p.getTime()-d)):(p=new Date(i,a,s,o,c,u,l),td(i)&&p.setFullYear(i)),p};function j3(t){var e=P3.exec(t);if(e){var n=parseInt(e[1],10),r=!!e[4];r&&(n=o1(n));var i=parseInt(e[2],10)-1,a=e[3],s=new Date(n,i,a);return td(n)&&s.setFullYear(n),s}}function N3(t){if(t.endsWith("+00"))return 0;var e=q3.exec(t.split(" ")[1]);if(e){var n=e[1];if(n==="Z")return 0;var r=n==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*r*1e3}}function o1(t){return-(t-1)}function td(t){return t>=0&&t<100}});var p1=g((KB,l1)=>{l1.exports=R3;var O3=Object.prototype.hasOwnProperty;function R3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)O3.call(n,r)&&(t[r]=n[r])}return t}});var m1=g((WB,f1)=>{"use strict";var D3=p1();f1.exports=Gr;function Gr(t){if(!(this instanceof Gr))return new Gr(t);D3(this,K3(t))}var M3=["seconds","minutes","hours","days","months","years"];Gr.prototype.toPostgres=function(){var t=M3.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var n=this[e]||0;return e==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),n+" "+e},this).join(" ")};var B3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},F3=["years","months","days"],L3=["hours","minutes","seconds"];Gr.prototype.toISOString=Gr.prototype.toISO=function(){var t=F3.map(n,this).join(""),e=L3.map(n,this).join("");return"P"+t+"T"+e;function n(r){var i=this[r]||0;return r==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+B3[r]}};var nd="([+-]?\\d+)",z3=nd+"\\s+years?",$3=nd+"\\s+mons?",U3=nd+"\\s+days?",Q3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",V3=new RegExp([z3,$3,U3,Q3].map(function(t){return"("+t+")?"}).join("\\s*")),d1={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H3=["hours","minutes","seconds","milliseconds"];function G3(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function K3(t){if(!t)return{};var e=V3.exec(t),n=e[8]==="-";return Object.keys(d1).reduce(function(r,i){var a=d1[i],s=e[a];return!s||(s=i==="milliseconds"?G3(s):parseInt(s,10),!s)||(n&&~H3.indexOf(i)&&(s*=-1),r[i]=s),r},{})}});var v1=g((ZB,h1)=>{"use strict";h1.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var n="",r=0;r<e.length;)if(e[r]!=="\\")n+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))n+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&e[r+i]==="\\";)i++;for(var a=0;a<Math.floor(i/2);++a)n+="\\";r+=Math.floor(i/2)*2}return new Buffer(n,"binary")}});var _1=g((JB,S1)=>{var Ca=Yp(),Aa=ed(),Co=u1(),y1=m1(),x1=v1();function Ao(t){return function(n){return n===null?n:t(n)}}function b1(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function W3(t){return t?Ca.parse(t,b1):null}function Z3(t){return parseInt(t,10)}function rd(t){return t?Ca.parse(t,Ao(Z3)):null}function J3(t){return t?Ca.parse(t,Ao(function(e){return w1(e).trim()})):null}var X3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=od(n)),n});return e.parse()},id=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=parseFloat(n)),n});return e.parse()},vt=function(t){if(!t)return null;var e=Aa.create(t);return e.parse()},ad=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=Co(n)),n});return e.parse()},Y3=function(t){if(!t)return null;var e=Aa.create(t,function(n){return n!==null&&(n=y1(n)),n});return e.parse()},eP=function(t){return t?Ca.parse(t,Ao(x1)):null},sd=function(t){return parseInt(t,10)},w1=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},g1=function(t){return t?Ca.parse(t,Ao(JSON.parse)):null},od=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},tP=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",n="",r=!1,i=2;i<t.length-1;i++){if(r||(e+=t[i]),t[i]===")"){r=!0;continue}else if(!r)continue;t[i]!==","&&(n+=t[i])}var a=od(e);return a.radius=parseFloat(n),a},nP=function(t){t(20,w1),t(21,sd),t(23,sd),t(26,sd),t(700,parseFloat),t(701,parseFloat),t(16,b1),t(1082,Co),t(1114,Co),t(1184,Co),t(600,od),t(651,vt),t(718,tP),t(1e3,W3),t(1001,eP),t(1005,rd),t(1007,rd),t(1028,rd),t(1016,J3),t(1017,X3),t(1021,id),t(1022,id),t(1231,id),t(1014,vt),t(1015,vt),t(1008,vt),t(1009,vt),t(1040,vt),t(1041,vt),t(1115,ad),t(1182,ad),t(1185,ad),t(1186,y1),t(1187,Y3),t(17,x1),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,g1),t(3807,g1),t(3907,vt),t(2951,vt),t(791,vt),t(1183,vt),t(1270,vt)};S1.exports={init:nP}});var k1=g((XB,E1)=>{"use strict";var nt=1e6;function rP(t){var e=t.readInt32BE(0),n=t.readUInt32BE(4),r="";e<0&&(e=~e+(n===0),n=~n+1>>>0,r="-");var i="",a,s,o,c,u,l;{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}{if(a=e%nt,e=e/nt>>>0,s=4294967296*a+n,n=s/nt>>>0,o=""+(s-nt*n),n===0&&e===0)return r+o+i;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";i=c+o+i}return a=e%nt,s=4294967296*a+n,o=""+s%nt,r+o+i}E1.exports=rP});var q1=g((YB,P1)=>{var iP=k1(),fe=function(t,e,n,r,i){n=n||0,r=r||!1,i=i||function(f,v,y){return f*Math.pow(2,y)+v};var a=n>>3,s=function(f){return r?~f&255:f},o=255,c=8-n%8;e<c&&(o=255<<8-e&255,c=e),n&&(o=o>>n%8);var u=0;n%8+e>=8&&(u=i(0,s(t[a])&o,c));for(var l=e+n>>3,p=a+1;p<l;p++)u=i(u,s(t[p]),8);var d=(e+n)%8;return d>0&&(u=i(u,s(t[l])>>8-d,d)),u},A1=function(t,e,n){var r=Math.pow(2,n-1)-1,i=fe(t,1),a=fe(t,n,1);if(a===0)return 0;var s=1,o=function(u,l,p){u===0&&(u=1);for(var d=1;d<=p;d++)s/=2,(l&1<<p-d)>0&&(u+=s);return u},c=fe(t,e,n+1,!1,o);return a==Math.pow(2,n+1)-1?c===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,a-r)*c},aP=function(t){return fe(t,1)==1?-1*(fe(t,15,1,!0)+1):fe(t,15,1)},T1=function(t){return fe(t,1)==1?-1*(fe(t,31,1,!0)+1):fe(t,31,1)},sP=function(t){return A1(t,23,8)},oP=function(t){return A1(t,52,11)},cP=function(t){var e=fe(t,16,32);if(e==49152)return NaN;for(var n=Math.pow(1e4,fe(t,16,16)),r=0,i=[],a=fe(t,16),s=0;s<a;s++)r+=fe(t,16,64+16*s)*n,n/=1e4;var o=Math.pow(10,fe(t,16,48));return(e===0?1:-1)*Math.round(r*o)/o},C1=function(t,e){var n=fe(e,1),r=fe(e,63,1),i=new Date((n===0?1:-1)*r/1e3+9466848e5);return t||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(a){this.usec=a},i.getUTCMicroSeconds=function(){return this.usec},i},Pa=function(t){for(var e=fe(t,32),n=fe(t,32,32),r=fe(t,32,64),i=96,a=[],s=0;s<e;s++)a[s]=fe(t,32,i),i+=32,i+=32;var o=function(u){var l=fe(t,32,i);if(i+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=fe(t,l*8,i),i+=l*8,p;if(u==25)return p=t.toString(this.encoding,i>>3,(i+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],d;if(u.length>1){var f=u.shift();for(d=0;d<f;d++)p[d]=c(u,l);u.unshift(f)}else for(d=0;d<u[0];d++)p[d]=o(l);return p};return c(a,r)},uP=function(t){return t.toString("utf8")},lP=function(t){return t===null?null:fe(t,8)>0},pP=function(t){t(20,iP),t(21,aP),t(23,T1),t(26,T1),t(1700,cP),t(700,sP),t(701,oP),t(16,lP),t(1114,C1.bind(null,!1)),t(1184,C1.bind(null,!0)),t(1e3,Pa),t(1007,Pa),t(1016,Pa),t(1008,Pa),t(1009,Pa),t(25,uP)};P1.exports={init:pP}});var j1=g((eF,I1)=>{I1.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var ja=g(Ia=>{var dP=_1(),fP=q1(),mP=ed(),hP=j1();Ia.getTypeParser=vP;Ia.setTypeParser=gP;Ia.arrayParser=mP;Ia.builtins=hP;var qa={text:{},binary:{}};function N1(t){return String(t)}function vP(t,e){return e=e||"text",qa[e]&&qa[e][t]||N1}function gP(t,e,n){typeof e=="function"&&(n=e,e="text"),qa[e][t]=n}dP.init(function(t,e){qa.text[t]=e});fP.init(function(t,e){qa.binary[t]=e})});var Na=g((nF,cd)=>{"use strict";cd.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Kr=ja(),yP=Kr.getTypeParser(20,"text"),xP=Kr.getTypeParser(1016,"text");cd.exports.__defineSetter__("parseInt8",function(t){Kr.setTypeParser(20,"text",t?Kr.getTypeParser(23,"text"):yP),Kr.setTypeParser(1016,"text",t?Kr.getTypeParser(1007,"text"):xP)})});var Wr=g((rF,D1)=>{"use strict";var bP=Na(),O1=require("util"),{isDate:wP}=O1.types||O1;function SP(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function R1(t){let e="{";for(let n=0;n<t.length;n++)if(n>0&&(e=e+","),t[n]===null||typeof t[n]>"u")e=e+"NULL";else if(Array.isArray(t[n]))e=e+R1(t[n]);else if(ArrayBuffer.isView(t[n])){let r=t[n];if(!(r instanceof Buffer)){let i=Buffer.from(r.buffer,r.byteOffset,r.byteLength);i.length===r.byteLength?r=i:r=i.slice(r.byteOffset,r.byteOffset+r.byteLength)}e+="\\\\x"+r.toString("hex")}else e+=SP(Po(t[n]));return e=e+"}",e}var Po=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let n=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return n.length===t.byteLength?n:n.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wP(t)?bP.parseInputDatesAsUTC?kP(t):EP(t):Array.isArray(t)?R1(t):_P(t,e)}return t.toString()};function _P(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Po(t.toPostgres(Po),e)}return JSON.stringify(t)}function EP(t){let e=-t.getTimezoneOffset(),n=t.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);let i=String(n).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(i+="-",e*=-1):i+="+",i+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),r&&(i+=" BC"),i}function kP(t){let e=t.getUTCFullYear(),n=e<1;n&&(e=Math.abs(e)+1);let r=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return r+="+00:00",n&&(r+=" BC"),r}function TP(t,e,n){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),n&&(t.callback=n),t}var CP=function(t){return'"'+t.replace(/"/g,'""')+'"'},AP=function(t){let e=!1,n="'";if(t==null||typeof t!="string")return"''";for(let r=0;r<t.length;r++){let i=t[r];i==="'"?n+=i+i:i==="\\"?(n+=i+i,e=!0):n+=i}return n+="'",e===!0&&(n=" E"+n),n};D1.exports={prepareValue:function(e){return Po(e)},normalizeQueryConfig:TP,escapeIdentifier:CP,escapeLiteral:AP}});var B1=g((iF,M1)=>{"use strict";var Zr=require("crypto");function ud(t){return Zr.createHash("md5").update(t,"utf-8").digest("hex")}function PP(t,e,n){let r=ud(e+t);return"md5"+ud(Buffer.concat([Buffer.from(r),n]))}function qP(t){return Zr.createHash("sha256").update(t).digest()}function IP(t,e){return t=t.replace(/(\D)-/,"$1"),Zr.createHash(t).update(e).digest()}function jP(t,e){return Zr.createHmac("sha256",t).update(e).digest()}async function NP(t,e,n){return Zr.pbkdf2Sync(t,e,n,32,"sha256")}M1.exports={postgresMd5PasswordHash:PP,randomBytes:Zr.randomBytes,deriveKey:NP,sha256:qP,hashByName:IP,hmacSha256:jP,md5:ud}});var $1=g((aF,z1)=>{var F1=require("crypto");z1.exports={postgresMd5PasswordHash:RP,randomBytes:OP,deriveKey:FP,sha256:DP,hashByName:MP,hmacSha256:BP,md5:ld};var L1=F1.webcrypto||globalThis.crypto,Kn=L1.subtle,pd=new TextEncoder;function OP(t){return L1.getRandomValues(Buffer.alloc(t))}async function ld(t){try{return F1.createHash("md5").update(t,"utf-8").digest("hex")}catch{let n=typeof t=="string"?pd.encode(t):t,r=await Kn.digest("MD5",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function RP(t,e,n){let r=await ld(e+t);return"md5"+await ld(Buffer.concat([Buffer.from(r),n]))}async function DP(t){return await Kn.digest("SHA-256",t)}async function MP(t,e){return await Kn.digest(t,e)}async function BP(t,e){let n=await Kn.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Kn.sign("HMAC",n,pd.encode(e))}async function FP(t,e,n){let r=await Kn.importKey("raw",pd.encode(t),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:n};return await Kn.deriveBits(i,r,256,["deriveBits"])}});var fd=g((sF,dd)=>{"use strict";var LP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;LP?dd.exports=B1():dd.exports=$1()});var V1=g((oF,Q1)=>{function Wn(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function md(t,e){let n=t[e++];if(n<128)return{length:n,index:e};let r=n&127;if(r>4)throw Wn("bad length",t);n=0;for(let i=0;i<r;i++)n=n<<8|t[e++];return{length:n,index:e}}function U1(t,e){if(t[e++]!==6)throw Wn("non-OID data",t);let{length:n,index:r}=md(t,e);e=r;let i=e+n,a=t[e++],s=(a/40>>0)+"."+a%40;for(;e<i;){let o=0;for(;e<i;){let c=t[e++];if(o=o<<7|c&127,c<128)break}s+="."+o}return{oid:s,index:e}}function Oa(t,e){if(t[e++]!==48)throw Wn("non-sequence data",t);return md(t,e)}function zP(t,e){e===void 0&&(e=0),e=Oa(t,e).index;let{length:n,index:r}=Oa(t,e);e=r+n,e=Oa(t,e).index;let{oid:i,index:a}=U1(t,e);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=a,e=Oa(t,e).index,t[e++]!==160)throw Wn("non-tag data",t);e=md(t,e).index,e=Oa(t,e).index;let{oid:s}=U1(t,e);switch(s){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Wn("unknown hash OID "+s,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Wn("Ed448 certificate channel binding is not currently supported by Postgres")}throw Wn("unknown OID "+i,t)}Q1.exports={signatureAlgorithmHashFromCertificate:zP}});var W1=g((cF,K1)=>{"use strict";var un=fd(),{signatureAlgorithmHashFromCertificate:$P}=V1();function UP(t,e){let n=["SCRAM-SHA-256"];e&&n.unshift("SCRAM-SHA-256-PLUS");let r=n.find(s=>t.includes(s));if(!r)throw new Error("SASL: Only mechanism(s) "+n.join(" and ")+" are supported");if(r==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=un.randomBytes(18).toString("base64");return{mechanism:r,clientNonce:i,response:(r==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function QP(t,e,n,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=GP(n);if(i.nonce.startsWith(t.clientNonce)){if(i.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let a="n=*,r="+t.clientNonce,s="r="+i.nonce+",s="+i.salt+",i="+i.iteration,o=r?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let I=r.getPeerCertificate().raw,_=$P(I);(_==="MD5"||_==="SHA-1")&&(_="SHA-256");let O=await un.hashByName(_,I);o=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(O)]).toString("base64")}let c="c="+o+",r="+i.nonce,u=a+","+s+","+c,l=Buffer.from(i.salt,"base64"),p=await un.deriveKey(e,l,i.iteration),d=await un.hmacSha256(p,"Client Key"),f=await un.sha256(d),v=await un.hmacSha256(f,u),y=WP(Buffer.from(d),Buffer.from(v)).toString("base64"),b=await un.hmacSha256(p,"Server Key"),E=await un.hmacSha256(b,u);t.message="SASLResponse",t.serverSignature=Buffer.from(E).toString("base64"),t.response=c+",p="+y}function VP(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=KP(e);if(n!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HP(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,n)=>t.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H1(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function G1(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let n=e[0],r=e.substring(2);return[n,r]}))}function GP(t){let e=G1(t),n=e.get("r");if(n){if(!HP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let r=e.get("s");if(r){if(!H1(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let a=parseInt(i,10);return{nonce:n,salt:r,iteration:a}}function KP(t){let n=G1(t).get("v");if(n){if(!H1(n))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:n}}function WP(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((n,r)=>t[r]^e[r]))}K1.exports={startSession:UP,continueSession:QP,finalizeSession:VP}});var Io=g((uF,Z1)=>{"use strict";var ZP=ja();function qo(t){this._types=t||ZP,this.text={},this.binary={}}qo.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};qo.prototype.setTypeParser=function(t,e,n){typeof e=="function"&&(n=e,e="text"),this.getOverrides(e)[t]=n};qo.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Z1.exports=qo});var Y1=g((lF,X1)=>{"use strict";function Jr(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let n={},r,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of r.searchParams.entries())n[c[0]]=c[1];if(n.user=n.user||decodeURIComponent(r.username),n.password=n.password||decodeURIComponent(r.password),r.protocol=="socket:")return n.host=decodeURI(r.pathname),n.database=r.searchParams.get("db"),n.client_encoding=r.searchParams.get("encoding"),n;let a=i?"":r.hostname;n.host?a&&/^%2f/i.test(a)&&(r.pathname=a+r.pathname):n.host=decodeURIComponent(a),n.port||(n.port=r.port);let s=r.pathname.slice(1)||null;n.database=s?decodeURI(s):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let o=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;if(n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),e.useLibpqCompat&&n.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(n.uselibpqcompat==="true"||e.useLibpqCompat)switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":{n.ssl.rejectUnauthorized=!1;break}case"require":{n.sslrootcert?n.ssl.checkServerIdentity=function(){}:n.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!n.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");n.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}function JP(t){return Object.entries(t).reduce((n,[r,i])=>(i!=null&&(n[r]=i),n),{})}function J1(t){return Object.entries(t).reduce((n,[r,i])=>{if(r==="ssl"){let a=i;typeof a=="boolean"&&(n[r]=a),typeof a=="object"&&(n[r]=JP(a))}else if(i!=null)if(r==="port"){if(i!==""){let a=parseInt(i,10);if(isNaN(a))throw new Error(`Invalid ${r}: ${i}`);n[r]=a}}else n[r]=i;return n},{})}function XP(t){return J1(Jr(t))}X1.exports=Jr;Jr.parse=Jr;Jr.toClientConfig=J1;Jr.parseIntoClientConfig=XP});var vd=g((pF,nw)=>{"use strict";var YP=require("dns"),tw=Na(),ew=Y1().parse,Ge=function(t,e,n){return n===void 0?n=process.env["PG"+t.toUpperCase()]:n===!1||(n=process.env[n]),e[t]||n||tw[t]},eq=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return tw.ssl},Xr=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},gt=function(t,e,n){let r=e[n];r!=null&&t.push(n+"="+Xr(r))},hd=class{constructor(e){e=typeof e=="string"?ew(e):e||{},e.connectionString&&(e=Object.assign({},e,ew(e.connectionString))),this.user=Ge("user",e),this.database=Ge("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ge("port",e),10),this.host=Ge("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ge("password",e)}),this.binary=Ge("binary",e),this.options=Ge("options",e),this.ssl=typeof e.ssl>"u"?eq():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ge("client_encoding",e),this.replication=Ge("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ge("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ge("fallback_application_name",e,!1),this.statement_timeout=Ge("statement_timeout",e,!1),this.lock_timeout=Ge("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Ge("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ge("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let n=[];gt(n,this,"user"),gt(n,this,"password"),gt(n,this,"port"),gt(n,this,"application_name"),gt(n,this,"fallback_application_name"),gt(n,this,"connect_timeout"),gt(n,this,"options");let r=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(gt(n,r,"sslmode"),gt(n,r,"sslca"),gt(n,r,"sslkey"),gt(n,r,"sslcert"),gt(n,r,"sslrootcert"),this.database&&n.push("dbname="+Xr(this.database)),this.replication&&n.push("replication="+Xr(this.replication)),this.host&&n.push("host="+Xr(this.host)),this.isDomainSocket)return e(null,n.join(" "));this.client_encoding&&n.push("client_encoding="+Xr(this.client_encoding)),YP.lookup(this.host,function(i,a){return i?e(i,null):(n.push("hostaddr="+Xr(a)),e(null,n.join(" ")))})}};nw.exports=hd});var yd=g((dF,iw)=>{"use strict";var tq=ja(),rw=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gd=class{constructor(e,n){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=n,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let n;e.text?n=rw.exec(e.text):n=rw.exec(e.command),n&&(this.command=n[1],n[3]?(this.oid=parseInt(n[2],10),this.rowCount=parseInt(n[3],10)):n[2]&&(this.rowCount=parseInt(n[2],10)))}_parseRowAsArray(e){let n=new Array(e.length);for(let r=0,i=e.length;r<i;r++){let a=e[r];a!==null?n[r]=this._parsers[r](a):n[r]=null}return n}parseRow(e){let n={...this._prebuiltEmptyResultObject};for(let r=0,i=e.length;r<i;r++){let a=e[r],s=this.fields[r].name;if(a!==null){let o=this.fields[r].format==="binary"?Buffer.from(a):a;n[s]=this._parsers[r](o)}else n[s]=null}return n}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let n={};for(let r=0;r<e.length;r++){let i=e[r];n[i.name]=null,this._types?this._parsers[r]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[r]=tq.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...n}}};iw.exports=gd});var cw=g((fF,ow)=>{"use strict";var{EventEmitter:nq}=require("events"),aw=yd(),sw=Wr(),xd=class extends nq{constructor(e,n,r){super(),e=sw.normalizeQueryConfig(e,n,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new aw(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new aw(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let n;if(!this._canceledDueToError){try{n=this._result.parseRow(e.fields)}catch(r){this._canceledDueToError=r;return}this.emit("row",n,this._result),this._accumulateRows&&this._result.addRow(n)}}handleCommandComplete(e,n){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&n.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,n){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(n){process.nextTick(()=>{throw n})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let n=e.parsedStatements[this.name];if(this.text&&n&&this.text!==n)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,n){e.execute({portal:this.portal,rows:n}),n?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:sw.prepareValue})}catch(n){this.handleError(n,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,n){}};ow.exports=xd});var Od=g(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.NoticeMessage=M.DataRowMessage=M.CommandCompleteMessage=M.ReadyForQueryMessage=M.NotificationResponseMessage=M.BackendKeyDataMessage=M.AuthenticationMD5Password=M.ParameterStatusMessage=M.ParameterDescriptionMessage=M.RowDescriptionMessage=M.Field=M.CopyResponse=M.CopyDataMessage=M.DatabaseError=M.copyDone=M.emptyQuery=M.replicationStart=M.portalSuspended=M.noData=M.closeComplete=M.bindComplete=M.parseComplete=void 0;M.parseComplete={name:"parseComplete",length:5};M.bindComplete={name:"bindComplete",length:5};M.closeComplete={name:"closeComplete",length:5};M.noData={name:"noData",length:5};M.portalSuspended={name:"portalSuspended",length:5};M.replicationStart={name:"replicationStart",length:4};M.emptyQuery={name:"emptyQuery",length:4};M.copyDone={name:"copyDone",length:4};var bd=class extends Error{constructor(e,n,r){super(e),this.length=n,this.name=r}};M.DatabaseError=bd;var wd=class{constructor(e,n){this.length=e,this.chunk=n,this.name="copyData"}};M.CopyDataMessage=wd;var Sd=class{constructor(e,n,r,i){this.length=e,this.name=n,this.binary=r,this.columnTypes=new Array(i)}};M.CopyResponse=Sd;var _d=class{constructor(e,n,r,i,a,s,o){this.name=e,this.tableID=n,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=a,this.dataTypeModifier=s,this.format=o}};M.Field=_d;var Ed=class{constructor(e,n){this.length=e,this.fieldCount=n,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};M.RowDescriptionMessage=Ed;var kd=class{constructor(e,n){this.length=e,this.parameterCount=n,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};M.ParameterDescriptionMessage=kd;var Td=class{constructor(e,n,r){this.length=e,this.parameterName=n,this.parameterValue=r,this.name="parameterStatus"}};M.ParameterStatusMessage=Td;var Cd=class{constructor(e,n){this.length=e,this.salt=n,this.name="authenticationMD5Password"}};M.AuthenticationMD5Password=Cd;var Ad=class{constructor(e,n,r){this.length=e,this.processID=n,this.secretKey=r,this.name="backendKeyData"}};M.BackendKeyDataMessage=Ad;var Pd=class{constructor(e,n,r,i){this.length=e,this.processId=n,this.channel=r,this.payload=i,this.name="notification"}};M.NotificationResponseMessage=Pd;var qd=class{constructor(e,n){this.length=e,this.status=n,this.name="readyForQuery"}};M.ReadyForQueryMessage=qd;var Id=class{constructor(e,n){this.length=e,this.text=n,this.name="commandComplete"}};M.CommandCompleteMessage=Id;var jd=class{constructor(e,n){this.length=e,this.fields=n,this.name="dataRow",this.fieldCount=n.length}};M.DataRowMessage=jd;var Nd=class{constructor(e,n){this.length=e,this.message=n,this.name="notice"}};M.NoticeMessage=Nd});var uw=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Writer=void 0;var Rd=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let r=this.buffer,i=r.length+(r.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let n=Buffer.byteLength(e);this.ensure(n+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=n}return this.buffer[this.offset++]=0,this}addString(e=""){let n=Buffer.byteLength(e);return this.ensure(n),this.buffer.write(e,this.offset),this.offset+=n,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let n=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(n,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let n=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),n}};jo.Writer=Rd});var pw=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.serialize=void 0;var Dd=uw(),ue=new Dd.Writer,rq=t=>{ue.addInt16(3).addInt16(0);for(let r of Object.keys(t))ue.addCString(r).addCString(t[r]);ue.addCString("client_encoding").addCString("UTF8");let e=ue.addCString("").flush(),n=e.length+4;return new Dd.Writer().addInt32(n).add(e).flush()},iq=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},aq=t=>ue.addCString(t).flush(112),sq=function(t,e){return ue.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ue.flush(112)},oq=function(t){return ue.addString(t).flush(112)},cq=t=>ue.addCString(t).flush(81),lw=[],uq=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=t.types||lw,r=n.length,i=ue.addCString(e).addCString(t.text).addInt16(r);for(let a=0;a<r;a++)i.addInt32(n[a]);return ue.flush(80)},Yr=new Dd.Writer,lq=function(t,e){for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];r==null?(ue.addInt16(0),Yr.addInt32(-1)):r instanceof Buffer?(ue.addInt16(1),Yr.addInt32(r.length),Yr.add(r)):(ue.addInt16(0),Yr.addInt32(Buffer.byteLength(r)),Yr.addString(r))}},pq=(t={})=>{let e=t.portal||"",n=t.statement||"",r=t.binary||!1,i=t.values||lw,a=i.length;return ue.addCString(e).addCString(n),ue.addInt16(a),lq(i,t.valueMapper),ue.addInt16(a),ue.add(Yr.flush()),ue.addInt16(1),ue.addInt16(r?1:0),ue.flush(66)},dq=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fq=t=>{if(!t||!t.portal&&!t.rows)return dq;let e=t.portal||"",n=t.rows||0,r=Buffer.byteLength(e),i=4+r+1+4,a=Buffer.allocUnsafe(1+i);return a[0]=69,a.writeInt32BE(i,1),a.write(e,5,"utf-8"),a[r+5]=0,a.writeUInt32BE(n,a.length-4),a},mq=(t,e)=>{let n=Buffer.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(t,8),n.writeInt32BE(e,12),n},Md=(t,e)=>{let r=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+r);return i[0]=t,i.writeInt32BE(r,1),i.write(e,5,"utf-8"),i[r]=0,i},hq=ue.addCString("P").flush(68),vq=ue.addCString("S").flush(68),gq=t=>t.name?Md(68,`${t.type}${t.name||""}`):t.type==="P"?hq:vq,yq=t=>{let e=`${t.type}${t.name||""}`;return Md(67,e)},xq=t=>ue.add(t).flush(100),bq=t=>Md(102,t),No=t=>Buffer.from([t,0,0,0,4]),wq=No(72),Sq=No(83),_q=No(88),Eq=No(99),kq={startup:rq,password:aq,requestSsl:iq,sendSASLInitialResponseMessage:sq,sendSCRAMClientFinalMessage:oq,query:cq,parse:uq,bind:pq,execute:fq,describe:gq,close:yq,flush:()=>wq,sync:()=>Sq,end:()=>_q,copyData:xq,copyDone:()=>Eq,copyFail:bq,cancel:mq};Oo.serialize=kq});var dw=g(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BufferReader=void 0;var Tq=Buffer.allocUnsafe(0),Bd=class{constructor(e=0){this.offset=e,this.buffer=Tq,this.encoding="utf-8"}setBuffer(e,n){this.offset=e,this.buffer=n}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let n=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,n}cstring(){let e=this.offset,n=e;for(;this.buffer[n++]!==0;);return this.offset=n,this.buffer.toString(this.encoding,e,n-1)}bytes(e){let n=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}};Ro.BufferReader=Bd});var hw=g(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.Parser=void 0;var me=Od(),Cq=dw(),Fd=1,Aq=4,fw=Fd+Aq,mw=Buffer.allocUnsafe(0),Ld=class{constructor(e){if(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0,this.reader=new Cq.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,n){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+fw<=r;){let a=this.buffer[i],s=this.buffer.readUInt32BE(i+Fd),o=Fd+s;if(o+i<=r){let c=this.handlePacket(i+fw,a,s,this.buffer);n(c),i+=o}else break}i===r?(this.buffer=mw,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let n=this.bufferLength+e.byteLength;if(n+this.bufferOffset>this.buffer.byteLength){let i;if(n<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let a=this.buffer.byteLength*2;for(;n>=a;)a*=2;i=Buffer.allocUnsafe(a)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=n}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,i){switch(n){case 50:return me.bindComplete;case 49:return me.parseComplete;case 51:return me.closeComplete;case 110:return me.noData;case 115:return me.portalSuspended;case 99:return me.copyDone;case 87:return me.replicationStart;case 73:return me.emptyQuery;case 68:return this.parseDataRowMessage(e,r,i);case 67:return this.parseCommandCompleteMessage(e,r,i);case 90:return this.parseReadyForQueryMessage(e,r,i);case 65:return this.parseNotificationMessage(e,r,i);case 82:return this.parseAuthenticationResponse(e,r,i);case 83:return this.parseParameterStatusMessage(e,r,i);case 75:return this.parseBackendKeyData(e,r,i);case 69:return this.parseErrorMessage(e,r,i,"error");case 78:return this.parseErrorMessage(e,r,i,"notice");case 84:return this.parseRowDescriptionMessage(e,r,i);case 116:return this.parseParameterDescriptionMessage(e,r,i);case 71:return this.parseCopyInMessage(e,r,i);case 72:return this.parseCopyOutMessage(e,r,i);case 100:return this.parseCopyData(e,r,i);default:return new me.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.string(1);return new me.ReadyForQueryMessage(n,i)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring();return new me.CommandCompleteMessage(n,i)}parseCopyData(e,n,r){let i=r.slice(e,e+(n-4));return new me.CopyDataMessage(n,i)}parseCopyInMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyInResponse")}parseCopyOutMessage(e,n,r){return this.parseCopyMessage(e,n,r,"copyOutResponse")}parseCopyMessage(e,n,r,i){this.reader.setBuffer(e,r);let a=this.reader.byte()!==0,s=this.reader.int16(),o=new me.CopyResponse(n,i,a,s);for(let c=0;c<s;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.cstring(),s=this.reader.cstring();return new me.NotificationResponseMessage(n,i,a,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.RowDescriptionMessage(n,i);for(let s=0;s<i;s++)a.fields[s]=this.parseField();return a}parseField(){let e=this.reader.cstring(),n=this.reader.uint32(),r=this.reader.int16(),i=this.reader.uint32(),a=this.reader.int16(),s=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new me.Field(e,n,r,i,a,s,o)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new me.ParameterDescriptionMessage(n,i);for(let s=0;s<i;s++)a.dataTypeIDs[s]=this.reader.int32();return a}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int16(),a=new Array(i);for(let s=0;s<i;s++){let o=this.reader.int32();a[s]=o===-1?null:this.reader.string(o)}return new me.DataRowMessage(n,a)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.cstring(),a=this.reader.cstring();return new me.ParameterStatusMessage(n,i,a)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a=this.reader.int32();return new me.BackendKeyDataMessage(n,i,a)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let i=this.reader.int32(),a={name:"authenticationOk",length:n};switch(i){case 0:break;case 3:a.length===8&&(a.name="authenticationCleartextPassword");break;case 5:if(a.length===12){a.name="authenticationMD5Password";let s=this.reader.bytes(4);return new me.AuthenticationMD5Password(n,s)}break;case 10:{a.name="authenticationSASL",a.mechanisms=[];let s;do s=this.reader.cstring(),s&&a.mechanisms.push(s);while(s)}break;case 11:a.name="authenticationSASLContinue",a.data=this.reader.string(n-8);break;case 12:a.name="authenticationSASLFinal",a.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return a}parseErrorMessage(e,n,r,i){this.reader.setBuffer(e,r);let a={},s=this.reader.string(1);for(;s!=="\0";)a[s]=this.reader.cstring(),s=this.reader.string(1);let o=a.M,c=i==="notice"?new me.NoticeMessage(n,o):new me.DatabaseError(o,n,i);return c.severity=a.S,c.code=a.C,c.detail=a.D,c.hint=a.H,c.position=a.P,c.internalPosition=a.p,c.internalQuery=a.q,c.where=a.W,c.schema=a.s,c.table=a.t,c.column=a.c,c.dataType=a.d,c.constraint=a.n,c.file=a.F,c.line=a.L,c.routine=a.R,c}};Do.Parser=Ld});var zd=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DatabaseError=ln.serialize=ln.parse=void 0;var Pq=Od();Object.defineProperty(ln,"DatabaseError",{enumerable:!0,get:function(){return Pq.DatabaseError}});var qq=pw();Object.defineProperty(ln,"serialize",{enumerable:!0,get:function(){return qq.serialize}});var Iq=hw();function jq(t,e){let n=new Iq.Parser;return t.on("data",r=>n.parse(r,e)),new Promise(r=>t.on("end",()=>r()))}ln.parse=jq});var vw=g($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.default={}});var yw=g((wF,gw)=>{var{getStream:Nq,getSecureStream:Oq}=Bq();gw.exports={getStream:Nq,getSecureStream:Oq};function Rq(){function t(n){let r=require("net");return new r.Socket}function e(n){return require("tls").connect(n)}return{getStream:t,getSecureStream:e}}function Dq(){function t(n){let{CloudflareSocket:r}=vw();return new r(n)}function e(n){return n.socket.startTls(n),n.socket}return{getStream:t,getSecureStream:e}}function Mq(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function Bq(){return Mq()?Dq():Rq()}});var Qd=g((SF,xw)=>{"use strict";var Fq=require("events").EventEmitter,{parse:Lq,serialize:Ne}=zd(),{getStream:zq,getSecureStream:$q}=yw(),Uq=Ne.flush(),Qq=Ne.sync(),Vq=Ne.end(),Ud=class extends Fq{constructor(e){super(),e=e||{},this.stream=e.stream||zq(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let n=this;this.on("newListener",function(r){r==="message"&&(n._emitMessage=!0)})}connect(e,n){let r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,n),this.stream.once("connect",function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")});let i=function(a){r._ending&&(a.code==="ECONNRESET"||a.code==="EPIPE")||r.emit("error",a)};if(this.stream.on("error",i),this.stream.on("close",function(){r.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:r.stream};r.ssl!==!0&&(Object.assign(o,r.ssl),"key"in r.ssl&&(o.key=r.ssl.key));let c=require("net");c.isIP&&c.isIP(n)===0&&(o.servername=n);try{r.stream=$q(o)}catch(u){return r.emit("error",u)}r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")})}attachListeners(e){Lq(e,n=>{let r=n.name==="error"?"errorMessage":n.name;this._emitMessage&&this.emit("message",n),this.emit(r,n)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(e){this.stream.write(Ne.startup(e))}cancel(e,n){this._send(Ne.cancel(e,n))}password(e){this._send(Ne.password(e))}sendSASLInitialResponseMessage(e,n){this._send(Ne.sendSASLInitialResponseMessage(e,n))}sendSCRAMClientFinalMessage(e){this._send(Ne.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(Ne.query(e))}parse(e){this._send(Ne.parse(e))}bind(e){this._send(Ne.bind(e))}execute(e){this._send(Ne.execute(e))}flush(){this.stream.writable&&this.stream.write(Uq)}sync(){this._ending=!0,this._send(Qq)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Vq,()=>{this.stream.end()})}close(e){this._send(Ne.close(e))}describe(e){this._send(Ne.describe(e))}sendCopyFromChunk(e){this._send(Ne.copyData(e))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(e){this._send(Ne.copyFail(e))}};xw.exports=Ud});var _w=g((_F,Sw)=>{"use strict";var{Transform:Hq}=require("stream"),{StringDecoder:Gq}=require("string_decoder"),pn=Symbol("last"),Mo=Symbol("decoder");function Kq(t,e,n){let r;if(this.overflow){if(r=this[Mo].write(t).split(this.matcher),r.length===1)return n();r.shift(),this.overflow=!1}else this[pn]+=this[Mo].write(t),r=this[pn].split(this.matcher);this[pn]=r.pop();for(let i=0;i<r.length;i++)try{ww(this,this.mapper(r[i]))}catch(a){return n(a)}if(this.overflow=this[pn].length>this.maxLength,this.overflow&&!this.skipOverflow){n(new Error("maximum buffer reached"));return}n()}function Wq(t){if(this[pn]+=this[Mo].end(),this[pn])try{ww(this,this.mapper(this[pn]))}catch(e){return t(e)}t()}function ww(t,e){e!==void 0&&t.push(e)}function bw(t){return t}function Zq(t,e,n){switch(t=t||/\r?\n/,e=e||bw,n=n||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(n=t,t=/\r?\n/);break;case 2:typeof t=="function"?(n=e,e=t,t=/\r?\n/):typeof e=="object"&&(n=e,e=bw)}n=Object.assign({},n),n.autoDestroy=!0,n.transform=Kq,n.flush=Wq,n.readableObjectMode=!0;let r=new Hq(n);return r[pn]="",r[Mo]=new Gq("utf8"),r.matcher=t,r.mapper=e,r.maxLength=n.maxLength,r.skipOverflow=n.skipOverflow||!1,r.overflow=!1,r._destroy=function(i,a){this._writableState.errorEmitted=!1,a(i)},r}Sw.exports=Zq});var Tw=g((EF,Ht)=>{"use strict";var Ew=require("path"),Jq=require("stream").Stream,Xq=_w(),kw=require("util"),Yq=5432,Bo=process.platform==="win32",Ra=process.stderr,e9=56,t9=7,n9=61440,r9=32768;function i9(t){return(t&n9)==r9}var ei=["host","port","database","user","password"],Vd=ei.length,a9=ei[Vd-1];function Hd(){var t=Ra instanceof Jq&&Ra.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
pollmetry-app  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
pollmetry-app  | 
pollmetry-app  | TypeError: Cannot read properties of undefined (reading 'searchParams')
pollmetry-app  |     at Jr (/app/dist/index.cjs:63:24774)
pollmetry-app  |     at new hd (/app/dist/index.cjs:63:27779)
pollmetry-app  |     at new Lo (/app/dist/index.cjs:64:2448)
pollmetry-app  |     at Zd.newClient (/app/dist/index.cjs:64:16207)
pollmetry-app  |     at Zd.connect (/app/dist/index.cjs:64:16156)
pollmetry-app  |     at Zd.query (/app/dist/index.cjs:64:18706)
pollmetry-app  |     at /app/dist/index.cjs:70:100339
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  |     at /app/dist/index.cjs:70:100175
pollmetry-app  |     at Object.startActiveSpan (/app/dist/index.cjs:64:35057)
pollmetry-app  | 
pollmetry-app  | Node.js v20.20.0
pollmetry-app exited with code 1 (restarting)
